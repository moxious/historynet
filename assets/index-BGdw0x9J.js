var es=Object.defineProperty;var ts=(e,t,r)=>t in e?es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ne=(e,t,r)=>ts(e,typeof t!="symbol"?t+"":t,r);import{r as requireReact,a as requireReactDom,g as getDefaultExportFromCjs,b as reactExports,R as React3,u as useSearchParams,c as useParams,d as commonjsGlobal,e as useMatch,L as Link,f as useLocation,N as Navigate,h as useNavigate,i as Routes,j as Route,H as HashRouter}from"./react-vendor-3Ir5NhDH.js";import{s as select,a as simulation,l as link,m as manyBody,c as center,b as collide,x,y,d as drag,z as zoom,i as identity}from"./d3-vendor-DRIfVfmf.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=requireReact(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function l(p,d,u){var a,h={},j=null,R=null;u!==void 0&&(j=""+u),d.key!==void 0&&(j=""+d.key),d.ref!==void 0&&(R=d.ref);for(a in d)s.call(d,a)&&!n.hasOwnProperty(a)&&(h[a]=d[a]);if(p&&p.defaultProps)for(a in d=p.defaultProps,d)h[a]===void 0&&(h[a]=d[a]);return{$$typeof:t,type:p,key:j,ref:R,props:h,_owner:i.current}}return reactJsxRuntime_production_min.Fragment=r,reactJsxRuntime_production_min.jsx=l,reactJsxRuntime_production_min.jsxs=l,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var e=requireReactDom();return client.createRoot=e.createRoot,client.hydrateRoot=e.hydrateRoot,client}var clientExports=requireClient(),reactFastCompare,hasRequiredReactFastCompare;function requireReactFastCompare(){if(hasRequiredReactFastCompare)return reactFastCompare;hasRequiredReactFastCompare=1;var e=typeof Element<"u",t=typeof Map=="function",r=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(n,l){if(n===l)return!0;if(n&&l&&typeof n=="object"&&typeof l=="object"){if(n.constructor!==l.constructor)return!1;var p,d,u;if(Array.isArray(n)){if(p=n.length,p!=l.length)return!1;for(d=p;d--!==0;)if(!i(n[d],l[d]))return!1;return!0}var a;if(t&&n instanceof Map&&l instanceof Map){if(n.size!==l.size)return!1;for(a=n.entries();!(d=a.next()).done;)if(!l.has(d.value[0]))return!1;for(a=n.entries();!(d=a.next()).done;)if(!i(d.value[1],l.get(d.value[0])))return!1;return!0}if(r&&n instanceof Set&&l instanceof Set){if(n.size!==l.size)return!1;for(a=n.entries();!(d=a.next()).done;)if(!l.has(d.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(l)){if(p=n.length,p!=l.length)return!1;for(d=p;d--!==0;)if(n[d]!==l[d])return!1;return!0}if(n.constructor===RegExp)return n.source===l.source&&n.flags===l.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof l.valueOf=="function")return n.valueOf()===l.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof l.toString=="function")return n.toString()===l.toString();if(u=Object.keys(n),p=u.length,p!==Object.keys(l).length)return!1;for(d=p;d--!==0;)if(!Object.prototype.hasOwnProperty.call(l,u[d]))return!1;if(e&&n instanceof Element)return!1;for(d=p;d--!==0;)if(!((u[d]==="_owner"||u[d]==="__v"||u[d]==="__o")&&n.$$typeof)&&!i(n[u[d]],l[u[d]]))return!1;return!0}return n!==n&&l!==l}return reactFastCompare=function(l,p){try{return i(l,p)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},reactFastCompare}var reactFastCompareExports=requireReactFastCompare();const fastCompare=getDefaultExportFromCjs(reactFastCompareExports);var browser,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;var e=function(t,r,s,i,n,l,p,d){if(!t){var u;if(r===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[s,i,n,l,p,d],h=0;u=new Error(r.replace(/%s/g,function(){return a[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return browser=e,browser}var browserExports=requireBrowser();const invariant=getDefaultExportFromCjs(browserExports);var shallowequal,hasRequiredShallowequal;function requireShallowequal(){return hasRequiredShallowequal||(hasRequiredShallowequal=1,shallowequal=function(t,r,s,i){var n=s?s.call(i,t,r):void 0;if(n!==void 0)return!!n;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var l=Object.keys(t),p=Object.keys(r);if(l.length!==p.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(r),u=0;u<l.length;u++){var a=l[u];if(!d(a))return!1;var h=t[a],j=r[a];if(n=s?s.call(i,h,j,a):void 0,n===!1||n===void 0&&h!==j)return!1}return!0}),shallowequal}var shallowequalExports=requireShallowequal();const shallowEqual=getDefaultExportFromCjs(shallowequalExports);var TAG_NAMES=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(TAG_NAMES||{}),SEO_PRIORITY_TAGS={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},VALID_TAG_NAMES=Object.values(TAG_NAMES),REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},HTML_TAG_MAP=Object.entries(REACT_TAG_MAP).reduce((e,[t,r])=>(e[r]=t,e),{}),HELMET_ATTRIBUTE="data-rh",HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},getInnermostProperty=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const s=e[r];if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}return null},getTitleFromPropsList=e=>{let t=getInnermostProperty(e,"title");const r=getInnermostProperty(e,HELMET_PROPS.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const s=getInnermostProperty(e,HELMET_PROPS.DEFAULT_TITLE);return t||s||void 0},getOnChangeClientState=e=>getInnermostProperty(e,HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||(()=>{}),getAttributesFromPropsList=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,s)=>({...r,...s}),{}),getBaseTagFromPropsList=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,s)=>{if(!r.length){const i=Object.keys(s);for(let n=0;n<i.length;n+=1){const p=i[n].toLowerCase();if(e.indexOf(p)!==-1&&s[p])return r.concat(s)}}return r},[]),warn=e=>console&&typeof console.warn=="function"&&console.warn(e),getTagsFromPropsList=(e,t,r)=>{const s={};return r.filter(i=>Array.isArray(i[e])?!0:(typeof i[e]<"u"&&warn(`Helmet: ${e} should be of type "Array". Instead found type "${typeof i[e]}"`),!1)).map(i=>i[e]).reverse().reduce((i,n)=>{const l={};n.filter(d=>{let u;const a=Object.keys(d);for(let j=0;j<a.length;j+=1){const R=a[j],b=R.toLowerCase();t.indexOf(b)!==-1&&!(u==="rel"&&d[u].toLowerCase()==="canonical")&&!(b==="rel"&&d[b].toLowerCase()==="stylesheet")&&(u=b),t.indexOf(R)!==-1&&(R==="innerHTML"||R==="cssText"||R==="itemprop")&&(u=R)}if(!u||!d[u])return!1;const h=d[u].toLowerCase();return s[u]||(s[u]={}),l[u]||(l[u]={}),s[u][h]?!1:(l[u][h]=!0,!0)}).reverse().forEach(d=>i.push(d));const p=Object.keys(l);for(let d=0;d<p.length;d+=1){const u=p[d],a={...s[u],...l[u]};s[u]=a}return i},[]).reverse()},getAnyTrueFromPropsList=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},reducePropsToState=e=>({baseTag:getBaseTagFromPropsList(["href"],e),bodyAttributes:getAttributesFromPropsList("bodyAttributes",e),defer:getInnermostProperty(e,HELMET_PROPS.DEFER),encode:getInnermostProperty(e,HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:getAttributesFromPropsList("htmlAttributes",e),linkTags:getTagsFromPropsList("link",["rel","href"],e),metaTags:getTagsFromPropsList("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:getTagsFromPropsList("noscript",["innerHTML"],e),onChangeClientState:getOnChangeClientState(e),scriptTags:getTagsFromPropsList("script",["src","innerHTML"],e),styleTags:getTagsFromPropsList("style",["cssText"],e),title:getTitleFromPropsList(e),titleAttributes:getAttributesFromPropsList("titleAttributes",e),prioritizeSeoTags:getAnyTrueFromPropsList(e,HELMET_PROPS.PRIORITIZE_SEO_TAGS)}),flattenArray=e=>Array.isArray(e)?e.join(""):e,checkIfPropsMatch=(e,t)=>{const r=Object.keys(e);for(let s=0;s<r.length;s+=1)if(t[r[s]]&&t[r[s]].includes(e[r[s]]))return!0;return!1},prioritizer=(e,t)=>Array.isArray(e)?e.reduce((r,s)=>(checkIfPropsMatch(s,t)?r.priority.push(s):r.default.push(s),r),{priority:[],default:[]}):{default:e,priority:[]},without=(e,t)=>({...e,[t]:void 0}),SELF_CLOSING_TAGS=["noscript","script","style"],encodeSpecialCharacters=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),generateElementAttributesAsString=e=>Object.keys(e).reduce((t,r)=>{const s=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${s}`:s},""),generateTitleAsString=(e,t,r,s)=>{const i=generateElementAttributesAsString(r),n=flattenArray(t);return i?`<${e} ${HELMET_ATTRIBUTE}="true" ${i}>${encodeSpecialCharacters(n,s)}</${e}>`:`<${e} ${HELMET_ATTRIBUTE}="true">${encodeSpecialCharacters(n,s)}</${e}>`},generateTagsAsString=(e,t,r=!0)=>t.reduce((s,i)=>{const n=i,l=Object.keys(n).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,a)=>{const h=typeof n[a]>"u"?a:`${a}="${encodeSpecialCharacters(n[a],r)}"`;return u?`${u} ${h}`:h},""),p=n.innerHTML||n.cssText||"",d=SELF_CLOSING_TAGS.indexOf(e)===-1;return`${s}<${e} ${HELMET_ATTRIBUTE}="true" ${l}${d?"/>":`>${p}</${e}>`}`},""),convertElementAttributesToReactProps=(e,t={})=>Object.keys(e).reduce((r,s)=>{const i=REACT_TAG_MAP[s];return r[i||s]=e[s],r},t),generateTitleAsReactComponent=(e,t,r)=>{const s={key:t,[HELMET_ATTRIBUTE]:!0},i=convertElementAttributesToReactProps(r,s);return[React3.createElement("title",i,t)]},generateTagsAsReactComponent=(e,t)=>t.map((r,s)=>{const i={key:s,[HELMET_ATTRIBUTE]:!0};return Object.keys(r).forEach(n=>{const p=REACT_TAG_MAP[n]||n;if(p==="innerHTML"||p==="cssText"){const d=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:d}}else i[p]=r[n]}),React3.createElement(e,i)}),getMethodsForTag=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>generateTitleAsReactComponent(e,t.title,t.titleAttributes),toString:()=>generateTitleAsString(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>convertElementAttributesToReactProps(t),toString:()=>generateElementAttributesAsString(t)};default:return{toComponent:()=>generateTagsAsReactComponent(e,t),toString:()=>generateTagsAsString(e,t,r)}}},getPriorityMethods=({metaTags:e,linkTags:t,scriptTags:r,encode:s})=>{const i=prioritizer(e,SEO_PRIORITY_TAGS.meta),n=prioritizer(t,SEO_PRIORITY_TAGS.link),l=prioritizer(r,SEO_PRIORITY_TAGS.script);return{priorityMethods:{toComponent:()=>[...generateTagsAsReactComponent("meta",i.priority),...generateTagsAsReactComponent("link",n.priority),...generateTagsAsReactComponent("script",l.priority)],toString:()=>`${getMethodsForTag("meta",i.priority,s)} ${getMethodsForTag("link",n.priority,s)} ${getMethodsForTag("script",l.priority,s)}`},metaTags:i.default,linkTags:n.default,scriptTags:l.default}},mapStateOnServer=e=>{const{baseTag:t,bodyAttributes:r,encode:s=!0,htmlAttributes:i,noscriptTags:n,styleTags:l,title:p="",titleAttributes:d,prioritizeSeoTags:u}=e;let{linkTags:a,metaTags:h,scriptTags:j}=e,R={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:R,linkTags:a,metaTags:h,scriptTags:j}=getPriorityMethods(e)),{priority:R,base:getMethodsForTag("base",t,s),bodyAttributes:getMethodsForTag("bodyAttributes",r,s),htmlAttributes:getMethodsForTag("htmlAttributes",i,s),link:getMethodsForTag("link",a,s),meta:getMethodsForTag("meta",h,s),noscript:getMethodsForTag("noscript",n,s),script:getMethodsForTag("script",j,s),style:getMethodsForTag("style",l,s),title:getMethodsForTag("title",{title:p,titleAttributes:d},s)}},server_default=mapStateOnServer,instances=[],isDocument=!!(typeof window<"u"&&window.document&&window.document.createElement),HelmetData=class{constructor(e,t){ne(this,"instances",[]);ne(this,"canUseDOM",isDocument);ne(this,"context");ne(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?instances:this.instances,add:e=>{(this.canUseDOM?instances:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?instances:this.instances).indexOf(e);(this.canUseDOM?instances:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=server_default({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},defaultValue={},Context=React3.createContext(defaultValue),ct,HelmetProvider=(ct=class extends reactExports.Component{constructor(r){super(r);ne(this,"helmetData");this.helmetData=new HelmetData(this.props.context||{},ct.canUseDOM)}render(){return React3.createElement(Context.Provider,{value:this.helmetData.value},this.props.children)}},ne(ct,"canUseDOM",isDocument),ct),updateTags=(e,t)=>{const r=document.head||document.querySelector("head"),s=r.querySelectorAll(`${e}[${HELMET_ATTRIBUTE}]`),i=[].slice.call(s),n=[];let l;return t&&t.length&&t.forEach(p=>{const d=document.createElement(e);for(const u in p)if(Object.prototype.hasOwnProperty.call(p,u))if(u==="innerHTML")d.innerHTML=p.innerHTML;else if(u==="cssText")d.styleSheet?d.styleSheet.cssText=p.cssText:d.appendChild(document.createTextNode(p.cssText));else{const a=u,h=typeof p[a]>"u"?"":p[a];d.setAttribute(u,h)}d.setAttribute(HELMET_ATTRIBUTE,"true"),i.some((u,a)=>(l=a,d.isEqualNode(u)))?i.splice(l,1):n.push(d)}),i.forEach(p=>{var d;return(d=p.parentNode)==null?void 0:d.removeChild(p)}),n.forEach(p=>r.appendChild(p)),{oldTags:i,newTags:n}},updateAttributes=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const s=r.getAttribute(HELMET_ATTRIBUTE),i=s?s.split(","):[],n=[...i],l=Object.keys(t);for(const p of l){const d=t[p]||"";r.getAttribute(p)!==d&&r.setAttribute(p,d),i.indexOf(p)===-1&&i.push(p);const u=n.indexOf(p);u!==-1&&n.splice(u,1)}for(let p=n.length-1;p>=0;p-=1)r.removeAttribute(n[p]);i.length===n.length?r.removeAttribute(HELMET_ATTRIBUTE):r.getAttribute(HELMET_ATTRIBUTE)!==l.join(",")&&r.setAttribute(HELMET_ATTRIBUTE,l.join(","))},updateTitle=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=flattenArray(e)),updateAttributes("title",t)},commitTagChanges=(e,t)=>{const{baseTag:r,bodyAttributes:s,htmlAttributes:i,linkTags:n,metaTags:l,noscriptTags:p,onChangeClientState:d,scriptTags:u,styleTags:a,title:h,titleAttributes:j}=e;updateAttributes("body",s),updateAttributes("html",i),updateTitle(h,j);const R={baseTag:updateTags("base",r),linkTags:updateTags("link",n),metaTags:updateTags("meta",l),noscriptTags:updateTags("noscript",p),scriptTags:updateTags("script",u),styleTags:updateTags("style",a)},b={},C={};Object.keys(R).forEach(S=>{const{newTags:I,oldTags:G}=R[S];I.length&&(b[S]=I),G.length&&(C[S]=R[S].oldTags)}),t&&t(),d(e,b,C)},_helmetCallback=null,handleStateChangeOnClient=e=>{_helmetCallback&&cancelAnimationFrame(_helmetCallback),e.defer?_helmetCallback=requestAnimationFrame(()=>{commitTagChanges(e,()=>{_helmetCallback=null})}):(commitTagChanges(e),_helmetCallback=null)},client_default=handleStateChangeOnClient,HelmetDispatcher=class extends reactExports.Component{constructor(){super(...arguments);ne(this,"rendered",!1)}shouldComponentUpdate(t){return!shallowEqual(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let s=null;const i=reducePropsToState(t.get().map(n=>{const l={...n.props};return delete l.context,l}));HelmetProvider.canUseDOM?client_default(i):server_default&&(s=server_default(i)),r(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},Gr,Helmet=(Gr=class extends reactExports.Component{shouldComponentUpdate(e){return!fastCompare(without(this.props,"helmetData"),without(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,s){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,s)}]}}mapObjectTypeChildren(e,t,r,s){switch(e.type){case"title":return{...t,[e.type]:s,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(s=>{r={...r,[s]:e[s]}}),r}warnOnInvalidChildren(e,t){return invariant(VALID_TAG_NAMES.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${VALID_TAG_NAMES.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),invariant(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return React3.Children.forEach(e,s=>{if(!s||!s.props)return;const{children:i,...n}=s.props,l=Object.keys(n).reduce((d,u)=>(d[HTML_TAG_MAP[u]||u]=n[u],d),{});let{type:p}=s;switch(typeof p=="symbol"?p=p.toString():this.warnOnInvalidChildren(s,i),p){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(s,r,l,i);break;default:t=this.mapObjectTypeChildren(s,t,l,i);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:s}=t;if(e&&(r=this.mapChildrenToProps(e,r)),s&&!(s instanceof HelmetData)){const i=s;s=new HelmetData(i.context,!0),delete r.helmetData}return s?React3.createElement(HelmetDispatcher,{...r,context:s.value}):React3.createElement(Context.Consumer,null,i=>React3.createElement(HelmetDispatcher,{...r,context:i}))}},ne(Gr,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Gr);function getDatasetsBasePath(){const e="/historynet/";return`${e.endsWith("/")?e:e+"/"}datasets`}function getPublicAssetUrl(e){const t="/historynet/";return`${t.endsWith("/")?t:t+"/"}${e}`}class DatasetLoadError extends Error{constructor(t,r,s){super(t),this.code=r,this.originalError=s,this.name="DatasetLoadError"}}async function fetchJson(e,t,r){try{const s=await fetch(e,{signal:r});if(!s.ok)throw new DatasetLoadError(`Failed to load ${t}: HTTP ${s.status}`,"HTTP_ERROR");return await s.json()}catch(s){throw s instanceof Error&&s.name==="AbortError"||s instanceof DatasetLoadError?s:new DatasetLoadError(`Failed to load ${t}: ${s instanceof Error?s.message:"Unknown error"}`,"FETCH_ERROR",s)}}function getDatasetPath(e,t){return`${getDatasetsBasePath()}/${e}/${t}`}async function loadManifest(e,t){const r=getDatasetPath(e,"manifest.json"),s=await fetchJson(r,`manifest for ${e}`,t);if(!s.id||!s.name||!s.description||!s.lastUpdated)throw new DatasetLoadError(`Invalid manifest for ${e}: missing required fields`,"INVALID_MANIFEST");return s}async function loadNodes(e,t){const r=getDatasetPath(e,"nodes.json"),s=await fetchJson(r,`nodes for ${e}`,t);if(!Array.isArray(s))throw new DatasetLoadError(`Invalid nodes for ${e}: expected array`,"INVALID_NODES");for(const i of s)if(!i.id||!i.type||!i.title)throw new DatasetLoadError(`Invalid node in ${e}: missing required fields (id, type, or title)`,"INVALID_NODE");return s}async function loadEdges(e,t){const r=getDatasetPath(e,"edges.json"),s=await fetchJson(r,`edges for ${e}`,t);if(!Array.isArray(s))throw new DatasetLoadError(`Invalid edges for ${e}: expected array`,"INVALID_EDGES");for(const i of s)if(!i.id||!i.source||!i.target||!i.relationship)throw new DatasetLoadError(`Invalid edge in ${e}: missing required fields (id, source, target, or relationship)`,"INVALID_EDGE");return s}async function loadGraphData(e,t){const[r,s]=await Promise.all([loadNodes(e,t),loadEdges(e,t)]);return{nodes:r,edges:s}}async function loadDataset(e,t){const r=await loadManifest(e,t),s=await loadGraphData(e,t);return{manifest:r,data:s}}function validateEdgeReferences(e){const t=new Set(e.nodes.map(s=>s.id)),r=[];for(const s of e.edges)t.has(s.source)||r.push(`Edge ${s.id}: source node "${s.source}" not found`),t.has(s.target)||r.push(`Edge ${s.id}: target node "${s.target}" not found`);return{valid:r.length===0,errors:r}}const AVAILABLE_DATASETS=["ai-llm-research","ambient-music","christian-kabbalah","cybernetics-information-theory","enlightenment","florentine-academy","protestant-reformation","renaissance-humanism","rosicrucian-network","scientific-revolution","statistics-social-physics"],DEFAULT_DATASET_ID="ai-llm-research";function isValidDatasetId(e){return AVAILABLE_DATASETS.includes(e)}function useGraphData(){const[e,t]=reactExports.useState(null),[r,s]=reactExports.useState("idle"),[i,n]=reactExports.useState(null),l=reactExports.useRef(null),p=(e==null?void 0:e.data)??null,d=reactExports.useCallback(async R=>{var C;(C=l.current)==null||C.abort();const b=new AbortController;l.current=b,s("loading"),n(null);try{const S=await loadDataset(R,b.signal),I=validateEdgeReferences(S.data);I.valid||console.warn("Dataset has invalid edge references:",I.errors),t(S),s("success")}catch(S){if(S instanceof Error&&S.name==="AbortError")return;const I=S instanceof DatasetLoadError?{message:S.message,code:S.code,originalError:S.originalError}:{message:S instanceof Error?S.message:"Unknown error",originalError:S};n(I),s("error"),t(null)}},[]),u=reactExports.useCallback(()=>{t(null),s("idle"),n(null)},[]),a=reactExports.useCallback(R=>p==null?void 0:p.nodes.find(b=>b.id===R),[p]),h=reactExports.useCallback(R=>p==null?void 0:p.edges.find(b=>b.id===R),[p]),j=reactExports.useCallback(R=>p?p.edges.filter(b=>b.source===R||b.target===R):[],[p]);return reactExports.useMemo(()=>({dataset:e,graphData:p,loadingState:r,error:i,load:d,clear:u,getNode:a,getEdge:h,getEdgesForNode:j}),[e,p,r,i,d,u,a,h,j])}function useSelectedItem(){const[e,t]=reactExports.useState(null),r=reactExports.useCallback(u=>{t({type:"node",id:u})},[]),s=reactExports.useCallback(u=>{t({type:"edge",id:u})},[]),i=reactExports.useCallback((u,a)=>{t({type:u,id:a})},[]),n=reactExports.useCallback(()=>{t(null)},[]),l=reactExports.useCallback(u=>(e==null?void 0:e.type)==="node"&&e.id===u,[e]),p=reactExports.useCallback(u=>(e==null?void 0:e.type)==="edge"&&e.id===u,[e]),d=e!==null;return reactExports.useMemo(()=>({selection:e,selectNode:r,selectEdge:s,select:i,clearSelection:n,isNodeSelected:l,isEdgeSelected:p,hasSelection:d}),[e,r,s,i,n,l,p,d])}function getSelectedItem(e,t,r){if(e)return e.type==="node"?t.find(s=>s.id===e.id):r.find(s=>s.id===e.id)}const VALID_NODE_TYPES=["person","object","location","entity"];function parseNodeTypes(e){if(!e||!e.trim())return null;const t=e.split(",").map(r=>r.trim().toLowerCase()).filter(r=>VALID_NODE_TYPES.includes(r));return t.length===VALID_NODE_TYPES.length?null:t.length>0?t:null}function serializeNodeTypes(e){return e===null||e.length===0||e.length===VALID_NODE_TYPES.length?null:e.join(",")}function parseRelationshipTypes(e){if(!e||!e.trim())return null;const t=e.split(",").map(r=>r.trim()).filter(r=>r.length>0);return t.length>0?t:null}function serializeRelationshipTypes(e){return e===null||e.length===0?null:e.join(",")}const URL_PARAMS={DATASET:"dataset",SELECTED:"selected",SELECTED_TYPE:"type",LAYOUT:"layout",DATE_START:"dateStart",DATE_END:"dateEnd",NAME_FILTER:"name",RELATIONSHIP_TYPES:"relationshipTypes",NODE_TYPES:"nodeTypes"};function useUrlState(){const[e,t]=useSearchParams(),r=reactExports.useRef(t);r.current=t;const s=reactExports.useCallback((Z,V)=>{r.current(Z,V)},[]),i=e.get(URL_PARAMS.DATASET),n=reactExports.useCallback(Z=>{s(V=>{const K=new URLSearchParams(V);return K.set(URL_PARAMS.DATASET,Z),K})},[s]),l=reactExports.useCallback(Z=>{s(V=>{const K=new URLSearchParams(V);return K.set(URL_PARAMS.DATASET,Z),K.delete(URL_PARAMS.SELECTED),K.delete(URL_PARAMS.SELECTED_TYPE),K})},[s]),p=e.get(URL_PARAMS.SELECTED),d=e.get(URL_PARAMS.SELECTED_TYPE),u=d==="node"||d==="edge"?d:null,a=reactExports.useCallback((Z,V)=>{s(K=>{const A=new URLSearchParams(K);return A.set(URL_PARAMS.SELECTED,V),A.set(URL_PARAMS.SELECTED_TYPE,Z),A})},[s]),h=reactExports.useCallback(()=>{s(Z=>{const V=new URLSearchParams(Z);return V.delete(URL_PARAMS.SELECTED),V.delete(URL_PARAMS.SELECTED_TYPE),V})},[s]),j=e.get(URL_PARAMS.LAYOUT),R=reactExports.useCallback(Z=>{s(V=>{const K=new URLSearchParams(V);return K.set(URL_PARAMS.LAYOUT,Z),K})},[s]),b=e.get(URL_PARAMS.DATE_START),C=e.get(URL_PARAMS.DATE_END),S=e.get(URL_PARAMS.NAME_FILTER)??"",I=e.get(URL_PARAMS.RELATIONSHIP_TYPES),G=e.get(URL_PARAMS.NODE_TYPES),U=reactExports.useMemo(()=>({dateStart:b?parseInt(b,10):null,dateEnd:C?parseInt(C,10):null,nameFilter:S,relationshipTypes:parseRelationshipTypes(I),nodeTypes:parseNodeTypes(G)}),[b,C,S,I,G]),D=reactExports.useCallback(Z=>{s(V=>{const K=new URLSearchParams(V),A={...U,...Z};A.dateStart!==null&&!isNaN(A.dateStart)?K.set(URL_PARAMS.DATE_START,String(A.dateStart)):K.delete(URL_PARAMS.DATE_START),A.dateEnd!==null&&!isNaN(A.dateEnd)?K.set(URL_PARAMS.DATE_END,String(A.dateEnd)):K.delete(URL_PARAMS.DATE_END),A.nameFilter.trim()?K.set(URL_PARAMS.NAME_FILTER,A.nameFilter):K.delete(URL_PARAMS.NAME_FILTER);const M=serializeRelationshipTypes(A.relationshipTypes);M?K.set(URL_PARAMS.RELATIONSHIP_TYPES,M):K.delete(URL_PARAMS.RELATIONSHIP_TYPES);const T=serializeNodeTypes(A.nodeTypes);return T?K.set(URL_PARAMS.NODE_TYPES,T):K.delete(URL_PARAMS.NODE_TYPES),K})},[s,U]),q=reactExports.useCallback(()=>{s(Z=>{const V=new URLSearchParams(Z);return V.delete(URL_PARAMS.DATE_START),V.delete(URL_PARAMS.DATE_END),V.delete(URL_PARAMS.NAME_FILTER),V.delete(URL_PARAMS.RELATIONSHIP_TYPES),V.delete(URL_PARAMS.NODE_TYPES),V})},[s]),F=reactExports.useCallback(()=>{const Z={};return e.forEach((V,K)=>{Z[K]=V}),Z},[e]),le=reactExports.useCallback(()=>{s(new URLSearchParams)},[s]);return reactExports.useMemo(()=>({datasetId:i,setDatasetId:n,setDatasetIdAndClearSelection:l,selectedId:p,selectedType:u,setSelected:a,clearSelected:h,layout:j,setLayout:R,filters:U,setFilters:D,clearFilters:q,getAllParams:F,clearAll:le}),[i,n,l,p,u,a,h,j,R,U,D,q,F,le])}function parseYear(e){if(!e)return null;const t=e.match(/^-?\d+/);if(t){const r=parseInt(t[0],10);if(!isNaN(r))return r}return null}function nodeMatchesDateRange(e,t,r){if(t===null&&r===null)return!0;const s=parseYear(e.dateStart),i=parseYear(e.dateEnd);if(s===null&&i===null)return!0;if(t!==null){const n=i??s;if(n!==null&&n<t)return!1}if(r!==null){const n=s??i;if(n!==null&&n>r)return!1}return!0}function edgeMatchesDateRange(e,t,r){if(t===null&&r===null)return!0;const s=parseYear(e.dateStart),i=parseYear(e.dateEnd);if(s===null&&i===null)return!0;if(t!==null){const n=i??s;if(n!==null&&n<t)return!1}if(r!==null){const n=s??i;if(n!==null&&n>r)return!1}return!0}function nodeMatchesNameFilter(e,t){return t.trim()?e.title.toLowerCase().includes(t.toLowerCase().trim()):!0}function nodeMatchesTypeFilter(e,t){return t===null?!0:t.includes(e.type)}function edgeMatchesRelationshipFilter(e,t){return t===null?!0:t.includes(e.relationship)}function filterGraphData(e,t){const{dateStart:r,dateEnd:s,nameFilter:i,relationshipTypes:n,nodeTypes:l}=t,p=e.nodes.filter(a=>nodeMatchesTypeFilter(a,l)&&nodeMatchesDateRange(a,r,s)&&nodeMatchesNameFilter(a,i)),d=new Set(p.map(a=>a.id)),u=e.edges.filter(a=>!d.has(a.source)||!d.has(a.target)?!1:edgeMatchesDateRange(a,r,s)&&edgeMatchesRelationshipFilter(a,n));return{nodes:p,edges:u}}function getFilterStats(e,t){return{totalNodes:e.nodes.length,filteredNodes:t.nodes.length,totalEdges:e.edges.length,filteredEdges:t.edges.length}}function getGraphDateRange(e){let t=null,r=null;for(const s of e.nodes){const i=parseYear(s.dateStart),n=parseYear(s.dateEnd);i!==null&&((t===null||i<t)&&(t=i),(r===null||i>r)&&(r=i)),n!==null&&((t===null||n<t)&&(t=n),(r===null||n>r)&&(r=n))}return{minYear:t,maxYear:r}}function getNodeTypeCounts(e){const t={person:0,object:0,location:0,entity:0};for(const r of e.nodes)t[r.type]++;return t}function getRelationshipTypeCounts(e){const t={};for(const r of e.edges)t[r.relationship]=(t[r.relationship]??0)+1;return t}function getNodeTypeEmoji(e){switch(e){case"person":return"üë§";case"object":return"üìú";case"location":return"üìç";case"entity":return"üèõÔ∏è";default:return"üìÑ"}}function getNodeColor(e){switch(e){case"person":return"#3b82f6";case"object":return"#10b981";case"location":return"#f59e0b";case"entity":return"#8b5cf6";default:return"#6b7280"}}function getEdgeColor(e){return["influenced","influenced_by","taught","studied_under"].includes(e)?"#6366f1":["collaborated_with","corresponded_with","knows"].includes(e)?"#22c55e":["authored","translated","edited","founded"].includes(e)?"#f97316":["born_in","died_in","lived_in","worked_at","visited"].includes(e)?"#8b5cf6":["member_of","led","associated_with"].includes(e)?"#ec4899":["related_to","opposed","succeeded"].includes(e)?"#ef4444":"#94a3b8"}function createPerYearHeightMap(e,t,r,s){const i=new Map,n=new Map,l=new Map;let p=s.topPadding;for(let u=e;u<=t;u++){const a=r.get(u)??0,h=Math.ceil(a/s.eventsPerRow),j=Math.max(s.minYearHeight,h*s.pixelsPerEventRow);l.set(u,j),i.set(u,p),n.set(u,p+j),p+=j}const d=p-s.topPadding;return{yearToYStart:i,yearToYEnd:n,totalHeight:d,getYearHeight:u=>l.get(u)??s.minYearHeight}}const DEFAULT_CONFIG={gapThreshold:40,minSegmentHeight:100,breakIndicatorHeight:30,topPadding:50,bottomPadding:50,pixelsPerEvent:24,minYearHeight:30,eventsPerRow:2};function detectSegments(e,t=DEFAULT_CONFIG.gapThreshold){if(e.length===0)return[];const r=[...e].sort((n,l)=>n-l),s=[];let i={yearStart:r[0],yearEnd:r[0],dataPoints:1};for(let n=1;n<r.length;n++){const l=r[n];l-i.yearEnd>t?(s.push(i),i={yearStart:l,yearEnd:l,dataPoints:1}):(i.yearEnd=l,i.dataPoints++)}return s.push(i),s}function findDensestSegment(e){if(e.length===0)throw new Error("Cannot find densest segment from empty array");return e.reduce((t,r)=>r.dataPoints>t.dataPoints?r:t)}function createSegmentedScale(e,t,r={}){const s={...DEFAULT_CONFIG,...r},i=detectSegments(e,s.gapThreshold);if(i.length===0)return createFallbackScale(1600,2e3,t,s);if(i.length===1){const n=i[0];return createSingleSegmentScale(n,t,s,r.eventsPerYear,s.pixelsPerEvent)}return createPiecewiseScale(i,t,s,r.eventsPerYear,s.pixelsPerEvent)}function createFallbackScale(e,t,r,s){const i=r-s.topPadding-s.bottomPadding,n=t-e,l={yearStart:e,yearEnd:t,dataPoints:0,yStart:s.topPadding,yEnd:s.topPadding+i};return{segments:[l],gapThreshold:s.gapThreshold,toY:p=>{const d=(p-e)/n;return s.topPadding+d*i},fromY:p=>{const d=(p-s.topPadding)/i;return e+d*n},getSegmentBreaks:()=>[],getDensestSegment:()=>l,isSingleSegment:!0}}function createSingleSegmentScale(e,t,r,s,i=24){const n=createPerYearHeightMap(e.yearStart,e.yearEnd,s??new Map,{minYearHeight:r.minYearHeight,pixelsPerEventRow:i,eventsPerRow:r.eventsPerRow,topPadding:r.topPadding}),l=n.totalHeight,p={...e,yStart:r.topPadding,yEnd:r.topPadding+l},d=a=>{if(a<e.yearStart)return r.topPadding;if(a>e.yearEnd)return r.topPadding+l;const h=Math.floor(a),j=a-h,R=Math.max(e.yearStart,Math.min(e.yearEnd,h)),b=n.yearToYStart.get(R)??r.topPadding,C=n.yearToYEnd.get(R)??b;return b+j*(C-b)},u=a=>{for(let h=e.yearStart;h<=e.yearEnd;h++){const j=n.yearToYEnd.get(h);if(j!==void 0&&a<=j){const R=n.yearToYStart.get(h)??r.topPadding,b=j-R;if(b>0){const C=(a-R)/b;return h+Math.max(0,Math.min(1,C))}return h}}return e.yearEnd};return{segments:[p],gapThreshold:r.gapThreshold,toY:d,fromY:u,getSegmentBreaks:()=>[],getDensestSegment:()=>p,isSingleSegment:!0}}function createPiecewiseScale(e,t,r,s,i=24){const n=[];let l=r.topPadding;const p=[];for(let h=0;h<e.length;h++){const j=e[h],R=createPerYearHeightMap(j.yearStart,j.yearEnd,s??new Map,{minYearHeight:r.minYearHeight,pixelsPerEventRow:i,eventsPerRow:r.eventsPerRow,topPadding:l});n.push(R);const b=Math.max(R.totalHeight,r.minSegmentHeight);p.push({...j,yStart:l,yEnd:l+b}),l+=b,h<e.length-1&&(l+=r.breakIndicatorHeight)}const d=h=>{for(let R=0;R<p.length;R++){const b=p[R],C=n[R];if(h<=b.yearEnd){if(h<b.yearStart)return b.yStart;const S=Math.floor(h),I=h-S,G=Math.max(b.yearStart,Math.min(b.yearEnd,S)),U=C.yearToYStart.get(G)??b.yStart,D=C.yearToYEnd.get(G)??U;return U+I*(D-U)}}return p[p.length-1].yEnd},u=h=>{for(let R=0;R<p.length;R++){const b=p[R],C=n[R];if(h<=b.yEnd){if(h<b.yStart)return b.yearStart;for(let S=b.yearStart;S<=b.yearEnd;S++){const I=C.yearToYEnd.get(S);if(I!==void 0&&h<=I){const G=C.yearToYStart.get(S)??b.yStart,U=I-G;if(U>0){const D=(h-G)/U;return S+Math.max(0,Math.min(1,D))}return S}}return b.yearEnd}}return p[p.length-1].yearEnd},a=()=>{const h=[];for(let j=0;j<p.length-1;j++){const R=p[j],b=p[j+1];h.push({y:R.yEnd+r.breakIndicatorHeight/2,gapYears:b.yearStart-R.yearEnd,yearBefore:R.yearEnd,yearAfter:b.yearStart})}return h};return{segments:p,gapThreshold:r.gapThreshold,toY:d,fromY:u,getSegmentBreaks:a,getDensestSegment:()=>findDensestSegment(p),isSingleSegment:!1}}function getTickGranularity(e){return e<.8?"decade":e<2?"year":e<4?"month":"day"}const MONTH_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function dateToDecimalYear(e,t=1,r=1){const s=Math.max(1,Math.min(12,t)),i=Math.max(1,Math.min(31,r)),l=[0,31,59,90,120,151,181,212,243,273,304,334][s-1]+i;return e+(l-1)/365}function generateTicks(e,t,r){const s=[];switch(r){case"decade":{const i=Math.floor(e/10)*10,n=Math.ceil(t/10)*10;for(let l=i;l<=n;l+=10)l>=e&&l<=t&&s.push({value:l,label:`${l}`,isMajor:l%100===0,granularity:"decade"});break}case"year":{for(let i=Math.floor(e);i<=Math.ceil(t);i++)s.push({value:i,label:`${i}`,isMajor:i%10===0,granularity:"year"});break}case"month":{for(let i=Math.floor(e);i<=Math.ceil(t);i++)for(let n=1;n<=12;n++){const l=dateToDecimalYear(i,n,1);l>=e&&l<=t&&s.push({value:l,label:n===1?`${i}`:MONTH_NAMES[n-1],isMajor:n===1,granularity:"month"})}break}case"day":{const i=[31,28,31,30,31,30,31,31,30,31,30,31];for(let n=Math.floor(e);n<=Math.ceil(t);n++)for(let l=1;l<=12;l++){const p=i[l-1];for(let d=1;d<=p;d++){const u=dateToDecimalYear(n,l,d);if(u>=e&&u<=t){const a=d===1,h=d===1||d===10||d===20;let j="";a?j=l===1?`${n}`:MONTH_NAMES[l-1]:h&&(j=`${d}`),s.push({value:u,label:j,isMajor:a,granularity:"day"})}}}break}}return s}const ALLOWED_LINK_PROTOCOLS=["http:","https:","mailto:"],ALLOWED_IMAGE_PROTOCOLS=["http:","https:"];function sanitizeUrl(e){if(!e||typeof e!="string")return"#";const t=e.trim();if(!t)return"#";try{const r=new URL(t);return ALLOWED_LINK_PROTOCOLS.includes(r.protocol)?t:"#"}catch{return"#"}}function isValidImageUrl(e){if(!e||typeof e!="string")return!1;const t=e.trim();if(!t)return!1;try{const r=new URL(t);return ALLOWED_IMAGE_PROTOCOLS.includes(r.protocol)}catch{return!1}}function buildExploreUrl(e,t){const r=`/${encodeURIComponent(e)}/explore`;if(!t)return r;const s=new URLSearchParams;t.selected&&s.set("selected",t.selected),t.type&&s.set("type",t.type),t.layout&&s.set("layout",t.layout),t.theme&&s.set("theme",t.theme);const i=s.toString();return i?`${r}?${i}`:r}function buildNodeUrl$1(e,t){return`/${encodeURIComponent(e)}/node/${encodeURIComponent(t)}`}function buildFullDatasetUrl(e){return`${window.location.origin}${window.location.pathname}#/${encodeURIComponent(e)}`}const GraphContext=reactExports.createContext(null);function GraphProvider({children:e}){const{dataset:t,graphData:r,loadingState:s,error:i,load:n,getNode:l,getEdge:p,getEdgesForNode:d}=useGraphData(),{selection:u,selectNode:a,selectEdge:h,clearSelection:j,isNodeSelected:R,isEdgeSelected:b}=useSelectedItem(),{datasetId:C,setDatasetId:S,setDatasetIdAndClearSelection:I,setSelected:G,clearSelected:U,selectedId:D,selectedType:q,filters:F,setFilters:le,clearFilters:Z,layout:V,setLayout:K}=useUrlState(),A=V||"force-graph",M=reactExports.useCallback(Ee=>{K(Ee)},[K]),T=C||DEFAULT_DATASET_ID;reactExports.useEffect(()=>{isValidDatasetId(T)?(!t||t.manifest.id!==T)&&n(T):isValidDatasetId(T)||(console.warn(`Invalid dataset ID: ${T}, loading default`),S(DEFAULT_DATASET_ID))},[T,t,n,S]),reactExports.useEffect(()=>{(u==null?void 0:u.type)===q&&(u==null?void 0:u.id)===D||D&&q&&r&&(q==="node"?l(D)&&a(D):p(D)&&h(D))},[D,q,r,l,p,a,h,u]);const ee=reactExports.useCallback(Ee=>{a(Ee),G("node",Ee)},[a,G]),J=reactExports.useCallback(Ee=>{h(Ee),G("edge",Ee)},[h,G]),me=reactExports.useCallback(()=>{j(),U()},[j,U]),B=reactExports.useRef(null);reactExports.useEffect(()=>{if(B.current){const Ee=[];B.current.selectNode!==ee&&Ee.push("selectNode"),B.current.selectEdge!==J&&Ee.push("selectEdge"),B.current.selectNodeBase!==a&&Ee.push("selectNodeBase"),B.current.setUrlSelected!==G&&Ee.push("setUrlSelected"),Ee.length>0&&console.log("[GraphContext] Selection function references changed:",Ee)}B.current={selectNode:ee,selectEdge:J,selectNodeBase:a,setUrlSelected:G}},[ee,J,a,G]);const P=r&&u?getSelectedItem(u,r.nodes,r.edges):void 0,de=reactExports.useCallback(Ee=>{isValidDatasetId(Ee)?(I(Ee),j()):console.error(`Cannot switch to invalid dataset: ${Ee}`)},[I,j]),Q=reactExports.useCallback(()=>{n(T)},[T,n]),ae=reactExports.useMemo(()=>r?filterGraphData(r,F):null,[r,F]),_e=reactExports.useMemo(()=>!r||!ae?null:getFilterStats(r,ae),[r,ae]),X=reactExports.useMemo(()=>r?getGraphDateRange(r):null,[r]),fe=reactExports.useMemo(()=>r?getNodeTypeCounts(r):null,[r]),we=reactExports.useMemo(()=>r?getRelationshipTypeCounts(r):null,[r]),Ge=reactExports.useMemo(()=>F.dateStart!==null||F.dateEnd!==null||F.nameFilter.trim()!==""||F.relationshipTypes!==null||F.nodeTypes!==null,[F]),[Le,Je]=reactExports.useState(""),Qe=reactExports.useMemo(()=>{if(!Le.trim()||!ae)return 0;const Ee=Le.toLowerCase();return ae.nodes.filter(Ve=>Ve.title.toLowerCase().includes(Ee)).length},[Le,ae]),et={dataset:t,graphData:r,filteredData:ae,currentDatasetId:(t==null?void 0:t.manifest.id)??null,loadingState:s,error:i,selection:u,selectedItem:P,selectNode:ee,selectEdge:J,clearSelection:me,isNodeSelected:R,isEdgeSelected:b,getNode:l,getEdge:p,getEdgesForNode:d,switchDataset:de,reloadDataset:Q,filters:F,setFilters:le,clearFilters:Z,filterStats:_e,dateRange:X,nodeTypeCounts:fe,relationshipTypeCounts:we,hasActiveFilters:Ge,searchTerm:Le,setSearchTerm:Je,searchMatchCount:Qe,currentLayout:A,setCurrentLayout:M};return jsxRuntimeExports.jsx(GraphContext.Provider,{value:et,children:e})}function useGraph(){const e=reactExports.useContext(GraphContext);if(!e)throw new Error("useGraph must be used within a GraphProvider");return e}function useGraphOptional(){return reactExports.useContext(GraphContext)}const THEME_URL_PARAM="theme",THEME_STORAGE_KEY="scenius-theme",DEFAULT_THEME="light",ThemeContext=reactExports.createContext(null);function parseTheme(e){return e==="light"||e==="dark"?e:null}function getInitialTheme(e){const t=parseTheme(e);if(t)return t;try{const r=localStorage.getItem(THEME_STORAGE_KEY),s=parseTheme(r);if(s)return s}catch{}return DEFAULT_THEME}function ThemeProvider({children:e}){const[t,r]=useSearchParams(),s=t.get(THEME_URL_PARAM),i=reactExports.useMemo(()=>getInitialTheme(s),[s]);reactExports.useEffect(()=>{document.documentElement.setAttribute("data-theme",i);try{localStorage.setItem(THEME_STORAGE_KEY,i)}catch{}},[i]);const n=reactExports.useCallback(d=>{r(u=>{const a=new URLSearchParams(u);return a.set(THEME_URL_PARAM,d),a},{replace:!0})},[r]),l=reactExports.useCallback(()=>{n(i==="light"?"dark":"light")},[i,n]),p=reactExports.useMemo(()=>({theme:i,toggleTheme:l,setTheme:n,isDark:i==="dark"}),[i,l,n]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:p,children:e})}function useTheme(){const e=reactExports.useContext(ThemeContext);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}function isPersonNode(e){return e.type==="person"}function isObjectNode(e){return e.type==="object"}function isLocationNode(e){return e.type==="location"}function isEntityNode(e){return e.type==="entity"}function hasEvidence(e){return!!(e.evidence||e.evidenceNodeId||e.evidenceUrl)}function getEdgeLabel(e){return e.label?e.label:e.relationship.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function hasActiveFilters(e){return e.dateStart!==null||e.dateEnd!==null||e.nameFilter.trim()!==""||e.relationshipTypes!==null||e.nodeTypes!==null}function useDebounce(e,t=300){const[r,s]=reactExports.useState(e);return reactExports.useEffect(()=>{const i=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(i)}},[e,t]),r}function useResourceParams(){const e=useParams();return reactExports.useMemo(()=>{const{datasetId:t,nodeId:r,sourceId:s,targetId:i}=e;return t?r?{type:"node",datasetId:t,nodeId:r}:s&&i?{type:"edge",datasetId:t,sourceId:s,targetId:i}:{type:"invalid",error:"Invalid route parameters"}:{type:"invalid",error:"Missing dataset ID"}},[e])}function buildGraphViewUrl(e,t,r){return`/${encodeURIComponent(e)}/explore?selected=${encodeURIComponent(r)}&type=${t}`}function buildFullNodeUrl(e,t){return`${window.location.origin}${window.location.pathname}#/${encodeURIComponent(e)}/node/${encodeURIComponent(t)}`}function buildFullEdgeUrl(e,t,r){return`${window.location.origin}${window.location.pathname}#/${encodeURIComponent(e)}/from/${encodeURIComponent(t)}/to/${encodeURIComponent(r)}`}function useMediaQuery(e){const[t,r]=reactExports.useState(()=>typeof window>"u"?!1:window.matchMedia(e).matches);return reactExports.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia(e);s.matches!==t&&r(s.matches);const i=n=>{r(n.matches)};return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}},[e,t]),t}const BREAKPOINTS={SM:"640px",MD:"768px"};function useIsMobile(){return useMediaQuery(`(max-width: ${BREAKPOINTS.SM})`)}function useIsTablet(){return useMediaQuery(`(max-width: ${BREAKPOINTS.MD})`)}var dist={},request={};/*! Axios v1.13.2 Copyright (c) 2025 Matt Zabriskie and contributors */var axios_1,hasRequiredAxios;function requireAxios(){if(hasRequiredAxios)return axios_1;hasRequiredAxios=1;function e(o,c){return function(){return o.apply(c,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:r}=Object,{iterator:s,toStringTag:i}=Symbol,n=(o=>c=>{const m=t.call(c);return o[m]||(o[m]=m.slice(8,-1).toLowerCase())})(Object.create(null)),l=o=>(o=o.toLowerCase(),c=>n(c)===o),p=o=>c=>typeof c===o,{isArray:d}=Array,u=p("undefined");function a(o){return o!==null&&!u(o)&&o.constructor!==null&&!u(o.constructor)&&b(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const h=l("ArrayBuffer");function j(o){let c;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?c=ArrayBuffer.isView(o):c=o&&o.buffer&&h(o.buffer),c}const R=p("string"),b=p("function"),C=p("number"),S=o=>o!==null&&typeof o=="object",I=o=>o===!0||o===!1,G=o=>{if(n(o)!=="object")return!1;const c=r(o);return(c===null||c===Object.prototype||Object.getPrototypeOf(c)===null)&&!(i in o)&&!(s in o)},U=o=>{if(!S(o)||a(o))return!1;try{return Object.keys(o).length===0&&Object.getPrototypeOf(o)===Object.prototype}catch{return!1}},D=l("Date"),q=l("File"),F=l("Blob"),le=l("FileList"),Z=o=>S(o)&&b(o.pipe),V=o=>{let c;return o&&(typeof FormData=="function"&&o instanceof FormData||b(o.append)&&((c=n(o))==="formdata"||c==="object"&&b(o.toString)&&o.toString()==="[object FormData]"))},K=l("URLSearchParams"),[A,M,T,ee]=["ReadableStream","Request","Response","Headers"].map(l),J=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function me(o,c,{allOwnKeys:m=!1}={}){if(o===null||typeof o>"u")return;let f,g;if(typeof o!="object"&&(o=[o]),d(o))for(f=0,g=o.length;f<g;f++)c.call(null,o[f],f,o);else{if(a(o))return;const w=m?Object.getOwnPropertyNames(o):Object.keys(o),v=w.length;let $;for(f=0;f<v;f++)$=w[f],c.call(null,o[$],$,o)}}function B(o,c){if(a(o))return null;c=c.toLowerCase();const m=Object.keys(o);let f=m.length,g;for(;f-- >0;)if(g=m[f],c===g.toLowerCase())return g;return null}const P=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,de=o=>!u(o)&&o!==P;function Q(){const{caseless:o,skipUndefined:c}=de(this)&&this||{},m={},f=(g,w)=>{const v=o&&B(m,w)||w;G(m[v])&&G(g)?m[v]=Q(m[v],g):G(g)?m[v]=Q({},g):d(g)?m[v]=g.slice():(!c||!u(g))&&(m[v]=g)};for(let g=0,w=arguments.length;g<w;g++)arguments[g]&&me(arguments[g],f);return m}const ae=(o,c,m,{allOwnKeys:f}={})=>(me(c,(g,w)=>{m&&b(g)?o[w]=e(g,m):o[w]=g},{allOwnKeys:f}),o),_e=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),X=(o,c,m,f)=>{o.prototype=Object.create(c.prototype,f),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:c.prototype}),m&&Object.assign(o.prototype,m)},fe=(o,c,m,f)=>{let g,w,v;const $={};if(c=c||{},o==null)return c;do{for(g=Object.getOwnPropertyNames(o),w=g.length;w-- >0;)v=g[w],(!f||f(v,o,c))&&!$[v]&&(c[v]=o[v],$[v]=!0);o=m!==!1&&r(o)}while(o&&(!m||m(o,c))&&o!==Object.prototype);return c},we=(o,c,m)=>{o=String(o),(m===void 0||m>o.length)&&(m=o.length),m-=c.length;const f=o.indexOf(c,m);return f!==-1&&f===m},Ge=o=>{if(!o)return null;if(d(o))return o;let c=o.length;if(!C(c))return null;const m=new Array(c);for(;c-- >0;)m[c]=o[c];return m},Le=(o=>c=>o&&c instanceof o)(typeof Uint8Array<"u"&&r(Uint8Array)),Je=(o,c)=>{const f=(o&&o[s]).call(o);let g;for(;(g=f.next())&&!g.done;){const w=g.value;c.call(o,w[0],w[1])}},Qe=(o,c)=>{let m;const f=[];for(;(m=o.exec(c))!==null;)f.push(m);return f},et=l("HTMLFormElement"),Ee=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(m,f,g){return f.toUpperCase()+g}),Ve=(({hasOwnProperty:o})=>(c,m)=>o.call(c,m))(Object.prototype),We=l("RegExp"),Be=(o,c)=>{const m=Object.getOwnPropertyDescriptors(o),f={};me(m,(g,w)=>{let v;(v=c(g,w,o))!==!1&&(f[w]=v||g)}),Object.defineProperties(o,f)},_t=o=>{Be(o,(c,m)=>{if(b(o)&&["arguments","caller","callee"].indexOf(m)!==-1)return!1;const f=o[m];if(b(f)){if(c.enumerable=!1,"writable"in c){c.writable=!1;return}c.set||(c.set=()=>{throw Error("Can not rewrite read-only method '"+m+"'")})}})},Rt=(o,c)=>{const m={},f=g=>{g.forEach(w=>{m[w]=!0})};return d(o)?f(o):f(String(o).split(c)),m},ut=()=>{},yt=(o,c)=>o!=null&&Number.isFinite(o=+o)?o:c;function dt(o){return!!(o&&b(o.append)&&o[i]==="FormData"&&o[s])}const tt=o=>{const c=new Array(10),m=(f,g)=>{if(S(f)){if(c.indexOf(f)>=0)return;if(a(f))return f;if(!("toJSON"in f)){c[g]=f;const w=d(f)?[]:{};return me(f,(v,$)=>{const te=m(v,g+1);!u(te)&&(w[$]=te)}),c[g]=void 0,w}}return f};return m(o,0)},rt=l("AsyncFunction"),bt=o=>o&&(S(o)||b(o))&&b(o.then)&&b(o.catch),xt=((o,c)=>o?setImmediate:c?((m,f)=>(P.addEventListener("message",({source:g,data:w})=>{g===P&&w===m&&f.length&&f.shift()()},!1),g=>{f.push(g),P.postMessage(m,"*")}))(`axios@${Math.random()}`,[]):m=>setTimeout(m))(typeof setImmediate=="function",b(P.postMessage)),vt=typeof queueMicrotask<"u"?queueMicrotask.bind(P):typeof process<"u"&&process.nextTick||xt;var N={isArray:d,isArrayBuffer:h,isBuffer:a,isFormData:V,isArrayBufferView:j,isString:R,isNumber:C,isBoolean:I,isObject:S,isPlainObject:G,isEmptyObject:U,isReadableStream:A,isRequest:M,isResponse:T,isHeaders:ee,isUndefined:u,isDate:D,isFile:q,isBlob:F,isRegExp:We,isFunction:b,isStream:Z,isURLSearchParams:K,isTypedArray:Le,isFileList:le,forEach:me,merge:Q,extend:ae,trim:J,stripBOM:_e,inherits:X,toFlatObject:fe,kindOf:n,kindOfTest:l,endsWith:we,toArray:Ge,forEachEntry:Je,matchAll:Qe,isHTMLForm:et,hasOwnProperty:Ve,hasOwnProp:Ve,reduceDescriptors:Be,freezeMethods:_t,toObjectSet:Rt,toCamelCase:Ee,noop:ut,toFiniteNumber:yt,findKey:B,global:P,isContextDefined:de,isSpecCompliantForm:dt,toJSONObject:tt,isAsyncFn:rt,isThenable:bt,setImmediate:xt,asap:vt,isIterable:o=>o!=null&&b(o[s])};function ue(o,c,m,f,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",c&&(this.code=c),m&&(this.config=m),f&&(this.request=f),g&&(this.response=g,this.status=g.status?g.status:null)}N.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.status}}});const re=ue.prototype,pe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{pe[o]={value:o}}),Object.defineProperties(ue,pe),Object.defineProperty(re,"isAxiosError",{value:!0}),ue.from=(o,c,m,f,g,w)=>{const v=Object.create(re);N.toFlatObject(o,v,function(O){return O!==Error.prototype},Y=>Y!=="isAxiosError");const $=o&&o.message?o.message:"Error",te=c==null&&o?o.code:c;return ue.call(v,$,te,m,f,g),o&&v.cause==null&&Object.defineProperty(v,"cause",{value:o,configurable:!0}),v.name=o&&o.name||"Error",w&&Object.assign(v,w),v};var be=null;function Ie(o){return N.isPlainObject(o)||N.isArray(o)}function De(o){return N.endsWith(o,"[]")?o.slice(0,-2):o}function ye(o,c,m){return o?o.concat(c).map(function(g,w){return g=De(g),!m&&w?"["+g+"]":g}).join(m?".":""):c}function He(o){return N.isArray(o)&&!o.some(Ie)}const Ye=N.toFlatObject(N,{},null,function(c){return/^is[A-Z]/.test(c)});function ze(o,c,m){if(!N.isObject(o))throw new TypeError("target must be an object");c=c||new FormData,m=N.toFlatObject(m,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ce,se){return!N.isUndefined(se[ce])});const f=m.metaTokens,g=m.visitor||O,w=m.dots,v=m.indexes,te=(m.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(c);if(!N.isFunction(g))throw new TypeError("visitor must be a function");function Y(W){if(W===null)return"";if(N.isDate(W))return W.toISOString();if(N.isBoolean(W))return W.toString();if(!te&&N.isBlob(W))throw new ue("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(W)||N.isTypedArray(W)?te&&typeof Blob=="function"?new Blob([W]):Buffer.from(W):W}function O(W,ce,se){let ve=W;if(W&&!se&&typeof W=="object"){if(N.endsWith(ce,"{}"))ce=f?ce:ce.slice(0,-2),W=JSON.stringify(W);else if(N.isArray(W)&&He(W)||(N.isFileList(W)||N.endsWith(ce,"[]"))&&(ve=N.toArray(W)))return ce=De(ce),ve.forEach(function(ke,Ae){!(N.isUndefined(ke)||ke===null)&&c.append(v===!0?ye([ce],Ae,w):v===null?ce:ce+"[]",Y(ke))}),!1}return Ie(W)?!0:(c.append(ye(se,ce,w),Y(W)),!1)}const ie=[],je=Object.assign(Ye,{defaultVisitor:O,convertValue:Y,isVisitable:Ie});function Te(W,ce){if(!N.isUndefined(W)){if(ie.indexOf(W)!==-1)throw Error("Circular reference detected in "+ce.join("."));ie.push(W),N.forEach(W,function(ve,Me){(!(N.isUndefined(ve)||ve===null)&&g.call(c,ve,N.isString(Me)?Me.trim():Me,ce,je))===!0&&Te(ve,ce?ce.concat(Me):[Me])}),ie.pop()}}if(!N.isObject(o))throw new TypeError("data must be an object");return Te(o),c}function Ne(o){const c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(f){return c[f]})}function Ue(o,c){this._pairs=[],o&&ze(o,this,c)}const wt=Ue.prototype;wt.append=function(c,m){this._pairs.push([c,m])},wt.toString=function(c){const m=c?function(f){return c.call(this,f,Ne)}:Ne;return this._pairs.map(function(g){return m(g[0])+"="+m(g[1])},"").join("&")};function ur(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Nt(o,c,m){if(!c)return o;const f=m&&m.encode||ur;N.isFunction(m)&&(m={serialize:m});const g=m&&m.serialize;let w;if(g?w=g(c,m):w=N.isURLSearchParams(c)?c.toString():new Ue(c,m).toString(f),w){const v=o.indexOf("#");v!==-1&&(o=o.slice(0,v)),o+=(o.indexOf("?")===-1?"?":"&")+w}return o}class dr{constructor(){this.handlers=[]}use(c,m,f){return this.handlers.push({fulfilled:c,rejected:m,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1}eject(c){this.handlers[c]&&(this.handlers[c]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(c){N.forEach(this.handlers,function(f){f!==null&&c(f)})}}var Ut=dr,Ft={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xr=typeof URLSearchParams<"u"?URLSearchParams:Ue,mr=typeof FormData<"u"?FormData:null,pr=typeof Blob<"u"?Blob:null,hr={isBrowser:!0,classes:{URLSearchParams:xr,FormData:mr,Blob:pr},protocols:["http","https","file","blob","url","data"]};const St=typeof window<"u"&&typeof document<"u",kt=typeof navigator=="object"&&navigator||void 0,fr=St&&(!kt||["ReactNative","NativeScript","NS"].indexOf(kt.product)<0),Er=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gr=St&&window.location.href||"http://localhost";var jr=Object.freeze({__proto__:null,hasBrowserEnv:St,hasStandardBrowserWebWorkerEnv:Er,hasStandardBrowserEnv:fr,navigator:kt,origin:gr}),Se={...jr,...hr};function _r(o,c){return ze(o,new Se.classes.URLSearchParams,{visitor:function(m,f,g,w){return Se.isNode&&N.isBuffer(m)?(this.append(f,m.toString("base64")),!1):w.defaultVisitor.apply(this,arguments)},...c})}function Rr(o){return N.matchAll(/\w+|\[(\w*)]/g,o).map(c=>c[0]==="[]"?"":c[1]||c[0])}function yr(o){const c={},m=Object.keys(o);let f;const g=m.length;let w;for(f=0;f<g;f++)w=m[f],c[w]=o[w];return c}function Bt(o){function c(m,f,g,w){let v=m[w++];if(v==="__proto__")return!0;const $=Number.isFinite(+v),te=w>=m.length;return v=!v&&N.isArray(g)?g.length:v,te?(N.hasOwnProp(g,v)?g[v]=[g[v],f]:g[v]=f,!$):((!g[v]||!N.isObject(g[v]))&&(g[v]=[]),c(m,f,g[v],w)&&N.isArray(g[v])&&(g[v]=yr(g[v])),!$)}if(N.isFormData(o)&&N.isFunction(o.entries)){const m={};return N.forEachEntry(o,(f,g)=>{c(Rr(f),g,m,0)}),m}return null}function br(o,c,m){if(N.isString(o))try{return(c||JSON.parse)(o),N.trim(o)}catch(f){if(f.name!=="SyntaxError")throw f}return(m||JSON.stringify)(o)}const Tt={transitional:Ft,adapter:["xhr","http","fetch"],transformRequest:[function(c,m){const f=m.getContentType()||"",g=f.indexOf("application/json")>-1,w=N.isObject(c);if(w&&N.isHTMLForm(c)&&(c=new FormData(c)),N.isFormData(c))return g?JSON.stringify(Bt(c)):c;if(N.isArrayBuffer(c)||N.isBuffer(c)||N.isStream(c)||N.isFile(c)||N.isBlob(c)||N.isReadableStream(c))return c;if(N.isArrayBufferView(c))return c.buffer;if(N.isURLSearchParams(c))return m.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),c.toString();let $;if(w){if(f.indexOf("application/x-www-form-urlencoded")>-1)return _r(c,this.formSerializer).toString();if(($=N.isFileList(c))||f.indexOf("multipart/form-data")>-1){const te=this.env&&this.env.FormData;return ze($?{"files[]":c}:c,te&&new te,this.formSerializer)}}return w||g?(m.setContentType("application/json",!1),br(c)):c}],transformResponse:[function(c){const m=this.transitional||Tt.transitional,f=m&&m.forcedJSONParsing,g=this.responseType==="json";if(N.isResponse(c)||N.isReadableStream(c))return c;if(c&&N.isString(c)&&(f&&!this.responseType||g)){const v=!(m&&m.silentJSONParsing)&&g;try{return JSON.parse(c,this.parseReviver)}catch($){if(v)throw $.name==="SyntaxError"?ue.from($,ue.ERR_BAD_RESPONSE,this,null,this.response):$}}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Se.classes.FormData,Blob:Se.classes.Blob},validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],o=>{Tt.headers[o]={}});var Ct=Tt;const vr=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var wr=o=>{const c={};let m,f,g;return o&&o.split(`
`).forEach(function(v){g=v.indexOf(":"),m=v.substring(0,g).trim().toLowerCase(),f=v.substring(g+1).trim(),!(!m||c[m]&&vr[m])&&(m==="set-cookie"?c[m]?c[m].push(f):c[m]=[f]:c[m]=c[m]?c[m]+", "+f:f)}),c};const Ht=Symbol("internals");function nt(o){return o&&String(o).trim().toLowerCase()}function mt(o){return o===!1||o==null?o:N.isArray(o)?o.map(mt):String(o)}function Nr(o){const c=Object.create(null),m=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let f;for(;f=m.exec(o);)c[f[1]]=f[2];return c}const Sr=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function At(o,c,m,f,g){if(N.isFunction(f))return f.call(this,c,m);if(g&&(c=m),!!N.isString(c)){if(N.isString(f))return c.indexOf(f)!==-1;if(N.isRegExp(f))return f.test(c)}}function kr(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(c,m,f)=>m.toUpperCase()+f)}function Tr(o,c){const m=N.toCamelCase(" "+c);["get","set","has"].forEach(f=>{Object.defineProperty(o,f+m,{value:function(g,w,v){return this[f].call(this,c,g,w,v)},configurable:!0})})}class pt{constructor(c){c&&this.set(c)}set(c,m,f){const g=this;function w($,te,Y){const O=nt(te);if(!O)throw new Error("header name must be a non-empty string");const ie=N.findKey(g,O);(!ie||g[ie]===void 0||Y===!0||Y===void 0&&g[ie]!==!1)&&(g[ie||te]=mt($))}const v=($,te)=>N.forEach($,(Y,O)=>w(Y,O,te));if(N.isPlainObject(c)||c instanceof this.constructor)v(c,m);else if(N.isString(c)&&(c=c.trim())&&!Sr(c))v(wr(c),m);else if(N.isObject(c)&&N.isIterable(c)){let $={},te,Y;for(const O of c){if(!N.isArray(O))throw TypeError("Object iterator must return a key-value pair");$[Y=O[0]]=(te=$[Y])?N.isArray(te)?[...te,O[1]]:[te,O[1]]:O[1]}v($,m)}else c!=null&&w(m,c,f);return this}get(c,m){if(c=nt(c),c){const f=N.findKey(this,c);if(f){const g=this[f];if(!m)return g;if(m===!0)return Nr(g);if(N.isFunction(m))return m.call(this,g,f);if(N.isRegExp(m))return m.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(c,m){if(c=nt(c),c){const f=N.findKey(this,c);return!!(f&&this[f]!==void 0&&(!m||At(this,this[f],f,m)))}return!1}delete(c,m){const f=this;let g=!1;function w(v){if(v=nt(v),v){const $=N.findKey(f,v);$&&(!m||At(f,f[$],$,m))&&(delete f[$],g=!0)}}return N.isArray(c)?c.forEach(w):w(c),g}clear(c){const m=Object.keys(this);let f=m.length,g=!1;for(;f--;){const w=m[f];(!c||At(this,this[w],w,c,!0))&&(delete this[w],g=!0)}return g}normalize(c){const m=this,f={};return N.forEach(this,(g,w)=>{const v=N.findKey(f,w);if(v){m[v]=mt(g),delete m[w];return}const $=c?kr(w):String(w).trim();$!==w&&delete m[w],m[$]=mt(g),f[$]=!0}),this}concat(...c){return this.constructor.concat(this,...c)}toJSON(c){const m=Object.create(null);return N.forEach(this,(f,g)=>{f!=null&&f!==!1&&(m[g]=c&&N.isArray(f)?f.join(", "):f)}),m}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([c,m])=>c+": "+m).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(c){return c instanceof this?c:new this(c)}static concat(c,...m){const f=new this(c);return m.forEach(g=>f.set(g)),f}static accessor(c){const f=(this[Ht]=this[Ht]={accessors:{}}).accessors,g=this.prototype;function w(v){const $=nt(v);f[$]||(Tr(g,v),f[$]=!0)}return N.isArray(c)?c.forEach(w):w(c),this}}pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),N.reduceDescriptors(pt.prototype,({value:o},c)=>{let m=c[0].toUpperCase()+c.slice(1);return{get:()=>o,set(f){this[m]=f}}}),N.freezeMethods(pt);var Pe=pt;function Pt(o,c){const m=this||Ct,f=c||m,g=Pe.from(f.headers);let w=f.data;return N.forEach(o,function($){w=$.call(m,w,g.normalize(),c?c.status:void 0)}),g.normalize(),w}function qt(o){return!!(o&&o.__CANCEL__)}function Xe(o,c,m){ue.call(this,o??"canceled",ue.ERR_CANCELED,c,m),this.name="CanceledError"}N.inherits(Xe,ue,{__CANCEL__:!0});function Ot(o,c,m){const f=m.config.validateStatus;!m.status||!f||f(m.status)?o(m):c(new ue("Request failed with status code "+m.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(m.status/100)-4],m.config,m.request,m))}function Cr(o){const c=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return c&&c[1]||""}function Lt(o,c){o=o||10;const m=new Array(o),f=new Array(o);let g=0,w=0,v;return c=c!==void 0?c:1e3,function(te){const Y=Date.now(),O=f[w];v||(v=Y),m[g]=te,f[g]=Y;let ie=w,je=0;for(;ie!==g;)je+=m[ie++],ie=ie%o;if(g=(g+1)%o,g===w&&(w=(w+1)%o),Y-v<c)return;const Te=O&&Y-O;return Te?Math.round(je*1e3/Te):void 0}}function Ar(o,c){let m=0,f=1e3/c,g,w;const v=(Y,O=Date.now())=>{m=O,g=null,w&&(clearTimeout(w),w=null),o(...Y)};return[(...Y)=>{const O=Date.now(),ie=O-m;ie>=f?v(Y,O):(g=Y,w||(w=setTimeout(()=>{w=null,v(g)},f-ie)))},()=>g&&v(g)]}const ht=(o,c,m=3)=>{let f=0;const g=Lt(50,250);return Ar(w=>{const v=w.loaded,$=w.lengthComputable?w.total:void 0,te=v-f,Y=g(te),O=v<=$;f=v;const ie={loaded:v,total:$,progress:$?v/$:void 0,bytes:te,rate:Y||void 0,estimated:Y&&$&&O?($-v)/Y:void 0,event:w,lengthComputable:$!=null,[c?"download":"upload"]:!0};o(ie)},m)},Gt=(o,c)=>{const m=o!=null;return[f=>c[0]({lengthComputable:m,total:o,loaded:f}),c[1]]},at=o=>(...c)=>N.asap(()=>o(...c));var ft=Se.hasStandardBrowserEnv?((o,c)=>m=>(m=new URL(m,Se.origin),o.protocol===m.protocol&&o.host===m.host&&(c||o.port===m.port)))(new URL(Se.origin),Se.navigator&&/(msie|trident)/i.test(Se.navigator.userAgent)):()=>!0,Et=Se.hasStandardBrowserEnv?{write(o,c,m,f,g,w,v){if(typeof document>"u")return;const $=[`${o}=${encodeURIComponent(c)}`];N.isNumber(m)&&$.push(`expires=${new Date(m).toUTCString()}`),N.isString(f)&&$.push(`path=${f}`),N.isString(g)&&$.push(`domain=${g}`),w===!0&&$.push("secure"),N.isString(v)&&$.push(`SameSite=${v}`),document.cookie=$.join("; ")},read(o){if(typeof document>"u")return null;const c=document.cookie.match(new RegExp("(?:^|; )"+o+"=([^;]*)"));return c?decodeURIComponent(c[1]):null},remove(o){this.write(o,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Pr(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function Lr(o,c){return c?o.replace(/\/?\/$/,"")+"/"+c.replace(/^\/+/,""):o}function It(o,c,m){let f=!Pr(c);return o&&(f||m==!1)?Lr(o,c):c}const Vt=o=>o instanceof Pe?{...o}:o;function Oe(o,c){c=c||{};const m={};function f(Y,O,ie,je){return N.isPlainObject(Y)&&N.isPlainObject(O)?N.merge.call({caseless:je},Y,O):N.isPlainObject(O)?N.merge({},O):N.isArray(O)?O.slice():O}function g(Y,O,ie,je){if(N.isUndefined(O)){if(!N.isUndefined(Y))return f(void 0,Y,ie,je)}else return f(Y,O,ie,je)}function w(Y,O){if(!N.isUndefined(O))return f(void 0,O)}function v(Y,O){if(N.isUndefined(O)){if(!N.isUndefined(Y))return f(void 0,Y)}else return f(void 0,O)}function $(Y,O,ie){if(ie in c)return f(Y,O);if(ie in o)return f(void 0,Y)}const te={url:w,method:w,data:w,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,withXSRFToken:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,beforeRedirect:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:$,headers:(Y,O,ie)=>g(Vt(Y),Vt(O),ie,!0)};return N.forEach(Object.keys({...o,...c}),function(O){const ie=te[O]||g,je=ie(o[O],c[O],O);N.isUndefined(je)&&ie!==$||(m[O]=je)}),m}var Wt=o=>{const c=Oe({},o);let{data:m,withXSRFToken:f,xsrfHeaderName:g,xsrfCookieName:w,headers:v,auth:$}=c;if(c.headers=v=Pe.from(v),c.url=Nt(It(c.baseURL,c.url,c.allowAbsoluteUrls),o.params,o.paramsSerializer),$&&v.set("Authorization","Basic "+btoa(($.username||"")+":"+($.password?unescape(encodeURIComponent($.password)):""))),N.isFormData(m)){if(Se.hasStandardBrowserEnv||Se.hasStandardBrowserWebWorkerEnv)v.setContentType(void 0);else if(N.isFunction(m.getHeaders)){const te=m.getHeaders(),Y=["content-type","content-length"];Object.entries(te).forEach(([O,ie])=>{Y.includes(O.toLowerCase())&&v.set(O,ie)})}}if(Se.hasStandardBrowserEnv&&(f&&N.isFunction(f)&&(f=f(c)),f||f!==!1&&ft(c.url))){const te=g&&w&&Et.read(w);te&&v.set(g,te)}return c},Ir=typeof XMLHttpRequest<"u"&&function(o){return new Promise(function(m,f){const g=Wt(o);let w=g.data;const v=Pe.from(g.headers).normalize();let{responseType:$,onUploadProgress:te,onDownloadProgress:Y}=g,O,ie,je,Te,W;function ce(){Te&&Te(),W&&W(),g.cancelToken&&g.cancelToken.unsubscribe(O),g.signal&&g.signal.removeEventListener("abort",O)}let se=new XMLHttpRequest;se.open(g.method.toUpperCase(),g.url,!0),se.timeout=g.timeout;function ve(){if(!se)return;const ke=Pe.from("getAllResponseHeaders"in se&&se.getAllResponseHeaders()),Fe={data:!$||$==="text"||$==="json"?se.responseText:se.response,status:se.status,statusText:se.statusText,headers:ke,config:o,request:se};Ot(function($e){m($e),ce()},function($e){f($e),ce()},Fe),se=null}"onloadend"in se?se.onloadend=ve:se.onreadystatechange=function(){!se||se.readyState!==4||se.status===0&&!(se.responseURL&&se.responseURL.indexOf("file:")===0)||setTimeout(ve)},se.onabort=function(){se&&(f(new ue("Request aborted",ue.ECONNABORTED,o,se)),se=null)},se.onerror=function(Ae){const Fe=Ae&&Ae.message?Ae.message:"Network Error",it=new ue(Fe,ue.ERR_NETWORK,o,se);it.event=Ae||null,f(it),se=null},se.ontimeout=function(){let Ae=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded";const Fe=g.transitional||Ft;g.timeoutErrorMessage&&(Ae=g.timeoutErrorMessage),f(new ue(Ae,Fe.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,o,se)),se=null},w===void 0&&v.setContentType(null),"setRequestHeader"in se&&N.forEach(v.toJSON(),function(Ae,Fe){se.setRequestHeader(Fe,Ae)}),N.isUndefined(g.withCredentials)||(se.withCredentials=!!g.withCredentials),$&&$!=="json"&&(se.responseType=g.responseType),Y&&([je,W]=ht(Y,!0),se.addEventListener("progress",je)),te&&se.upload&&([ie,Te]=ht(te),se.upload.addEventListener("progress",ie),se.upload.addEventListener("loadend",Te)),(g.cancelToken||g.signal)&&(O=ke=>{se&&(f(!ke||ke.type?new Xe(null,o,se):ke),se.abort(),se=null)},g.cancelToken&&g.cancelToken.subscribe(O),g.signal&&(g.signal.aborted?O():g.signal.addEventListener("abort",O)));const Me=Cr(g.url);if(Me&&Se.protocols.indexOf(Me)===-1){f(new ue("Unsupported protocol "+Me+":",ue.ERR_BAD_REQUEST,o));return}se.send(w||null)})},Yt=(o,c)=>{const{length:m}=o=o?o.filter(Boolean):[];if(c||m){let f=new AbortController,g;const w=function(Y){if(!g){g=!0,$();const O=Y instanceof Error?Y:this.reason;f.abort(O instanceof ue?O:new Xe(O instanceof Error?O.message:O))}};let v=c&&setTimeout(()=>{v=null,w(new ue(`timeout ${c} of ms exceeded`,ue.ETIMEDOUT))},c);const $=()=>{o&&(v&&clearTimeout(v),v=null,o.forEach(Y=>{Y.unsubscribe?Y.unsubscribe(w):Y.removeEventListener("abort",w)}),o=null)};o.forEach(Y=>Y.addEventListener("abort",w));const{signal:te}=f;return te.unsubscribe=()=>N.asap($),te}};const Dr=function*(o,c){let m=o.byteLength;if(m<c){yield o;return}let f=0,g;for(;f<m;)g=f+c,yield o.slice(f,g),f=g},Mr=async function*(o,c){for await(const m of zt(o))yield*Dr(m,c)},zt=async function*(o){if(o[Symbol.asyncIterator]){yield*o;return}const c=o.getReader();try{for(;;){const{done:m,value:f}=await c.read();if(m)break;yield f}}finally{await c.cancel()}},Xt=(o,c,m,f)=>{const g=Mr(o,c);let w=0,v,$=te=>{v||(v=!0,f&&f(te))};return new ReadableStream({async pull(te){try{const{done:Y,value:O}=await g.next();if(Y){$(),te.close();return}let ie=O.byteLength;if(m){let je=w+=ie;m(je)}te.enqueue(new Uint8Array(O))}catch(Y){throw $(Y),Y}},cancel(te){return $(te),g.return()}},{highWaterMark:2})},Kt=64*1024,{isFunction:ot}=N,Zt=(({Request:o,Response:c})=>({Request:o,Response:c}))(N.global),{ReadableStream:Jt,TextEncoder:Qt}=N.global,er=(o,...c)=>{try{return!!o(...c)}catch{return!1}},$r=o=>{o=N.merge.call({skipUndefined:!0},Zt,o);const{fetch:c,Request:m,Response:f}=o,g=c?ot(c):typeof fetch=="function",w=ot(m),v=ot(f);if(!g)return!1;const $=g&&ot(Jt),te=g&&(typeof Qt=="function"?(W=>ce=>W.encode(ce))(new Qt):async W=>new Uint8Array(await new m(W).arrayBuffer())),Y=w&&$&&er(()=>{let W=!1;const ce=new m(Se.origin,{body:new Jt,method:"POST",get duplex(){return W=!0,"half"}}).headers.has("Content-Type");return W&&!ce}),O=v&&$&&er(()=>N.isReadableStream(new f("").body)),ie={stream:O&&(W=>W.body)};g&&["text","arrayBuffer","blob","formData","stream"].forEach(W=>{!ie[W]&&(ie[W]=(ce,se)=>{let ve=ce&&ce[W];if(ve)return ve.call(ce);throw new ue(`Response type '${W}' is not supported`,ue.ERR_NOT_SUPPORT,se)})});const je=async W=>{if(W==null)return 0;if(N.isBlob(W))return W.size;if(N.isSpecCompliantForm(W))return(await new m(Se.origin,{method:"POST",body:W}).arrayBuffer()).byteLength;if(N.isArrayBufferView(W)||N.isArrayBuffer(W))return W.byteLength;if(N.isURLSearchParams(W)&&(W=W+""),N.isString(W))return(await te(W)).byteLength},Te=async(W,ce)=>{const se=N.toFiniteNumber(W.getContentLength());return se??je(ce)};return async W=>{let{url:ce,method:se,data:ve,signal:Me,cancelToken:ke,timeout:Ae,onDownloadProgress:Fe,onUploadProgress:it,responseType:$e,headers:qr,withCredentials:ir="same-origin",fetchOptions:Yr}=Wt(W),zr=c||fetch;$e=$e?($e+"").toLowerCase():"text";let lr=Yt([Me,ke&&ke.toAbortSignal()],Ae),$t=null;const lt=lr&&lr.unsubscribe&&(()=>{lr.unsubscribe()});let Xr;try{if(it&&Y&&se!=="get"&&se!=="head"&&(Xr=await Te(qr,ve))!==0){let Ze=new m(ce,{method:"POST",body:ve,duplex:"half"}),jt;if(N.isFormData(ve)&&(jt=Ze.headers.get("content-type"))&&qr.setContentType(jt),Ze.body){const[Or,cr]=Gt(Xr,ht(at(it)));ve=Xt(Ze.body,Kt,Or,cr)}}N.isString(ir)||(ir=ir?"include":"omit");const qe=w&&"credentials"in m.prototype,Kr={...Yr,signal:lr,method:se.toUpperCase(),headers:qr.normalize().toJSON(),body:ve,duplex:"half",credentials:qe?ir:void 0};$t=w&&new m(ce,Kr);let Ke=await(w?zr($t,Yr):zr(ce,Kr));const Zr=O&&($e==="stream"||$e==="response");if(O&&(Fe||Zr&&lt)){const Ze={};["status","statusText","headers"].forEach(Jr=>{Ze[Jr]=Ke[Jr]});const jt=N.toFiniteNumber(Ke.headers.get("content-length")),[Or,cr]=Fe&&Gt(jt,ht(at(Fe),!0))||[];Ke=new f(Xt(Ke.body,Kt,Or,()=>{cr&&cr(),lt&&lt()}),Ze)}$e=$e||"text";let Qr=await ie[N.findKey(ie,$e)||"text"](Ke,W);return!Zr&&lt&&lt(),await new Promise((Ze,jt)=>{Ot(Ze,jt,{data:Qr,headers:Pe.from(Ke.headers),status:Ke.status,statusText:Ke.statusText,config:W,request:$t})})}catch(qe){throw lt&&lt(),qe&&qe.name==="TypeError"&&/Load failed|fetch/i.test(qe.message)?Object.assign(new ue("Network Error",ue.ERR_NETWORK,W,$t),{cause:qe.cause||qe}):ue.from(qe,qe&&qe.code,W,$t)}}},Ur=new Map,tr=o=>{let c=o&&o.env||{};const{fetch:m,Request:f,Response:g}=c,w=[f,g,m];let v=w.length,$=v,te,Y,O=Ur;for(;$--;)te=w[$],Y=O.get(te),Y===void 0&&O.set(te,Y=$?new Map:$r(c)),O=Y;return Y};tr();const Dt={http:be,xhr:Ir,fetch:{get:tr}};N.forEach(Dt,(o,c)=>{if(o){try{Object.defineProperty(o,"name",{value:c})}catch{}Object.defineProperty(o,"adapterName",{value:c})}});const rr=o=>`- ${o}`,Fr=o=>N.isFunction(o)||o===null||o===!1;function Br(o,c){o=N.isArray(o)?o:[o];const{length:m}=o;let f,g;const w={};for(let v=0;v<m;v++){f=o[v];let $;if(g=f,!Fr(f)&&(g=Dt[($=String(f)).toLowerCase()],g===void 0))throw new ue(`Unknown adapter '${$}'`);if(g&&(N.isFunction(g)||(g=g.get(c))))break;w[$||"#"+v]=g}if(!g){const v=Object.entries(w).map(([te,Y])=>`adapter ${te} `+(Y===!1?"is not supported by the environment":"is not available in the build"));let $=m?v.length>1?`since :
`+v.map(rr).join(`
`):" "+rr(v[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+$,"ERR_NOT_SUPPORT")}return g}var sr={getAdapter:Br,adapters:Dt};function Mt(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new Xe(null,o)}function nr(o){return Mt(o),o.headers=Pe.from(o.headers),o.data=Pt.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),sr.getAdapter(o.adapter||Ct.adapter,o)(o).then(function(f){return Mt(o),f.data=Pt.call(o,o.transformResponse,f),f.headers=Pe.from(f.headers),f},function(f){return qt(f)||(Mt(o),f&&f.response&&(f.response.data=Pt.call(o,o.transformResponse,f.response),f.response.headers=Pe.from(f.response.headers))),Promise.reject(f)})}const ar="1.13.2",gt={};["object","boolean","number","function","string","symbol"].forEach((o,c)=>{gt[o]=function(f){return typeof f===o||"a"+(c<1?"n ":" ")+o}});const or={};gt.transitional=function(c,m,f){function g(w,v){return"[Axios v"+ar+"] Transitional option '"+w+"'"+v+(f?". "+f:"")}return(w,v,$)=>{if(c===!1)throw new ue(g(v," has been removed"+(m?" in "+m:"")),ue.ERR_DEPRECATED);return m&&!or[v]&&(or[v]=!0,console.warn(g(v," has been deprecated since v"+m+" and will be removed in the near future"))),c?c(w,v,$):!0}},gt.spelling=function(c){return(m,f)=>(console.warn(`${f} is likely a misspelling of ${c}`),!0)};function Hr(o,c,m){if(typeof o!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const f=Object.keys(o);let g=f.length;for(;g-- >0;){const w=f[g],v=c[w];if(v){const $=o[w],te=$===void 0||v($,w,o);if(te!==!0)throw new ue("option "+w+" must be "+te,ue.ERR_BAD_OPTION_VALUE);continue}if(m!==!0)throw new ue("Unknown option "+w,ue.ERR_BAD_OPTION)}}var E={assertOptions:Hr,validators:gt};const _=E.validators;class k{constructor(c){this.defaults=c||{},this.interceptors={request:new Ut,response:new Ut}}async request(c,m){try{return await this._request(c,m)}catch(f){if(f instanceof Error){let g={};Error.captureStackTrace?Error.captureStackTrace(g):g=new Error;const w=g.stack?g.stack.replace(/^.+\n/,""):"";try{f.stack?w&&!String(f.stack).endsWith(w.replace(/^.+\n.+\n/,""))&&(f.stack+=`
`+w):f.stack=w}catch{}}throw f}}_request(c,m){typeof c=="string"?(m=m||{},m.url=c):m=c||{},m=Oe(this.defaults,m);const{transitional:f,paramsSerializer:g,headers:w}=m;f!==void 0&&E.assertOptions(f,{silentJSONParsing:_.transitional(_.boolean),forcedJSONParsing:_.transitional(_.boolean),clarifyTimeoutError:_.transitional(_.boolean)},!1),g!=null&&(N.isFunction(g)?m.paramsSerializer={serialize:g}:E.assertOptions(g,{encode:_.function,serialize:_.function},!0)),m.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?m.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:m.allowAbsoluteUrls=!0),E.assertOptions(m,{baseUrl:_.spelling("baseURL"),withXsrfToken:_.spelling("withXSRFToken")},!0),m.method=(m.method||this.defaults.method||"get").toLowerCase();let v=w&&N.merge(w.common,w[m.method]);w&&N.forEach(["delete","get","head","post","put","patch","common"],W=>{delete w[W]}),m.headers=Pe.concat(v,w);const $=[];let te=!0;this.interceptors.request.forEach(function(ce){typeof ce.runWhen=="function"&&ce.runWhen(m)===!1||(te=te&&ce.synchronous,$.unshift(ce.fulfilled,ce.rejected))});const Y=[];this.interceptors.response.forEach(function(ce){Y.push(ce.fulfilled,ce.rejected)});let O,ie=0,je;if(!te){const W=[nr.bind(this),void 0];for(W.unshift(...$),W.push(...Y),je=W.length,O=Promise.resolve(m);ie<je;)O=O.then(W[ie++],W[ie++]);return O}je=$.length;let Te=m;for(;ie<je;){const W=$[ie++],ce=$[ie++];try{Te=W(Te)}catch(se){ce.call(this,se);break}}try{O=nr.call(this,Te)}catch(W){return Promise.reject(W)}for(ie=0,je=Y.length;ie<je;)O=O.then(Y[ie++],Y[ie++]);return O}getUri(c){c=Oe(this.defaults,c);const m=It(c.baseURL,c.url,c.allowAbsoluteUrls);return Nt(m,c.params,c.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(c){k.prototype[c]=function(m,f){return this.request(Oe(f||{},{method:c,url:m,data:(f||{}).data}))}}),N.forEach(["post","put","patch"],function(c){function m(f){return function(w,v,$){return this.request(Oe($||{},{method:c,headers:f?{"Content-Type":"multipart/form-data"}:{},url:w,data:v}))}}k.prototype[c]=m(),k.prototype[c+"Form"]=m(!0)});var L=k;class H{constructor(c){if(typeof c!="function")throw new TypeError("executor must be a function.");let m;this.promise=new Promise(function(w){m=w});const f=this;this.promise.then(g=>{if(!f._listeners)return;let w=f._listeners.length;for(;w-- >0;)f._listeners[w](g);f._listeners=null}),this.promise.then=g=>{let w;const v=new Promise($=>{f.subscribe($),w=$}).then(g);return v.cancel=function(){f.unsubscribe(w)},v},c(function(w,v,$){f.reason||(f.reason=new Xe(w,v,$),m(f.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(c){if(this.reason){c(this.reason);return}this._listeners?this._listeners.push(c):this._listeners=[c]}unsubscribe(c){if(!this._listeners)return;const m=this._listeners.indexOf(c);m!==-1&&this._listeners.splice(m,1)}toAbortSignal(){const c=new AbortController,m=f=>{c.abort(f)};return this.subscribe(m),c.signal.unsubscribe=()=>this.unsubscribe(m),c.signal}static source(){let c;return{token:new H(function(g){c=g}),cancel:c}}}var z=H;function oe(o){return function(m){return o.apply(null,m)}}function xe(o){return N.isObject(o)&&o.isAxiosError===!0}const ge={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ge).forEach(([o,c])=>{ge[c]=o});var Re=ge;function Ce(o){const c=new L(o),m=e(L.prototype.request,c);return N.extend(m,L.prototype,c,{allOwnKeys:!0}),N.extend(m,c,null,{allOwnKeys:!0}),m.create=function(g){return Ce(Oe(o,g))},m}const he=Ce(Ct);return he.Axios=L,he.CanceledError=Xe,he.CancelToken=z,he.isCancel=qt,he.VERSION=ar,he.toFormData=ze,he.AxiosError=ue,he.Cancel=he.CanceledError,he.all=function(c){return Promise.all(c)},he.spread=oe,he.isAxiosError=xe,he.mergeConfig=Oe,he.AxiosHeaders=Pe,he.formToJSON=o=>Bt(N.isHTMLForm(o)?new FormData(o):o),he.getAdapter=sr.getAdapter,he.HttpStatusCode=Re,he.default=he,axios_1=he,axios_1}var errors={},hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1,Object.defineProperty(errors,"__esModule",{value:!0}),errors.citationError=errors.pdfError=errors.fcError=errors.eventsError=errors.mediaError=errors.relatedError=errors.introError=errors.preloadError=errors.infoboxError=errors.coordinatesError=errors.geoSearchError=errors.linksError=errors.categoriesError=errors.contentError=errors.htmlError=errors.imageError=errors.summaryError=errors.pageError=errors.autocompletionsError=errors.searchError=errors.wikiError=void 0;class e extends Error{constructor(le,Z){super(le);ne(this,"code");this.name="wikiError",this.code=Z}}errors.wikiError=e;class t extends e{constructor(F){super(F),this.name="searchError"}}errors.searchError=t;class r extends e{constructor(F){super(F),this.name="autocompletionsError"}}errors.autocompletionsError=r;class s extends e{constructor(F){super(F),this.name="pageError"}}errors.pageError=s;class i extends e{constructor(F){super(F),this.name="summaryError"}}errors.summaryError=i;class n extends e{constructor(F){super(F),this.name="imageError"}}errors.imageError=n;class l extends e{constructor(F){super(F),this.name="htmlError"}}errors.htmlError=l;class p extends e{constructor(F){super(F),this.name="contentError"}}errors.contentError=p;class d extends e{constructor(F){super(F),this.name="categoriesError"}}errors.categoriesError=d;class u extends e{constructor(F){super(F),this.name="linksError"}}errors.linksError=u;class a extends e{constructor(F){super(F),this.name="geoSearchError"}}errors.geoSearchError=a;class h extends e{constructor(F){super(F),this.name="coordinatesError"}}errors.coordinatesError=h;class j extends e{constructor(F){super(F),this.name="infoboxError"}}errors.infoboxError=j;class R extends e{constructor(F){super(F),this.name="preloadError"}}errors.preloadError=R;class b extends e{constructor(F){super(F),this.name="introError"}}errors.introError=b;class C extends e{constructor(F){super(F),this.name="relatedError"}}errors.relatedError=C;class S extends e{constructor(F){super(F),this.name="mediaError"}}errors.mediaError=S;class I extends e{constructor(F){super(F),this.name="eventsError"}}errors.eventsError=I;class G extends e{constructor(F){super(F),this.name="featuredContentError"}}errors.fcError=G;class U extends e{constructor(F){super(F),this.name="pdfError"}}errors.pdfError=U;class D extends e{constructor(F){super(F),this.name="citationError"}}return errors.citationError=D,errors}var hasRequiredRequest;function requireRequest(){if(hasRequiredRequest)return request;hasRequiredRequest=1,Object.defineProperty(request,"__esModule",{value:!0}),request.setUserAgent=request.setAPIUrl=request.returnRestUrl=request.makeRestRequest=void 0;const e=requireAxios(),t=requireErrors();let r="https://en.wikipedia.org/w/api.php?",s="https://en.wikipedia.org/api/rest_v1/",i="wikipedia (https://github.com/dopecodez/Wikipedia/)";async function n(h){const j={headers:{"Api-User-Agent":i}};try{const{data:R}=await e.default.get(h,j);return R}catch(R){throw new t.wikiError(R)}}async function l(h,j=!0){const R={...h};R.format="json",j&&(R.redirects=""),h.action||(R.action="query"),R.origin="*";let b="";return Object.keys(R).forEach(C=>{b+=`${C}=${R[C]}&`}),await n(encodeURI(r+b))}async function p(h,j=!0){return j||(h+="?redirect=false"),await n(encodeURI(s+h))}request.makeRestRequest=p;function d(h){return encodeURI(s+h)}request.returnRestUrl=d;function u(h){return r="https://"+h.toLowerCase()+".wikipedia.org/w/api.php?",s="https://"+h.toLowerCase()+".wikipedia.org/api/rest_v1/",r}request.setAPIUrl=u;function a(h){i=h}return request.setUserAgent=a,request.default=l,request}var page={},utils={},messages={},hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,Object.defineProperty(messages,"__esModule",{value:!0}),messages.MSGS=void 0,messages.MSGS={PAGE_NOT_SUGGEST:"No page with given title suggested : ",PAGE_NOT_EXIST:"No page with given title exists : ",INFOBOX_NOT_EXIST:"Info cannot be parsed for given page",INVALID_WIKIPEDIA_URL:"The provided URL is invalid or does not belong to Wikipedia - "}),messages}var hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.getCurrentDay=utils.getCurrentMonth=utils.getCurrentYear=utils.setPageId=utils.setPageIdOrTitleParam=utils.setTitleForPage=utils.isString=void 0;const e=requireDist(),t=requireErrors(),r=requireMessages();function s(a){return isNaN(a)}utils.isString=s;async function i(a,h){{if(h!=null&&h.url){const R=a.match(new RegExp("(?<=\\/wiki\\/)[^/?#]+"));if(!R)throw new t.pageError(`${r.MSGS.INVALID_WIKIPEDIA_URL}${a}`);return a=R[0],a}const j=await e.default.search(a,{limit:1,suggestion:!0});if(!j.suggestion&&j.results.length==0)throw new t.pageError(`${r.MSGS.PAGE_NOT_SUGGEST}${a}`);return a=j.suggestion||a,a}}utils.setTitleForPage=i;function n(a,h){return s(h)?a.titles=h:a.pageids=h,a}utils.setPageIdOrTitleParam=n;function l(a,h){let j;return a.pageIds?j=a.pageIds:j=Object.keys(h.query.pages)[0],j}utils.setPageId=l;function p(){return new Date().getFullYear()}utils.getCurrentYear=p;function d(){return new Date().getMonth()+1}utils.getCurrentMonth=d;function u(){return new Date().getDate()}return utils.getCurrentDay=u,utils}var camelcase,hasRequiredCamelcase;function requireCamelcase(){if(hasRequiredCamelcase)return camelcase;hasRequiredCamelcase=1;function e(t){let r=!1,s=!1,i=!1;for(let n=0;n<t.length;n++){const l=t[n];r&&/[a-zA-Z]/.test(l)&&l.toUpperCase()===l?(t=t.substr(0,n)+"-"+t.substr(n),r=!1,i=s,s=!0,n++):s&&i&&/[a-zA-Z]/.test(l)&&l.toLowerCase()===l?(t=t.substr(0,n-1)+"-"+t.substr(n-1),i=s,s=!1,r=!0):(r=l.toLowerCase()===l,i=s,s=l.toUpperCase()===l)}return t}return camelcase=function(t){return arguments.length>1?t=Array.from(arguments).map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0?"":t.length===1?t.toLowerCase():/^[a-z0-9]+$/.test(t)?t:(t!==t.toLowerCase()&&(t=e(t)),t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(s,i)=>i.toUpperCase()))},camelcase}var bundle_min,hasRequiredBundle_min;function requireBundle_min(){if(hasRequiredBundle_min)return bundle_min;hasRequiredBundle_min=1;function e(E){return E&&typeof E=="object"&&"default"in E?E.default:E}function t(E){return E.replace(/\[\[/g,"").replace(/\]\]/g,"").replace(/\{\{/g,"").replace(/\}\}/g,"").trim()}function r(E){var _=E.indexOf("|");return _!==-1?E.substring(0,_):E}function s(E,_){if(!E)return null;var k=E.trim().replace(/File:/,"").replace(/\{\{\d+\}\}/g,"").replace(Qe,"").replace(et,"");if(k==="y"||k==="yes")return!0;if(_=="birthPlace")return E.trim();var L=k.match(Ee);return L?L[0].split(Ve).filter(function(H){return H}):r(t(k))}function i(E){var _=E.globalPattern,k=E.parsePattern,L=E.parse,H=E.variable,z=E.name;return function(oe){var xe=oe.match(_);if(!xe){var ge;return ge={},ee(ge,z,[]),ee(ge,"sourceAfter",oe),ge}var Re=xe.map(function(he){return L(he.match(k))}),Ce=xe.reduce(function(he,o,c){return Re[c]===Nt?he:he.replace(o,"$"+H+"_"+c)},oe);return{data:ee({},z,Re),sourceAfter:Ce}}}function n(E,_){var k=E.source,L=E.context,H=_(k),z=H.data,oe=H.sourceAfter;return{context:Object.assign({},L,z),source:oe}}function l(E){return Lt.map(function(_){return _.handler}).reduce(n,{context:{},source:E})}function p(E){var _=E.match(Ar);return _?_.map(function(k){var L=ht.exec(k);if(!L)return null;var H=J(L,3),z=H[1],oe=H[2],xe=M(z.trim());return{key:xe,value:s(oe,xe)}}).filter(function(k){return k}):[]}function d(E,_){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=k.simplifyDataValues;if(typeof E!="string")return console.log("Warning: Something went wrong. Could not fill variables in: ("+(E===void 0?"undefined":T(E))+") "+JSON.stringify(E)),{};var H=Lt.find(function(Ce){return E.match(Ce.pattern)});if(H){var z=H.pattern.exec(E),oe=J(z,2),xe=oe[0],ge=oe[1],Re=_[H.name][parseInt(ge,10)];return L||typeof Re!="string"?Re:E.replace(xe,Re)}return E}function u(E,_,k){if(E===void 0||E instanceof Date||typeof E=="number")return E;if(Array.isArray(E))return E.map(function(H){return u(H,_,k)});if((E===void 0?"undefined":T(E))==="object")return Object.keys(E).reduce(function(H,z){return Object.assign(H,ee({},z,u(E[z],_,k)))},{});var L=d(E,_,k);return L===E?E:u(L,_,k)}function a(E,_,k){var L=k.simplifyDataValues;if(typeof E=="string"&&E.match(Et.pattern)){var H=E.replace(Et.pattern,"").replace(/,/,"").trim(),z=Et.pattern.exec(E),oe=J(z,2),xe=oe[1],ge=_[Et.name][parseInt(xe,10)],Re={primary:h(H,_,{simplifyDataValues:L}),secondary:h(ge,_,{simplifyDataValues:L})};return L?Re.primary:Re}return null}function h(E,_){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=k.simplifyDataValues,H=a(E,_,{simplifyDataValues:L});return H||u(E,_,{simplifyDataValues:L})}function j(E,_,k,L){if(_===null)return null;if(typeof _=="boolean")return _;if(Array.isArray(_))return _.map(function(xe){return h(xe,k,L)});if(E.match(/areaTotal/)||E.match(/population/)){var H=Gt(_);if(H===!1&&(H=parseFloat(_,10)),!isNaN(H))return H}if(E.match(/date/i)){var z=+new Date(_);if(!isNaN(z))return new Date(_)}var oe=h(_,k,L);return Array.isArray(oe)?oe.map(function(xe){return h(xe,k,L)}):oe}function R(E,_){return function(k,L){var H=L.key,z=L.value,oe=j(H,z,E,_);return oe===""||oe===null?k:Object.assign({},k,ee({},H,oe))}}function b(E){var _=E.source,k=E.context,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=L.simplifyDataValues,z=H===void 0||H;return p(_).reduce(R(k,{simplifyDataValues:z}),{})}function C(E){return Object.keys(E).reduce(function(_,k){var L=E[k],H=k.match(Pr);if(H){var z=H[1]||"",oe=E["blank"+z+"NameSec2"],xe=E["blank"+z+"InfoSec2"];return typeof oe!="string"?_:Object.assign(_,ee({},M(oe),xe))}return k.match(Lr)?_:Object.assign(_,ee({},k,L))},{})}function S(E){for(var _=[],k=0;k<E.length-1;k++){var L=E.substr(k,2);if(L!=="{{"){if(L==="}}"){if(_.pop(),_.length===0)return k+2;k++}}else _.push(k),k++}}function I(E){var _=E.match(It);if(!_)return{data:E,sourceLeft:null};var k=_.index,L=E.substring(k),H=S(L);if(!H)return{data:E,sourceLeft:null};var z=L.substring(0,H),oe=E.substring(H);return{data:z,sourceLeft:oe.match(It)?oe:null}}function G(E){for(var _=I(E),k=[_.data];_.sourceLeft;)_=I(_.sourceLeft),k.push(_.data);return k}function U(E){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=_.removeSmall,L=k!==void 0&&k,H=_.removeReferences;return(H===void 0||H)&&(E=E.replace(/<ref(\s\w+=[^>]+)?>.*<\/ref>/g,"").replace(/<ref(\s\w+=[^>]+)?\s?\/>/g,"")),L&&(E=E.replace(/<small>.*<\/small>/g,"")),E.replace(/'''?/g,"").replace(/\|display=inline/g,"").replace(/<br\s?\/?>/g,",").replace(/&minus;/g,"-").replace(/{{Sndash}}/g,"‚Äì").replace(/<sup>/g,"^").replace(/\{\{sfn\|([^\}\}]+)\}\}/g,"").replace(/\{\{efn\|([^\}\}]+)\}\}/g,"").replace(/‚àí/g,"-").replace(/<\/sup>/g,"").replace(/\{\{\s*nowrap\s*\|([^\n\}]+)\}\}/gi,"$1").replace(/\{\{\s*Avoid\swrap\s*\|([^\n\}]+)\}\}/gi,"$1").replace(/<!--([\s\S]*?)-->/g,"").replace(/&nbsp;/g," ").replace("|''See list''","")}function D(E){return E.map(Zt).reduce(function(_,k,L){for(var H=L===0?0:1,z=0;z<k.length;z++)_[z+H]||(_[z+H]={}),k[z]&&(_[z+H][k[z]]=1);return _},[]).map(function(_){return Object.keys(_).join(",")}).join(" || ")}function q(E){return E.substring(2,E.length-2).replace(rr,function(_,k){return k.split("|")[0]}).replace(/'''?/g,"")}function F(E){var _=E[0].match(/BS(\d)/),k=E[0].substring(2),L=1,H=[],z=1;for(_&&(L=_[1],k=E[0].substring(3));z<=L;z++)H.push(E[z]);return{type:k,margin:E[z++],text1:E[z++],text2:E[z++],comment:E[z++],icons:H}}function le(E,_){for(var k=void 0,L=[];(k=_.exec(E))!==null;)L.push({value:k[1]&&k[1].trim(),start:k.index,end:k.index+k[0].length});return L}function Z(E){var _=E.match(gt);return _?_.map(function(k){var L=k.match(or);return J(L,2)[1].trim().split("|").slice(1)}):[]}function V(E){var _=le(E,nr),k=le(E,ar);return _.map(function(L,H){var z=k[H];if(!z)throw new Error("[Table Parsing] Failed to pair table");return{rows:Z(E.substring(L.end,z.start).trim().replace(/'''/g,"")),start:L.start,end:z.end}})}function K(E){return E.length?E[E.length-1]:void 0}function A(E,_){var k=G(E).map(function(H){return C(b(l(U(H,_)),_))});if(!k.length)return{};var L={general:k.shift()};return k.forEach(function(H){var z=H.type;z?L[M(z)]=H:Object.assign(L,{general:Object.assign({},L.general,H)})}),L.tables=Dt(E),L.bsTables=Br(E),L.lists=Hr(E),L}var M=e(requireCamelcase()),T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},ee=function(E,_,k){return _ in E?Object.defineProperty(E,_,{value:k,enumerable:!0,configurable:!0,writable:!0}):E[_]=k,E},J=(function(){function E(_,k){var L=[],H=!0,z=!1,oe=void 0;try{for(var xe,ge=_[Symbol.iterator]();!(H=(xe=ge.next()).done)&&(L.push(xe.value),!k||L.length!==k);H=!0);}catch(Re){z=!0,oe=Re}finally{try{!H&&ge.return&&ge.return()}finally{if(z)throw oe}}return L}return function(_,k){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return E(_,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),me=function(E){if(Array.isArray(E)){for(var _=0,k=Array(E.length);_<E.length;_++)k[_]=E[_];return k}return Array.from(E)},B=/\{\{small\|([^\}\}]+)\}\}/g,P=/small\|([^\}\}]+)\}\}/,de={globalPattern:B,parsePattern:P,parse:function(E){return J(E,2)[1]},variable:"SMALL",name:"smalls"},Q=/\{\{flag\|([^\}\}]+)\}\}/g,ae=/flag\|([^\}\}]+)\}\}/,_e={globalPattern:Q,parsePattern:ae,parse:function(E){return J(E,2)[1]},variable:"FLAG",name:"flags"},X=/\{\{coord\|([^\}\}]+)\}\}/g,fe=/coord\|([^\}\}]+)\}\}/,we={globalPattern:X,parsePattern:fe,parse:function(E){return J(E,2)[1]},variable:"COORD",name:"coords"},Ge=/\[\[([^\]\|]+)\|?([^\]]+)?\]\]/g,Le=/\[\[([^\]\|]+)\|?([^\]]+)?\]\]/,Je={globalPattern:Ge,parsePattern:Le,parse:function(E){var _=J(E,3),k=_[1],L=_[2];return k||L},variable:"INSTANCE",name:"instances"},Qe=/\n?\s?\|\s?\w+$/,et=/\n\}\}$/,Ee=/((\$\w+_\d+)\s*,?\s*){2,}/g,Ve=/[,\s?]/g,We=/^\|\s?/,Be=/\{\{(?:unbulleted list|ubl|ubt|ublist|unbullet)\s?\|([^\}\}]+)\}\}/gi,_t=/\|\s*([^|}]+)/g,Rt={globalPattern:Be,parsePattern:_t,parse:function(E){return E?E.map(function(_){return _.replace(We,"").trim()}).filter(function(_){return _&&_.length}):[]},variable:"UNBULLETED_LIST",name:"unbulletedLists"},ut=/^\*\s*/,yt=/\n(\*\s*[^*|]+)+/g,dt=/\*\s*([^*|]+)/g,tt={globalPattern:yt,parsePattern:dt,parse:function(E){return E?E.map(function(_){return _.replace(ut,"").trim()}).filter(function(_){return _&&_.length}):[]},variable:"UNMARKED_LIST",name:"unmarkedLists"},rt=/^\*\s?/,bt=/\{\{f?p?P?l?a?i?n?t?\s?list\s?\|([^\}\}]+)\}\}/g,xt=/\*\s*([^*}]+)/g,vt={globalPattern:bt,parsePattern:xt,parse:function(E){return E?E.map(function(_){return _.replace(rt,"").trim()}).filter(function(_){return _&&_.length}):[]},variable:"PLAIN_LIST",name:"plainLists"},st=/\{\{Marriage\|([^\}\}]+)\}\}/gi,N=/Marriage\|([^|]+)\|([^|]*)(.*)\}\}/i,ue={globalPattern:st,parsePattern:N,parse:function(E){var _=J(E,3);return{who:_[1],married:_[2]}},variable:"MARRIAGE",name:"marriages"},re=/\{\{nbay\|([^\}\}]+)\}\}/gi,pe=/nbay\|([^|]+)\|(.*)\}\}/i,be={globalPattern:re,parsePattern:pe,parse:function(E){var _=J(E,3),k=_[1];return _[2],k},variable:"nbay",name:"nbay"},Ie=/\{\{([^|\n]+)\|([^|\n]+)\|?([^\}\n]+)?\}\}/g,De=/\{\{([^|\n]+)\|([^|\n]+)\|?([^\}\n]+)?\}\}/,ye={globalPattern:Ie,parsePattern:De,parse:function(E){var _=J(E,4),k=_[1];return _[2],_[3],k},variable:"OTHER",name:"others"},He=/\{\{hlist\|([^\}\}]+)\}\}/gi,Ye=/hlist\|(.*)\n?\}\}/i,ze={globalPattern:He,parsePattern:Ye,parse:function(E){return E?J(E,2)[1].split("|"):[]},variable:"HLIST",name:"hlists"},Ne=/\{\{birth\sdate([^\}\}]+)\}\}/gi,Ue=/(\d+)\|(\d+)\|(\d+)/,wt=31536e6,ur={globalPattern:Ne,parsePattern:Ue,parse:function(E){var _=J(E,4),k=_[1],L=_[2],H=_[3],z=new Date(k,L-1,H);return{date:z,age:Math.floor((Date.now()-+z)/wt)}},variable:"BIRTH_DATE",name:"birthDates"},Nt=Symbol("DO NOT REPLACE"),dr=/\{\{([^\n\}\}]+)\}\}/g,Ut=/(.*)/,Ft={globalPattern:dr,parsePattern:Ut,parse:function(E){var _=E[0].indexOf("|");if(_>-1){var k=E[0].substring(_+1).slice(0,-2),L=new Date(k+" GMT");if(!isNaN(L.getTime()))return{date:L};if(L=new Date(k.split("|").join("-")+" GMT"),!isNaN(L.getTime()))return{date:L}}return Nt},variable:"LABELED_DATE",name:"labeledDates"},xr=/\{\{death\sdate\sand\sage([^\}\}]+)\}\}/gi,mr=/(\d+)\|(\d+)\|(\d+)\|(\d+)\|?(\d+)?\|?(\d+)?/,pr=31536e6,hr={globalPattern:xr,parsePattern:mr,parse:function(E){var _=J(E,7),k=_[1],L=_[2],H=_[3],z=_[4],oe=_[5],xe=oe===void 0?0:oe,ge=_[6],Re=ge===void 0?0:ge,Ce=new Date(k,L-1,H),he=new Date(z,xe-1,Re);return{date:Ce,age:Math.floor((Number(Ce)-Number(he))/pr)}},variable:"DEATH_DATE",name:"deathDates"},St=/\{\{URL\|([^\}\}]+)\}\}/g,kt=/URL\|([^\}\}]+)\}\}/,fr={globalPattern:St,parsePattern:kt,parse:function(E){return J(E,2)[1]},variable:"URL",name:"urls"},Er=/\[(https?):\/\/((?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)\s+([\w\s]+)\]/g,gr=/\[(https?):\/\/((?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)\s+([\w\s]+)\]/,jr={globalPattern:Er,parsePattern:gr,parse:function(E){var _=J(E,5),k=_[1],L=_[2],H=_[3];return{protocol:k,hostname:L,path:H,title:_[4],url:k+"://"+L+H}},variable:"WEBSITE",name:"websites"},Se=/\{\{Extra[^}}]+\}\}/gi,_r=/\|\s?(\w+)\s+=\s+(.+)/g,Rr=/\|\s?(\w+)\s+=\s+(.+)/,yr={globalPattern:Se,parsePattern:_r,parse:function(E){return E.reduce(function(_,k){var L=k.match(Rr),H=J(L,3),z=H[1],oe=H[2];return _[z]=oe,_},{})},variable:"EXTRA",name:"extra"},Bt=/\{\{convert\|([\d\.]+)\|(\w+)/g,br=/\{\{convert\|([\d\.]+)\|(\w+)/,Tt={globalPattern:Bt,parsePattern:br,parse:function(E){var _=J(E,3);return _[1]+" "+_[2]},variable:"CONVERT",name:"converts"},Ct=/\{\{film\sdate([^\}\}]+)\}\}/gi,vr=/(\d+)\|?(\d+)\|?(\d+)\|?([^\|\}]*)\|?(ref\d+=([^\|\}]*))?/g,wr=/(\d+)\|?(\d+)\|?(\d+)\|?([^\|\}]*)\|?(ref\d+=([^\|\}]*))?/,Ht={globalPattern:Ct,parsePattern:vr,parse:function(E){return E.map(function(_){var k=_.match(wr),L=J(k,7),H=(L[0],L[1]),z=L[2],oe=L[3],xe=L[4],ge=(L[5],L[6]);return{date:new Date(H,z&&z-1,oe),location:xe,ref:ge}})},variable:"FILM_DATES",name:"filmDates"},nt=/<ref(\s\w+=[^>]+)?>(.*)<\/ref>/g,mt=/<ref(\s\w+=[^>]+)?>(.*)<\/ref>/,Nr=/(\w+)=(["\w]+)/g,Sr=/(\w+)=(["\w]+)/,At={globalPattern:nt,parsePattern:mt,parse:function(E){var _=J(E,3),k=(_[0],_[1]),L=_[2];return{attributes:((k||"").match(Nr)||[]).reduce(function(H,z){if(z){var oe=z.match(Sr),xe=J(oe,3),ge=(xe[0],xe[1]),Re=xe[2];H[ge]=Re.replace(/"/g,"")}return H},{}),contents:L}},variable:"REF",name:"refs"},kr=/<ref(\s\w+=[^>]+)?\/>/g,Tr=/<ref(\s\w+=[^>]+)?\/>/,pt=/(\w+)=(["\w]+)/g,Pe=/(\w+)=(["\w]+)/,Pt={globalPattern:kr,parsePattern:Tr,parse:function(E){return{attributes:E[1].match(pt).reduce(function(_,k){var L=k.match(Pe),H=J(L,3),z=(H[0],H[1]),oe=H[2];return _[z]=oe.replace(/"/g,""),_},{})}},variable:"REF",name:"refs"},qt=/\{\{formatnum:\d+\}\}/gi,Xe=/\{\{formatnum:(\d+)\}\}/,Ot={globalPattern:qt,parsePattern:Xe,parse:function(E){var _=J(E,2),k=_[1];return parseFloat(k)},variable:"FORMAT_NUM",name:"formatNum"},Cr=[Je,At,Pt,de,Ot,_e,we,ue,ur,Ft,hr,Rt,jr,ze,fr,Tt,be,Ht,ye,yr,vt,tt],Lt=Cr.map(function(E){return{handler:i(E),name:E.name,pattern:new RegExp("\\$"+E.variable+"_(\\d+)")}}),Ar=/\|\s*([-'\u0400-\u04FF\w\s]+)\s*=\s*([^|]+)?/g,ht=/\|\s*([-'\u0400-\u04FF\w\s]+)\s*=\s*([^|]+)?/,Gt=function(E){return typeof E=="string"&&(E=E.trim().replace(/ /g,""),E.match(/,/)&&E.match(/\./)?E.indexOf(",")<E.indexOf(".")?at(E):ft(E):E.match(/,/)&&!E.match(/\./)?E.match(/,/g).length>1||E.match(/,[0-9]{3}($|^[0-9])/)?at(E):ft(E):!E.match(/,/)&&E.match(/\./)?E.match(/\./g).length>1||E.match(/\.[0-9]{3}($|^[0-9])/)?ft(E):at(E):(+E).toString()===E&&+E)},at=function(E){return+E.replace(/,/g,"")},ft=function(E){return+E.replace(/\./g,"").replace(/,/g,".")},Et=Lt.find(function(E){return E.name==="smalls"}),Pr=/blank(\d+)?NameSec2/,Lr=/blank(\d+)?InfoSec2/,It=/{{\w*box/,Vt=/{\|(.*)\n?/,Oe=/\n\|}/,Wt=/!\s?(.*)/g,Vr=/\|-/,Ir=/(?:\n\|)|(?:\|\|)/,Wr=/\[\[([^\]]+)\]\]/g,Yt=/^.*\|/,Dr="!!",Mr=/{{anchor\|(.*)}}/g,zt=/rowspan="(\d+)"/,Xt=function(E){return E.replace(Wr,function(_,k){return k.replace(Yt,"").trim()||k})},Kt=function(E){return E.replace(Mr,"")},ot=function(E){return Xt(Kt(E||"")).replace(zt,"").replace(Yt,"").trim()},Zt=function(E){return E.split(Ir).map(ot)},Jt=function(E,_){var k=E.match(_);return k?k.index:-1},Qt=function(E){var _=E.match(Vt);return _?_.index+_[0].length:-1},er=function(E){return Jt(E,Oe)},$r=function(E){for(var _=[],k=void 0;k=Wt.exec(E);)_.push.apply(_,me(k[1].split(Dr).map(ot)));return _},Ur=function(E){var _=E.split(Vr).map(function(c){return c.replace(/^.*\n+?\|/,"").trim()}).filter(function(c){return c}),k=[],L=0,H=0,z=[],oe=!0,xe=!1,ge=void 0;try{for(var Re,Ce=_[Symbol.iterator]();!(oe=(Re=Ce.next()).done);oe=!0){var he=Re.value,o=he.match(zt);o&&(L=0,H=parseInt(o[1]),z=[]),L<H?(z.push(he),++L===H&&k.push(D(z))):k.push(he)}}catch(c){xe=!0,ge=c}finally{try{!oe&&Ce.return&&Ce.return()}finally{if(xe)throw ge}}return k},tr=function(E,_,k){var L=E,H=Qt(L);if(H===-1)return null;L=L.substring(H);var z=er(L);if(z===-1)return null;L=L.substring(0,z);var oe=Ur(L);if(!oe.length)return null;var xe=$r(oe[0]);return xe.length?{data:oe.slice(1).map(Zt).map(function(ge){return xe.reduce(function(Re,Ce,he){return Re[M(d(Ce,_,k))]=u(ge[he],_,k),Re},{})}),end:H+z}:null},Dt=function(E,_){for(var k=U(E,_),L=l(k),H=[],z=L.source,oe=null;oe=tr(z,L.context,_);){if(!oe)return H;H.push(oe.data),z=z.substring(oe.end)}return H},rr=/\[\[([^\]]+)\]\]/g,Fr=/{{BSkm\|([\dx]+,[\dx]+)\|([\dx]+,[\dx]+)}}/g,Br=function(E){var _=E.replace(Fr,"$1/$2").match(/{{BS([^}}]+)}}/g);return _?_.map(function(k){return q(k).split("|")}).map(F).filter(function(k){return k.type[0]!=="-"}):null},sr=/[^=]==\s?([\w\s]+)\s?==/g,Mt=/===([\w\s]+)===/g,nr=/{{list.+start.*}}/gi,ar=/{{list.+end.*}}/gi,gt=/{{(.*)}}/g,or=/{{(.*)}}/,Hr=function(E){var _=le(E,sr),k=le(E,Mt),L=V(E);return L.forEach(function(H){var z=_.filter(function(xe){return xe.end<H.start}).map(function(xe){return xe.value});H.heading=K(z);var oe=k.filter(function(xe){return xe.end<H.start}).map(function(xe){return xe.value});H.subheading=K(oe),delete H.start,delete H.end}),L};return bundle_min=A,bundle_min}var hasRequiredPage;function requirePage(){return hasRequiredPage||(hasRequiredPage=1,(function(exports$1){Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.citation=exports$1.pdf=exports$1.mobileHtml=exports$1.media=exports$1.related=exports$1.summary=exports$1.rawInfo=exports$1.tables=exports$1.infobox=exports$1.langLinks=exports$1.coordinates=exports$1.references=exports$1.links=exports$1.categories=exports$1.content=exports$1.html=exports$1.intro=exports$1.images=exports$1.Page=void 0;const errors_1=requireErrors(),request_1=requireRequest(),utils_1=requireUtils(),messages_1=requireMessages(),infoboxParser=requireBundle_min();class Page{constructor(e){ne(this,"pageid");ne(this,"ns");ne(this,"title");ne(this,"contentmodel");ne(this,"pagelanguage");ne(this,"pagelanguagehtmlcode");ne(this,"pagelanguagedir");ne(this,"touched");ne(this,"lastrevid");ne(this,"length");ne(this,"fullurl");ne(this,"editurl");ne(this,"canonicalurl");ne(this,"revid");ne(this,"parentid");ne(this,"_summary");ne(this,"_images");ne(this,"_content");ne(this,"_html");ne(this,"_categories");ne(this,"_references");ne(this,"_links");ne(this,"_coordinates");ne(this,"_langLinks");ne(this,"_infobox");ne(this,"_tables");ne(this,"_intro");ne(this,"_related");ne(this,"_media");ne(this,"_mobileHtml");ne(this,"intro",async e=>{try{if(!this._intro){const t=await(0,exports$1.intro)(this.pageid.toString(),e==null?void 0:e.redirect);this._intro=t}return this._intro}catch(t){throw new errors_1.introError(t)}});ne(this,"images",async e=>{try{if(!this._images){const t=await(0,exports$1.images)(this.pageid.toString(),e);this._images=t}return this._images}catch(t){throw new errors_1.imageError(t)}});ne(this,"summary",async e=>{try{if(!this._summary){const t=await(0,exports$1.summary)(this.title,e==null?void 0:e.redirect);this._summary=t}return this._summary}catch(t){throw new errors_1.summaryError(t)}});ne(this,"html",async e=>{try{if(!this._html){const t=await(0,exports$1.html)(this.pageid.toString(),e==null?void 0:e.redirect);this._html=t}return this._html}catch(t){throw new errors_1.htmlError(t)}});ne(this,"content",async e=>{try{if(!this._content){const t=await(0,exports$1.content)(this.pageid.toString(),e==null?void 0:e.redirect);this.parentid=t.ids.parentId,this.revid=t.ids.revId,this._content=t.result}return this._content}catch(t){throw new errors_1.contentError(t)}});ne(this,"categories",async e=>{try{if(!this._categories){const t=await(0,exports$1.categories)(this.pageid.toString(),e);this._categories=t}return this._categories}catch(t){throw new errors_1.categoriesError(t)}});ne(this,"links",async e=>{try{if(!this._links){const t=await(0,exports$1.links)(this.pageid.toString(),e);this._links=t}return this._links}catch(t){throw new errors_1.linksError(t)}});ne(this,"references",async e=>{try{if(!this._references){const t=await(0,exports$1.references)(this.pageid.toString(),e);this._references=t}return this._references}catch(t){throw new errors_1.linksError(t)}});ne(this,"coordinates",async e=>{try{if(!this._coordinates){const t=await(0,exports$1.coordinates)(this.pageid.toString(),e==null?void 0:e.redirect);this._coordinates=t}return this._coordinates}catch(t){throw new errors_1.coordinatesError(t)}});ne(this,"langLinks",async e=>{try{if(!this._langLinks){const t=await(0,exports$1.langLinks)(this.pageid.toString(),e);this._langLinks=t}return this._langLinks}catch(t){throw new errors_1.linksError(t)}});ne(this,"infobox",async e=>{try{if(!this._infobox){const t=await(0,exports$1.infobox)(this.pageid.toString(),e==null?void 0:e.redirect);this._infobox=t}return this._infobox}catch(t){throw new errors_1.infoboxError(t)}});ne(this,"tables",async e=>{try{if(!this._tables){const t=await(0,exports$1.tables)(this.pageid.toString(),e==null?void 0:e.redirect);this._tables=t}return this._tables}catch(t){throw new errors_1.infoboxError(t)}});ne(this,"related",async e=>{try{if(!this._related){const t=await(0,exports$1.related)(this.title,e==null?void 0:e.redirect);this._related=t}return this._related}catch(t){throw new errors_1.relatedError(t)}});ne(this,"media",async e=>{try{if(!this._media){const t=await(0,exports$1.media)(this.title,e==null?void 0:e.redirect);this._media=t}return this._media}catch(t){throw new errors_1.mediaError(t)}});ne(this,"mobileHtml",async e=>{try{if(!this._mobileHtml){const t=await(0,exports$1.mobileHtml)(this.title,e==null?void 0:e.redirect);this._mobileHtml=t}return this._mobileHtml}catch(t){throw new errors_1.htmlError(t)}});ne(this,"pdf",async e=>{try{return await(0,exports$1.pdf)(this.title,e)}catch(t){throw new errors_1.pdfError(t)}});this.pageid=e.pageid,this.ns=e.ns,this.title=e.title,this.contentmodel=e.contentmodel,this.pagelanguage=e.pagelanguage,this.pagelanguagedir=e.pagelanguagedir,this.touched=e.touched,this.lastrevid=e.lastrevid,this.length=e.length,this.fullurl=e.fullurl,this.editurl=e.editurl,this.canonicalurl=e.canonicalurl}async runMethod(functionName){try{const result=await eval(`this.${functionName}()`);return result}catch(e){throw new errors_1.preloadError(e)}}}exports$1.Page=Page;const images=async(e,t)=>{try{let r={generator:"images",gimlimit:(t==null?void 0:t.limit)||5,prop:"imageinfo",iiprop:"url"};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t==null?void 0:t.redirect),i=[],n=Object.keys(s.query.pages);for(const l of n){const p=s.query.pages[l];p.url=p.imageinfo[0].url,i.push(p)}return i}catch(r){throw new errors_1.imageError(r)}};exports$1.images=images;const intro=async(e,t=!0)=>{var r;try{let s={prop:"extracts",explaintext:"",exintro:""};s=(0,utils_1.setPageIdOrTitleParam)(s,e);const i=await(0,request_1.default)(s,t),n=(0,utils_1.setPageId)(s,i);return(r=i==null?void 0:i.query)==null?void 0:r.pages[n].extract}catch(s){throw new errors_1.introError(s)}};exports$1.intro=intro;const html=async(e,t=!0)=>{try{let r={prop:"revisions",rvprop:"content",rvlimit:1,rvparse:""};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t),i=(0,utils_1.setPageId)(r,s);return s.query.pages[i].revisions[0]["*"]}catch(r){throw new errors_1.htmlError(r)}};exports$1.html=html;const content=async(e,t=!0)=>{try{let r={prop:"extracts|revisions",explaintext:"",rvprop:"ids"};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t),i=(0,utils_1.setPageId)(r,s),n=s.query.pages[i].extract,l={revisionId:s.query.pages[i].revisions[0].revid,parentId:s.query.pages[i].revisions[0].parentid};return{result:n,ids:l}}catch(r){throw new errors_1.contentError(r)}};exports$1.content=content;const categories=async(e,t)=>{try{let r={prop:"categories",cllimit:t==null?void 0:t.limit};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(r,s);return s.query.pages[i].categories.map(n=>n.title)}catch(r){throw new errors_1.categoriesError(r)}};exports$1.categories=categories;const links=async(e,t)=>{try{let r={prop:"links",plnamespace:0,pllimit:(t==null?void 0:t.limit)||"max"};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(r,s);return s.query.pages[i].links.map(l=>l.title)}catch(r){throw new errors_1.linksError(r)}};exports$1.links=links;const references=async(e,t)=>{try{let r={prop:"extlinks",ellimit:(t==null?void 0:t.limit)||"max"};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(r,s);return s.query.pages[i].extlinks.map(l=>l["*"])}catch(r){throw new errors_1.linksError(r)}};exports$1.references=references;const coordinates=async(e,t=!0)=>{try{let r={prop:"coordinates"};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t),i=(0,utils_1.setPageId)(r,s),n=s.query.pages[i].coordinates;return n?n[0]:null}catch(r){throw new errors_1.coordinatesError(r)}};exports$1.coordinates=coordinates;const langLinks=async(e,t)=>{try{let r={prop:"langlinks",lllimit:(t==null?void 0:t.limit)||"max",llprop:"url"};r=(0,utils_1.setPageIdOrTitleParam)(r,e);const s=await(0,request_1.default)(r,t==null?void 0:t.redirect),i=(0,utils_1.setPageId)(r,s);return(s.query.pages[i].langlinks??[]).map(l=>({lang:l.lang,title:l["*"],url:l.url}))}catch(r){throw new errors_1.linksError(r)}};exports$1.langLinks=langLinks;const infobox=async(e,t=!0)=>{try{const r={prop:"revisions",rvprop:"content",rvsection:0},s=await(0,exports$1.rawInfo)(e,r,t);return infoboxParser(s).general}catch(r){throw new errors_1.infoboxError(r)}};exports$1.infobox=infobox;const tables=async(e,t=!0)=>{try{const r={prop:"revisions",rvprop:"content"},s=await(0,exports$1.rawInfo)(e,r,t);return infoboxParser(s).tables}catch(r){throw new errors_1.infoboxError(r)}};exports$1.tables=tables;const rawInfo=async(e,t,r=!0)=>{var s;try{t=(0,utils_1.setPageIdOrTitleParam)(t,e);const i=await(0,request_1.default)(t,r);if(!((s=i.query)!=null&&s.pages))throw new errors_1.wikiError(messages_1.MSGS.INFOBOX_NOT_EXIST);const n=(0,utils_1.setPageId)(t,i),l=i.query.pages[n].revisions[0];return l?l["*"]:""}catch(i){throw new errors_1.infoboxError(i)}};exports$1.rawInfo=rawInfo;const summary=async(e,t=!0)=>{try{const r="page/summary/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(r,t)}catch(r){throw new errors_1.summaryError(r)}};exports$1.summary=summary;const related=async(e,t=!0)=>{try{const r="page/related/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(r,t)}catch(r){throw new errors_1.relatedError(r)}};exports$1.related=related;const media=async(e,t=!0)=>{try{const r="page/media-list/"+e.replace(" ","_");return await(0,request_1.makeRestRequest)(r,t)}catch(r){throw new errors_1.mediaError(r)}};exports$1.media=media;const mobileHtml=async(e,t=!0)=>{try{const r=`page/mobile-html/${e}`;return await(0,request_1.makeRestRequest)(r,t)}catch(r){throw new errors_1.htmlError(r)}};exports$1.mobileHtml=mobileHtml;const pdf=async(e,t)=>{try{let r=`page/pdf/${e}`;return t!=null&&t.format&&(r+=`/${t.format}`),t!=null&&t.type&&(r+=`/${t.type}`),(0,request_1.returnRestUrl)(r)}catch(r){throw new errors_1.pdfError(r)}};exports$1.pdf=pdf;const citation=async(e,t,r)=>{try{let s="data/citation";return s+=t?`/${t}`:"/mediawiki",s+=`/${e}`,r&&(s+=`/${r}`),await(0,request_1.makeRestRequest)(s)}catch(s){throw new errors_1.citationError(s)}};exports$1.citation=citation,exports$1.default=Page})(page)),page}var resultTypes={},hasRequiredResultTypes;function requireResultTypes(){return hasRequiredResultTypes||(hasRequiredResultTypes=1,Object.defineProperty(resultTypes,"__esModule",{value:!0})),resultTypes}var optionTypes={},hasRequiredOptionTypes;function requireOptionTypes(){return hasRequiredOptionTypes||(hasRequiredOptionTypes=1,Object.defineProperty(optionTypes,"__esModule",{value:!0})),optionTypes}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(e){var t=dist&&dist.__createBinding||(Object.create?(function(u,a,h,j){j===void 0&&(j=h);var R=Object.getOwnPropertyDescriptor(a,h);(!R||("get"in R?!a.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return a[h]}}),Object.defineProperty(u,j,R)}):(function(u,a,h,j){j===void 0&&(j=h),u[j]=a[h]})),r=dist&&dist.__exportStar||function(u,a){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(a,h)&&t(a,u,h)};Object.defineProperty(e,"__esModule",{value:!0});const s=requireRequest(),i=requirePage(),n=requireErrors(),l=requireMessages(),p=requireUtils(),d=async(u,a)=>d.page(u,a);d.search=async(u,a)=>{try{const h={list:"search",srprop:"",srlimit:(a==null?void 0:a.limit)||10,srsearch:u};a!=null&&a.suggestion&&(h.srinfo="suggestion");const j=await(0,s.default)(h);return{results:j.query.search,suggestion:j.query.searchinfo?j.query.searchinfo.suggestion:null}}catch(h){throw new n.searchError(h)}},d.page=async(u,a)=>{try{(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a));let h={prop:"info|pageprops",inprop:"url",ppprop:"disambiguation"};h=(0,p.setPageIdOrTitleParam)(h,u);const j=await(0,s.default)(h);let R=j.query.pages;const b=(0,p.setPageId)(h,j);if(R=R[b],R.missing=="")throw new n.pageError(`${l.MSGS.PAGE_NOT_EXIST}${u}`);const C=new i.default(R);if(a!=null&&a.preload){a!=null&&a.fields||(a.fields=["summary","images"]);for(const S of a.fields)await C.runMethod(S)}return C}catch(h){throw new n.pageError(h)}},d.intro=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.intro)(u,a==null?void 0:a.redirect)}catch(h){throw new n.introError(h)}},d.images=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.images)(u,a)}catch(h){throw new n.imageError(h)}},d.summary=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.summary)(u,a==null?void 0:a.redirect)}catch(h){throw new n.summaryError(h)}},d.html=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.html)(u,a==null?void 0:a.redirect)}catch(h){throw new n.htmlError(h)}},d.content=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),(await(0,i.content)(u,a==null?void 0:a.redirect)).result}catch(h){throw new n.contentError(h)}},d.categories=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.categories)(u,a)}catch(h){throw new n.categoriesError(h)}},d.related=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.related)(u,a==null?void 0:a.redirect)}catch(h){throw new n.relatedError(h)}},d.media=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.media)(u,a==null?void 0:a.redirect)}catch(h){throw new n.mediaError(h)}},d.links=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.links)(u,a)}catch(h){throw new n.linksError(h)}},d.references=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.references)(u,a)}catch(h){throw new n.linksError(h)}},d.coordinates=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.coordinates)(u,a==null?void 0:a.redirect)}catch(h){throw new n.coordinatesError(h)}},d.langLinks=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.langLinks)(u,a)}catch(h){throw new n.linksError(h)}},d.infobox=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.infobox)(u,a==null?void 0:a.redirect)}catch(h){throw new n.infoboxError(h)}},d.tables=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.tables)(u,a==null?void 0:a.redirect)}catch(h){throw new n.infoboxError(h)}},d.languages=async()=>{try{const u={meta:"siteinfo",siprop:"languages"},a=await(0,s.default)(u),h=[];for(const j of a.query.languages)h.push({[j.code]:j["*"]});return h}catch(u){throw new n.wikiError(u)}},d.setLang=u=>(0,s.setAPIUrl)(u),d.geoSearch=async(u,a,h)=>{try{const j={list:"geosearch",gsradius:(h==null?void 0:h.radius)||1e3,gscoord:`${u}|${a}`,gslimit:(h==null?void 0:h.limit)||10,gsprop:"type"};return(await(0,s.default)(j)).query.geosearch}catch(j){throw new n.geoSearchError(j)}},d.suggest=async u=>{var a,h,j,R;try{const b={list:"search",srinfo:"suggestion",srprop:"",srsearch:u},C=await(0,s.default)(b);return(h=(a=C.query)==null?void 0:a.searchinfo)!=null&&h.suggestion?(R=(j=C.query)==null?void 0:j.searchinfo)==null?void 0:R.suggestion:null}catch(b){throw new n.searchError(b)}},d.onThisDay=async(u={})=>{try{const a=u.type||"all",h=(u.month||(0,p.getCurrentMonth)()).toString().padStart(2,"0"),j=(u.day||(0,p.getCurrentDay)()).toString().padStart(2,"0"),R=`feed/onthisday/${a}/${h}/${j}`;return await(0,s.makeRestRequest)(R,!0)}catch(a){throw new n.eventsError(a)}},d.featuredContent=async(u={})=>{try{const a=(u.year||(0,p.getCurrentYear)()).toString(),h=(u.month||(0,p.getCurrentMonth)()).toString().padStart(2,"0"),j=(u.day||(0,p.getCurrentDay)()).toString().padStart(2,"0"),R=`feed/featured/${a}/${h}/${j}`;return await(0,s.makeRestRequest)(R,!0)}catch(a){throw new n.fcError(a)}},d.random=async u=>{try{u||(u="summary");const a=`page/random/${u}`;return await(0,s.makeRestRequest)(a)}catch(a){throw new n.wikiError(a)}},d.mobileHtml=async(u,a)=>{try{return(a!=null&&a.url||a!=null&&a.autoSuggest)&&(u=await(0,p.setTitleForPage)(u,a)),await(0,i.mobileHtml)(u,a==null?void 0:a.redirect)}catch(h){throw new n.htmlError(h)}},d.pdf=async(u,a)=>{try{return a!=null&&a.autoSuggest&&(u=await(0,p.setTitleForPage)(u)),await(0,i.pdf)(u,a)}catch(h){throw new n.pdfError(h)}},d.citation=async(u,a,h)=>{try{return await(0,i.citation)(u,a,h)}catch(j){throw new n.citationError(j)}},d.autocompletions=async(u,a)=>{try{const h={list:"search",limit:(a==null?void 0:a.limit)||10,search:u,action:"opensearch",redirect:"return"},[,j]=await(0,s.default)(h,!1);return j}catch(h){throw new n.autocompletionsError(h)}},d.setUserAgent=u=>{(0,s.setUserAgent)(u)},r(requireErrors(),e),r(requireResultTypes(),e),r(requireOptionTypes(),e),r(requirePage(),e),e.default=d})(dist)),dist}var distExports=requireDist();const wiki=getDefaultExportFromCjs(distExports),DISAMBIGUATION_SUFFIXES={person:["philosopher","mathematician","scientist","writer","artist","composer","politician","historian"],object:["book","painting","work","treatise","manuscript","film"],location:["city","place","region","country","town"],entity:["organization","company","institution","movement","group"]};function withTimeout(e,t){return Promise.race([e,new Promise((r,s)=>setTimeout(()=>s(new Error("Request timeout")),t))])}function isDisambiguation(e){return typeof e=="object"&&e!==null?e.type==="disambiguation":!1}async function fetchWikipediaSummary(e,t){var s,i;try{const n=await withTimeout(wiki.page(e,{autoSuggest:!1}),5e3),l=await withTimeout(n.summary(),5e3);if(isDisambiguation(l)){if(t){const d=await retryWithDisambiguation(e,t,5e3);if(d)return d}return null}const p={title:l.title,extract:l.extract||"",pageUrl:((i=(s=l.content_urls)==null?void 0:s.desktop)==null?void 0:i.page)||`https://en.wikipedia.org/wiki/${encodeURIComponent(e)}`};return l.thumbnail&&(p.thumbnail={source:l.thumbnail.source,width:l.thumbnail.width,height:l.thumbnail.height}),l.wikibase_item&&(p.wikidataId=l.wikibase_item),p}catch(n){return n instanceof Error&&(n.message.includes("No page found")||n.message.includes("pageError")||n.message==="Request timeout"),null}}async function retryWithDisambiguation(e,t,r){var i,n;const s=DISAMBIGUATION_SUFFIXES[t];for(const l of s){const p=`${e} (${l})`;try{const d=await withTimeout(wiki.page(p,{autoSuggest:!1}),r),u=await withTimeout(d.summary(),r);if(isDisambiguation(u))continue;const a={title:u.title,extract:u.extract||"",pageUrl:((n=(i=u.content_urls)==null?void 0:i.desktop)==null?void 0:n.page)||`https://en.wikipedia.org/wiki/${encodeURIComponent(p)}`};return u.thumbnail&&(a.thumbnail={source:u.thumbnail.source,width:u.thumbnail.width,height:u.thumbnail.height}),u.wikibase_item&&(a.wikidataId=u.wikibase_item),a}catch{continue}}return null}const CACHE_KEY="scenius-wikipedia-cache",CACHE_VERSION=1,MAX_CACHE_ENTRIES=500,TTL_MS=2880*60*1e3,inFlightRequests=new Map;function normalizeKey(e){return e.toLowerCase().trim()}function getCache(){try{const e=localStorage.getItem(CACHE_KEY);if(!e)return{version:CACHE_VERSION,entries:{}};const t=JSON.parse(e);return t.version!==CACHE_VERSION?{version:CACHE_VERSION,entries:{}}:t}catch{return{version:CACHE_VERSION,entries:{}}}}function saveCache(e){try{localStorage.setItem(CACHE_KEY,JSON.stringify(e))}catch{}}function isExpired(e){return Date.now()-e.timestamp>TTL_MS}function evictOldest(e,t){const r=Object.entries(e.entries);r.sort((s,i)=>s[1].lastAccess-i[1].lastAccess);for(let s=0;s<t&&s<r.length;s++)delete e.entries[r[s][0]]}function getCacheEntry(e){const t=getCache(),r=normalizeKey(e),s=t.entries[r];if(s){if(isExpired(s)){delete t.entries[r],saveCache(t);return}return s.lastAccess=Date.now(),saveCache(t),s.data}}function setCacheEntry(e,t){const r=getCache(),s=normalizeKey(e);if(Object.keys(r.entries).length>=MAX_CACHE_ENTRIES&&!r.entries[s]){const n=Math.ceil(MAX_CACHE_ENTRIES*.1);evictOldest(r,n)}r.entries[s]={data:t,timestamp:Date.now(),lastAccess:Date.now()},saveCache(r)}function fetchWithDedup(e,t){const r=normalizeKey(e),s=inFlightRequests.get(r);if(s)return s;const i=fetchWikipediaSummary(e,t).then(n=>(setCacheEntry(e,n),n)).finally(()=>{inFlightRequests.delete(r)});return inFlightRequests.set(r,i),i}function useWikipediaData({wikipediaTitle:e,nodeType:t,skip:r=!1}){const[s,i]=reactExports.useState(null),[n,l]=reactExports.useState(!1),[p,d]=reactExports.useState(null),u=reactExports.useCallback(async()=>{if(!e||r){i(null),l(!1),d(null);return}const a=getCacheEntry(e);if(a!==void 0){i(a),l(!1),d(null);return}l(!0),d(null);try{const h=await fetchWithDedup(e,t);i(h)}catch(h){const j=h instanceof Error?h.message:"Failed to fetch Wikipedia data";d(j)}finally{l(!1)}},[e,t,r]);return reactExports.useEffect(()=>{u()},[u]),{data:s,loading:n,error:p}}const MAX_EXTRACT_LENGTH=250;function truncateText(e,t){if(e.length<=t)return e;const r=e.slice(0,t),s=r.lastIndexOf(" ");return s>0?r.slice(0,s)+"‚Ä¶":r+"‚Ä¶"}function isBiographyRedundant(e,t){if(!e||!t)return!1;const r=e.toLowerCase().replace(/\s+/g," ").trim(),s=t.toLowerCase().replace(/\s+/g," ").trim();if(s.length<r.length*.7)return!1;const i=new Set(["the","and","was","were","been","have","from","with","that","this","they","their","there"]),n=r.split(/\s+/).filter(d=>d.length>=4&&!i.has(d)).slice(0,10);return n.length===0?!1:n.filter(d=>s.includes(d)).length/n.length>=.7}function getLocalDescription(e){if(isPersonNode(e)){const t=e;if(t.biography&&t.biography.trim())return t.biography.trim()}return e.shortDescription&&e.shortDescription.trim()?e.shortDescription.trim():null}function getNodeTypeHint(e){return e.type}function useNodeEnrichedData(e){const[t,r]=reactExports.useState(!1);reactExports.useEffect(()=>{r(!1)},[e.id]);const s=reactExports.useMemo(()=>getLocalDescription(e),[e]),{data:i,loading:n}=useWikipediaData({wikipediaTitle:e.wikipediaTitle,nodeType:getNodeTypeHint(e),skip:!e.wikipediaTitle}),l=reactExports.useCallback(()=>{r(!0)},[]);return{enrichedData:reactExports.useMemo(()=>{var R;let d=null,u="none";i!=null&&i.extract?(d=truncateText(i.extract,MAX_EXTRACT_LENGTH),u="wikipedia"):s&&(d=s,u="local");let a=null,h="none";(R=i==null?void 0:i.thumbnail)!=null&&R.source?(a=i.thumbnail.source,h="wikipedia"):e.imageUrl&&!t&&(a=e.imageUrl,h="local");let j=!1;return isPersonNode(e)&&e.biography&&(i!=null&&i.extract)?j=!isBiographyRedundant(e.biography,i.extract):isPersonNode(e)&&e.biography&&!(i!=null&&i.extract)&&(j=!0),{title:e.title,description:d,descriptionSource:u,imageUrl:a,imageSource:h,wikipediaUrl:(i==null?void 0:i.pageUrl)||null,wikidataId:(i==null?void 0:i.wikidataId)||e.wikidataId||null,loading:n,localImageFailed:t,shouldShowLocalBiography:j}},[e,s,t,i,n]),handleImageError:l,wikipediaData:i}}function useTopConnectedNodes(e,t,r=5){return reactExports.useMemo(()=>{const s=new Map;for(const p of t){const d=p.source,u=p.target,a=typeof d=="object"&&d!==null?d.id:String(d),h=typeof u=="object"&&u!==null?u.id:String(u);s.set(a,(s.get(a)||0)+1),s.set(h,(s.get(h)||0)+1)}const i=e.map(p=>({node:p,degree:s.get(p.id)||0})),n={person:[],object:[],location:[],entity:[]};for(const p of i){const d=p.node.type;d in n&&n[d].push(p)}return{person:n.person.sort((p,d)=>d.degree-p.degree).slice(0,r),object:n.object.sort((p,d)=>d.degree-p.degree).slice(0,r),location:n.location.sort((p,d)=>d.degree-p.degree).slice(0,r),entity:n.entity.sort((p,d)=>d.degree-p.degree).slice(0,r)}},[e,t,r])}function getTypeLabel(e){return{person:"People",object:"Works & Objects",location:"Locations",entity:"Organizations"}[e]}function getTypeIcon(e){return{person:"üë§",object:"üìú",location:"üìç",entity:"üèõÔ∏è"}[e]}const DEBOUNCE_DELAY$1=300;function SearchBox({value:e,onChange:t,placeholder:r="Highlight nodes...",className:s="",resultCount:i}){const n=reactExports.useRef(null),[l,p]=reactExports.useState(!1),[d,u]=reactExports.useState(e),a=useDebounce(d,DEBOUNCE_DELAY$1);reactExports.useEffect(()=>{a!==e&&t(a)},[a,e,t]),reactExports.useEffect(()=>{e===""&&u("")},[e]),reactExports.useEffect(()=>{const C=S=>{var I,G,U;(S.metaKey||S.ctrlKey)&&S.key==="k"&&(S.preventDefault(),(I=n.current)==null||I.focus(),(G=n.current)==null||G.select()),S.key==="Escape"&&document.activeElement===n.current&&((U=n.current)==null||U.blur(),d&&(u(""),t("")))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[d,t]);const h=reactExports.useCallback(C=>{u(C.target.value)},[]),j=reactExports.useCallback(()=>{var C;u(""),t(""),(C=n.current)==null||C.focus()},[t]),b=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"‚åòK":"Ctrl+K";return jsxRuntimeExports.jsxs("div",{className:`search-box ${l?"search-box--focused":""} ${s}`,title:"Highlights matching nodes without hiding others",children:[jsxRuntimeExports.jsx("div",{className:"search-box__icon","aria-hidden":"true",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),jsxRuntimeExports.jsx("span",{className:"search-box__highlight-indicator","aria-hidden":"true",title:"Highlight mode",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor",children:jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"5"})})}),jsxRuntimeExports.jsx("input",{ref:n,type:"text",className:"search-box__input",value:d,onChange:h,onFocus:()=>p(!0),onBlur:()=>p(!1),placeholder:r,"aria-label":"Highlight nodes in graph","aria-describedby":"search-hint",title:"Highlights matching nodes without hiding others"}),d?jsxRuntimeExports.jsx("button",{className:"search-box__clear",onClick:j,"aria-label":"Clear search",title:"Clear search",type:"button",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}):jsxRuntimeExports.jsx("span",{className:"search-box__shortcut","aria-hidden":"true",title:`Press ${b} to search`,children:b}),d&&i!==void 0&&jsxRuntimeExports.jsx("span",{className:"search-box__results","aria-live":"polite",children:i===0?"No matches":`${i} match${i!==1?"es":""}`}),jsxRuntimeExports.jsxs("span",{id:"search-hint",className:"visually-hidden",children:["Press ",b," to focus search. Press Escape to clear. Highlights matching nodes without hiding."]})]})}function HighlightedText({text:e,highlight:t,className:r}){if(!t.trim())return jsxRuntimeExports.jsx("span",{className:r,children:e});const s=new RegExp(`(${escapeRegExp(t)})`,"gi"),i=e.split(s);return jsxRuntimeExports.jsx("span",{className:r,children:i.map((n,l)=>s.test(n)?jsxRuntimeExports.jsx("mark",{className:"dataset-search__highlight",children:n},l):jsxRuntimeExports.jsx("span",{children:n},l))})}function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function SearchableDatasetSelector({currentDatasetId:e,onSelect:t,isLoading:r=!1,className:s=""}){const i=reactExports.useId(),n=`dataset-search-input-${i}`,l=`dataset-search-listbox-${i}`,[p,d]=reactExports.useState([]),[u,a]=reactExports.useState(!0),[h,j]=reactExports.useState(!1),[R,b]=reactExports.useState(""),[C,S]=reactExports.useState(-1),I=reactExports.useRef(null),G=reactExports.useRef(null),U=reactExports.useRef(null),D=reactExports.useRef([]);reactExports.useEffect(()=>{let B=!0;async function P(){a(!0);const de=[];for(const Q of AVAILABLE_DATASETS){if(!B)return;try{const ae=await loadManifest(Q);de.push({id:ae.id,name:ae.name,description:ae.description,lastUpdated:ae.lastUpdated,nodeCount:ae.nodeCount,edgeCount:ae.edgeCount,loading:!1})}catch(ae){de.push({id:Q,name:Q,description:"Failed to load metadata",lastUpdated:"",loading:!1,error:ae instanceof Error?ae.message:"Unknown error"})}}B&&(d(de),a(!1))}return P(),()=>{B=!1}},[]);const q=reactExports.useMemo(()=>{if(!R.trim())return p;const B=R.toLowerCase();return p.filter(P=>P.name.toLowerCase().includes(B)||P.description.toLowerCase().includes(B))},[p,R]);reactExports.useEffect(()=>{S(-1)},[q.length,R]),reactExports.useEffect(()=>{var B;C>=0&&D.current[C]&&((B=D.current[C])==null||B.scrollIntoView({block:"nearest",behavior:"smooth"}))},[C]),reactExports.useEffect(()=>{const B=P=>{I.current&&!I.current.contains(P.target)&&j(!1)};if(h)return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[h]);const F=reactExports.useCallback(()=>{j(!0)},[]),le=reactExports.useCallback(B=>{b(B.target.value),j(!0)},[]),Z=reactExports.useCallback(()=>{var B;b(""),S(-1),(B=G.current)==null||B.focus()},[]),V=reactExports.useCallback(B=>{t(B),j(!1),b(""),S(-1)},[t]),K=reactExports.useCallback(B=>{switch(B.key){case"ArrowDown":B.preventDefault(),h?S(P=>P<q.length-1?P+1:P):j(!0);break;case"ArrowUp":B.preventDefault(),h&&S(P=>P>0?P-1:0);break;case"Enter":B.preventDefault(),h&&C>=0&&q[C]?V(q[C].id):h||j(!0);break;case"Escape":B.preventDefault(),h?(j(!1),S(-1)):R&&b("");break;case"Tab":j(!1);break;case"Home":h&&q.length>0&&(B.preventDefault(),S(0));break;case"End":h&&q.length>0&&(B.preventDefault(),S(q.length-1));break}},[h,C,q,V,R]),A=reactExports.useCallback(B=>{V(B)},[V]),M=reactExports.useCallback(B=>{S(B)},[]),T=p.find(B=>B.id===e),ee=(T==null?void 0:T.name)??e??"Select dataset",J=B=>{if(!B)return"";try{return new Date(B).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return B}},me=B=>`${l}-option-${B}`;return jsxRuntimeExports.jsxs("div",{ref:I,className:`dataset-search ${s}`,children:[jsxRuntimeExports.jsxs("div",{className:"dataset-search__input-wrapper",children:[jsxRuntimeExports.jsx("span",{className:"dataset-search__icon","aria-hidden":"true",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("ellipse",{cx:"12",cy:"6",rx:"8",ry:"3"}),jsxRuntimeExports.jsx("path",{d:"M4 6v6c0 1.657 3.582 3 8 3s8-1.343 8-3V6"}),jsxRuntimeExports.jsx("path",{d:"M4 12v6c0 1.657 3.582 3 8 3s8-1.343 8-3v-6"})]})}),jsxRuntimeExports.jsx("input",{ref:G,id:n,type:"text",className:"dataset-search__input",value:R,onChange:le,onFocus:F,onKeyDown:K,placeholder:ee,"aria-label":"Search datasets","aria-expanded":h,"aria-controls":l,"aria-activedescendant":C>=0?me(C):void 0,"aria-autocomplete":"list",role:"combobox",disabled:u||r,autoComplete:"off"}),R&&jsxRuntimeExports.jsx("button",{type:"button",className:"dataset-search__clear",onClick:Z,"aria-label":"Clear search",tabIndex:-1,children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),r?jsxRuntimeExports.jsx("span",{className:"dataset-search__spinner","aria-label":"Loading"}):jsxRuntimeExports.jsx("button",{type:"button",className:`dataset-search__toggle ${h?"dataset-search__toggle--open":""}`,onClick:()=>j(!h),"aria-label":h?"Close dropdown":"Open dropdown",tabIndex:-1,children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),h&&jsxRuntimeExports.jsx("div",{ref:U,id:l,className:"dataset-search__dropdown",role:"listbox","aria-label":"Available datasets",children:u?jsxRuntimeExports.jsx("div",{className:"dataset-search__loading",children:"Loading datasets..."}):q.length===0?jsxRuntimeExports.jsx("div",{className:"dataset-search__empty",children:R?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:['No datasets matching "',jsxRuntimeExports.jsx("strong",{children:R}),'"']}):"No datasets available"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"visually-hidden",role:"status","aria-live":"polite",children:[q.length," dataset",q.length!==1?"s":""," found"]}),q.map((B,P)=>jsxRuntimeExports.jsxs("div",{id:me(P),ref:de=>D.current[P]=de,className:`dataset-search__option ${B.id===e?"dataset-search__option--selected":""} ${P===C?"dataset-search__option--active":""} ${B.error?"dataset-search__option--error":""}`,role:"option","aria-selected":B.id===e,onClick:()=>A(B.id),onMouseEnter:()=>M(P),children:[jsxRuntimeExports.jsxs("div",{className:"dataset-search__option-header",children:[jsxRuntimeExports.jsx(HighlightedText,{text:B.name,highlight:R,className:"dataset-search__option-name"}),B.id===e&&jsxRuntimeExports.jsx("span",{className:"dataset-search__check","aria-hidden":"true",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),jsxRuntimeExports.jsx(HighlightedText,{text:B.description,highlight:R,className:"dataset-search__option-description"}),jsxRuntimeExports.jsxs("div",{className:"dataset-search__option-meta",children:[B.nodeCount!==void 0&&B.edgeCount!==void 0&&jsxRuntimeExports.jsxs("span",{className:"dataset-search__option-stats",children:[B.nodeCount," nodes ¬∑ ",B.edgeCount," edges"]}),B.lastUpdated&&jsxRuntimeExports.jsxs("span",{className:"dataset-search__option-date",children:["Updated ",J(B.lastUpdated)]})]}),B.error&&jsxRuntimeExports.jsxs("span",{className:"dataset-search__option-error",children:["Error: ",B.error]})]},B.id))]})})]})}const LAYOUT_OPTIONS=[{id:"force-graph",label:"Graph",icon:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"6",cy:"6",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"18",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"6",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"18",r:"3"}),jsxRuntimeExports.jsx("line",{x1:"8.5",y1:"7.5",x2:"15.5",y2:"16.5"}),jsxRuntimeExports.jsx("line",{x1:"15.5",y1:"7.5",x2:"8.5",y2:"16.5"})]})},{id:"timeline",label:"Timeline",icon:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"6",y1:"3",x2:"6",y2:"21"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"6",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"12",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"18",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"6",x2:"20",y2:"6"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"18",x2:"18",y2:"18"})]})},{id:"radial",label:"Radial",requiresSelection:!0,icon:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"8",strokeDasharray:"2 2"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"4",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"19",cy:"9",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"19",cy:"15",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"20",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"5",cy:"15",r:"2",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"5",cy:"9",r:"2",fill:"currentColor"})]})}];function LayoutSwitcher({currentLayout:e,onLayoutChange:t,selectedNodeId:r,className:s=""}){const i=!!r;return jsxRuntimeExports.jsx("div",{className:`layout-switcher ${s}`,role:"tablist","aria-label":"Visualization layout",children:LAYOUT_OPTIONS.map(n=>{const l=n.requiresSelection&&!i,p=e===n.id;return jsxRuntimeExports.jsxs("button",{className:`layout-switcher__tab ${p?"layout-switcher__tab--active":""} ${l?"layout-switcher__tab--disabled":""}`,role:"tab","aria-selected":p,"aria-controls":`${n.id}-panel`,"aria-disabled":l,onClick:()=>!l&&t(n.id),disabled:l,title:l?"Select a node to use radial view":n.label,type:"button",children:[jsxRuntimeExports.jsx("span",{className:"layout-switcher__tab-icon","aria-hidden":"true",children:n.icon}),jsxRuntimeExports.jsx("span",{className:"layout-switcher__tab-label",children:n.label})]},n.id)})})}function ThemeToggle(){const{theme:e,toggleTheme:t,isDark:r}=useTheme();return jsxRuntimeExports.jsx("button",{className:`theme-toggle ${r?"theme-toggle--dark":"theme-toggle--light"}`,onClick:t,"aria-label":`Switch to ${r?"light":"dark"} mode`,title:`Switch to ${r?"light":"dark"} mode (current: ${e})`,type:"button",children:jsxRuntimeExports.jsxs("span",{className:"theme-toggle__icon-container",children:[jsxRuntimeExports.jsxs("svg",{className:`theme-toggle__icon theme-toggle__icon--sun ${r?"theme-toggle__icon--visible":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"5"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),jsxRuntimeExports.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),jsxRuntimeExports.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),jsxRuntimeExports.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),jsxRuntimeExports.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),jsxRuntimeExports.jsx("svg",{className:`theme-toggle__icon theme-toggle__icon--moon ${r?"":"theme-toggle__icon--visible"}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})]})})}function MobileMenu({isOpen:e,onClose:t,currentDatasetId:r,onDatasetSelect:s,isDatasetLoading:i,currentLayout:n,onLayoutChange:l,selectedNodeId:p,showVisualizationControls:d=!0}){const u=reactExports.useRef(null),a=reactExports.useRef(null);reactExports.useEffect(()=>{const b=C=>{C.key==="Escape"&&e&&t()};if(e)return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[e,t]),reactExports.useEffect(()=>{if(e&&a.current){const b=setTimeout(()=>{var C;(C=a.current)==null||C.focus()},100);return()=>clearTimeout(b)}},[e]),reactExports.useEffect(()=>{if(e)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[e]);const h=reactExports.useCallback(b=>{b.target===b.currentTarget&&t()},[t]),j=reactExports.useCallback(b=>{s(b),t()},[s,t]),R=reactExports.useCallback(b=>{l(b),t()},[l,t]);return e?jsxRuntimeExports.jsx("div",{className:"mobile-menu-overlay",onClick:h,role:"dialog","aria-modal":"true","aria-label":"Navigation menu",children:jsxRuntimeExports.jsxs("div",{ref:u,className:"mobile-menu",onClick:b=>b.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"mobile-menu__header",children:[jsxRuntimeExports.jsx("h2",{className:"mobile-menu__title",children:"Menu"}),jsxRuntimeExports.jsx("button",{ref:a,className:"mobile-menu__close",onClick:t,"aria-label":"Close menu",type:"button",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),jsxRuntimeExports.jsxs("nav",{className:"mobile-menu__content",children:[d&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"mobile-menu__section",children:[jsxRuntimeExports.jsx("label",{className:"mobile-menu__section-label",children:"Dataset"}),jsxRuntimeExports.jsx(SearchableDatasetSelector,{currentDatasetId:r,onSelect:j,isLoading:i,className:"mobile-menu__dataset-selector"})]}),jsxRuntimeExports.jsxs("div",{className:"mobile-menu__section",children:[jsxRuntimeExports.jsx("label",{className:"mobile-menu__section-label",children:"View"}),jsxRuntimeExports.jsx(LayoutSwitcher,{currentLayout:n,onLayoutChange:R,selectedNodeId:p,className:"mobile-menu__layout-switcher"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mobile-menu__section",children:[jsxRuntimeExports.jsx("label",{className:"mobile-menu__section-label",children:"Theme"}),jsxRuntimeExports.jsxs("div",{className:"mobile-menu__theme-row",children:[jsxRuntimeExports.jsx("span",{className:"mobile-menu__theme-label",children:"Toggle dark mode"}),jsxRuntimeExports.jsx(ThemeToggle,{})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mobile-menu__footer",children:[jsxRuntimeExports.jsx("span",{className:"mobile-menu__brand",children:"Scenius"}),jsxRuntimeExports.jsx("span",{className:"mobile-menu__tagline",children:"Mapping collective genius"})]})]})}):null}function HamburgerButton({isOpen:e,onClick:t,className:r=""}){return jsxRuntimeExports.jsxs("button",{className:`hamburger-button ${e?"hamburger-button--open":""} ${r}`,onClick:t,"aria-expanded":e,"aria-label":e?"Close menu":"Open menu",type:"button",children:[jsxRuntimeExports.jsx("span",{className:"hamburger-button__line hamburger-button__line--1"}),jsxRuntimeExports.jsx("span",{className:"hamburger-button__line hamburger-button__line--2"}),jsxRuntimeExports.jsx("span",{className:"hamburger-button__line hamburger-button__line--3"})]})}function Toast({messages:e,onDismiss:t,duration:r=2e3}){return jsxRuntimeExports.jsx("div",{className:"toast-container","aria-live":"polite","aria-atomic":"true",children:e.map(s=>jsxRuntimeExports.jsx(ToastItem,{toast:s,onDismiss:t,duration:r},s.id))})}function ToastItem({toast:e,onDismiss:t,duration:r}){const[s,i]=reactExports.useState(!1),n=reactExports.useCallback(()=>{i(!0),setTimeout(()=>t(e.id),200)},[t,e.id]);reactExports.useEffect(()=>{const d=setTimeout(n,r);return()=>clearTimeout(d)},[r,n]);const l=e.type==="success"?"toast-item--success":"toast-item--info",p=s?"toast-item--exiting":"";return jsxRuntimeExports.jsxs("div",{className:`toast-item ${l} ${p}`,role:"status",children:[e.type==="success"&&jsxRuntimeExports.jsx("svg",{className:"toast-item__icon",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M20 6L9 17l-5-5"})}),jsxRuntimeExports.jsx("span",{className:"toast-item__message",children:e.message})]})}function useToast(){const[e,t]=reactExports.useState([]),r=reactExports.useCallback((i,n="success")=>{const l=`toast-${Date.now()}-${Math.random().toString(36).slice(2,9)}`;t(p=>[...p,{id:l,message:i,type:n}])},[]),s=reactExports.useCallback(i=>{t(n=>n.filter(l=>l.id!==i))},[]);return{toasts:e,showToast:r,dismissToast:s}}function HeaderShareButtons(){const{toasts:e,showToast:t,dismissToast:r}=useToast(),s=reactExports.useCallback(async()=>{try{await navigator.clipboard.writeText(window.location.href),t("Link copied!","success")}catch(n){console.error("Failed to copy URL:",n)}},[t]),i=reactExports.useCallback(async()=>{if(navigator.share)try{await navigator.share({url:window.location.href,title:document.title}),t("Shared!","success")}catch(n){n.name!=="AbortError"&&console.error("Share failed:",n)}else try{await navigator.clipboard.writeText(window.location.href),t("Link copied!","success")}catch(n){console.error("Failed to copy URL:",n)}},[t]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"header-share-buttons",children:[jsxRuntimeExports.jsxs("button",{className:"header-share-buttons__button",onClick:s,title:"Copy link to clipboard","aria-label":"Copy link to clipboard",type:"button",children:[jsxRuntimeExports.jsxs("svg",{className:"header-share-buttons__icon",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("path",{d:"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"}),jsxRuntimeExports.jsx("path",{d:"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"})]}),jsxRuntimeExports.jsx("span",{className:"header-share-buttons__label",children:"Copy"})]}),jsxRuntimeExports.jsxs("button",{className:"header-share-buttons__button",onClick:i,title:"Share this page","aria-label":"Share this page",type:"button",children:[jsxRuntimeExports.jsxs("svg",{className:"header-share-buttons__icon",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"18",cy:"5",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"6",cy:"12",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"18",cy:"19",r:"3"}),jsxRuntimeExports.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),jsxRuntimeExports.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),jsxRuntimeExports.jsx("span",{className:"header-share-buttons__label",children:"Share"})]})]}),jsxRuntimeExports.jsx(Toast,{messages:e,onDismiss:r,duration:2e3})]})}function Header(){const e=useGraphOptional(),t=(e==null?void 0:e.currentDatasetId)??null,r=(e==null?void 0:e.switchDataset)??(()=>{}),s=(e==null?void 0:e.loadingState)??"idle",i=(e==null?void 0:e.searchTerm)??"",n=(e==null?void 0:e.setSearchTerm)??(()=>{}),l=(e==null?void 0:e.searchMatchCount)??0,p=(e==null?void 0:e.currentLayout)??"force-graph",d=(e==null?void 0:e.setCurrentLayout)??(()=>{}),u=(e==null?void 0:e.selection)??null,a=(u==null?void 0:u.type)==="node"?u.id:null,h=useMatch("/:datasetId/explore"),j=useIsMobile(),[R,b]=reactExports.useState(!1),[C,S]=reactExports.useState(!1),I=reactExports.useCallback(()=>{b(!1)},[]),G=reactExports.useCallback(()=>{b(F=>!F)},[]),U=reactExports.useCallback(()=>{S(!0)},[]),D=reactExports.useCallback(()=>{S(!1)},[]),q=reactExports.useCallback(F=>{n(F)},[n]);return j?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("header",{className:"header header--mobile",children:[h&&t?jsxRuntimeExports.jsx(Link,{to:`/${encodeURIComponent(t)}`,className:"header__back-link header__back-link--mobile","aria-label":"Back to dataset overview",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}):jsxRuntimeExports.jsx(Link,{to:"/",className:"header__brand header__brand--mobile header__brand-link",children:jsxRuntimeExports.jsx("h1",{className:"header__title",children:"üß† Scenius"})}),jsxRuntimeExports.jsxs("div",{className:"header__mobile-controls",children:[jsxRuntimeExports.jsx(HeaderShareButtons,{}),h&&(C?jsxRuntimeExports.jsxs("div",{className:"header__search-expanded",children:[jsxRuntimeExports.jsx(SearchBox,{value:i,onChange:q,placeholder:"Highlight nodes...",resultCount:i?l:void 0,className:"header__search-box--expanded"}),jsxRuntimeExports.jsx("button",{className:"header__search-close",onClick:D,"aria-label":"Close search",type:"button",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}):jsxRuntimeExports.jsx("button",{className:"header__search-trigger",onClick:U,"aria-label":"Open search",type:"button",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})),(!h||!C)&&jsxRuntimeExports.jsx(HamburgerButton,{isOpen:R,onClick:G})]})]}),jsxRuntimeExports.jsx(MobileMenu,{isOpen:R,onClose:I,currentDatasetId:t,onDatasetSelect:r,isDatasetLoading:s==="loading",currentLayout:p,onLayoutChange:d,selectedNodeId:a,showVisualizationControls:!!h})]}):jsxRuntimeExports.jsxs("header",{className:"header",children:[jsxRuntimeExports.jsxs(Link,{to:"/",className:"header__brand header__brand-link",children:[jsxRuntimeExports.jsx("h1",{className:"header__title",children:"üß† Scenius"}),jsxRuntimeExports.jsx("span",{className:"header__tagline",children:"Mapping collective genius"})]}),jsxRuntimeExports.jsxs("div",{className:"header__controls",children:[h&&t&&jsxRuntimeExports.jsxs(Link,{to:`/${encodeURIComponent(t)}`,className:"header__back-link","aria-label":"Back to dataset overview",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),jsxRuntimeExports.jsx("span",{className:"header__back-label",children:"Back"})]}),h&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LayoutSwitcher,{currentLayout:p,onLayoutChange:d,selectedNodeId:a,className:"header__layout-switcher"}),jsxRuntimeExports.jsxs("div",{className:"header__dataset-group",children:[jsxRuntimeExports.jsx("span",{className:"header__dataset-label",children:"Dataset:"}),jsxRuntimeExports.jsx(SearchableDatasetSelector,{currentDatasetId:t,onSelect:r,isLoading:s==="loading"})]}),jsxRuntimeExports.jsx(SearchBox,{value:i,onChange:n,placeholder:"Highlight nodes...",resultCount:i?l:void 0})]}),jsxRuntimeExports.jsx(ThemeToggle,{}),jsxRuntimeExports.jsx(HeaderShareButtons,{})]})]})}function getTemporalRange$1(e){var t,r;return(t=e.scope)!=null&&t.startYear&&((r=e.scope)!=null&&r.endYear)?`${e.scope.startYear}‚Äì${e.scope.endYear}`:e.temporalScope?e.temporalScope.replace("-","‚Äì"):null}function getStartYear(e){var t;if((t=e.scope)!=null&&t.startYear)return e.scope.startYear;if(e.temporalScope){const r=e.temporalScope.match(/^(\d{4})/);if(r)return parseInt(r[1],10)}return 1/0}function DatasetTile({manifest:e,className:t=""}){const r=e.bannerEmoji||"‚ùì",s=getTemporalRange$1(e);return jsxRuntimeExports.jsxs(Link,{to:`/${e.id}`,className:`dataset-tile ${t}`,children:[jsxRuntimeExports.jsx("div",{className:"dataset-tile__emoji","aria-hidden":"true",children:r}),jsxRuntimeExports.jsx("h3",{className:"dataset-tile__name",children:e.name}),jsxRuntimeExports.jsx("p",{className:"dataset-tile__description",children:e.description}),jsxRuntimeExports.jsxs("div",{className:"dataset-tile__meta",children:[e.nodeCount!==void 0&&e.edgeCount!==void 0&&jsxRuntimeExports.jsxs("span",{className:"dataset-tile__stats",children:[e.nodeCount," nodes ¬∑ ",e.edgeCount," edges"]}),s&&jsxRuntimeExports.jsx("span",{className:"dataset-tile__dates",children:s})]})]})}function WikipediaIcon({size:e="medium"}){const r={small:14,medium:16,large:20}[e];return jsxRuntimeExports.jsx("svg",{className:"wikipedia-attribution__icon",width:r,height:r,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M12.09 13.119c-.936 1.932-2.217 4.548-2.853 5.728-.616 1.074-1.127.931-1.532.029-1.406-3.321-4.293-9.144-5.651-12.409-.251-.601-.441-.987-.619-1.139-.181-.15-.554-.24-1.122-.271C.103 5.033 0 4.982 0 4.898v-.455l.052-.045c.924-.005 5.401 0 5.401 0l.051.045v.434c0 .119-.075.176-.225.176l-.564.031c-.485.029-.727.164-.727.436 0 .135.053.33.166.601 1.082 2.646 4.818 10.521 4.818 10.521l.136.046 2.411-4.81-.482-1.067-1.658-3.264c-.189-.34-.316-.559-.378-.651-.103-.164-.339-.262-.71-.295l-.464-.033c-.181-.009-.272-.064-.272-.18V5.94l.054-.045h4.521l.054.045v.428c0 .105-.06.164-.18.176l-.455.033c-.391.015-.586.126-.586.334 0 .084.028.198.09.345l1.693 3.749 1.67-3.355c.105-.227.163-.399.163-.518 0-.254-.183-.39-.556-.408l-.558-.033c-.166-.009-.246-.064-.246-.176V5.94l.054-.045c.312.003 2.769 0 3.443 0l.054.045v.428c0 .119-.075.176-.21.176l-.328.031c-.308.015-.564.089-.756.227-.195.135-.375.345-.538.645l-2.592 5.093 2.872 5.769.134.046 4.587-10.305c.12-.271.18-.483.18-.636 0-.254-.195-.39-.583-.408l-.552-.033c-.166-.009-.246-.064-.246-.176V5.94l.054-.045c.312.003 2.629 0 3.307 0l.054.045v.428c0 .119-.075.176-.21.176l-.345.031c-.325.024-.586.115-.785.271-.198.153-.39.417-.571.79-2.034 4.271-5.541 11.648-5.541 11.648-.393.889-.871.937-1.37.074-.591-1.032-2.098-3.955-2.851-5.528l-.136-.046z"})})}function WikipediaAttribution({wikipediaUrl:e,variant:t="icon",size:r="medium"}){const s=sanitizeUrl(e);return t==="link"?jsxRuntimeExports.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"wikipedia-attribution wikipedia-attribution--link",title:"View on Wikipedia",children:[jsxRuntimeExports.jsx(WikipediaIcon,{size:r}),jsxRuntimeExports.jsx("span",{children:"Wikipedia"})]}):t==="inline"?jsxRuntimeExports.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"wikipedia-attribution wikipedia-attribution--inline",title:"Read more on Wikipedia",children:["Read more on Wikipedia",jsxRuntimeExports.jsx("svg",{className:"wikipedia-attribution__external",viewBox:"0 0 24 24",width:"12",height:"12",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"})})]}):jsxRuntimeExports.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"wikipedia-attribution wikipedia-attribution--icon",title:"Source: Wikipedia",children:jsxRuntimeExports.jsx(WikipediaIcon,{size:r})})}const KNOWN_NODE_FIELDS=new Set(["id","type","title","shortDescription","dateStart","dateEnd","imageUrl","externalLinks","wikipediaTitle","wikidataId","alternateNames","birthPlace","deathPlace","nationality","occupations","biography","objectType","creators","dateCreated","language","subject","locationType","coordinates","country","parentLocation","entityType","foundedBy","headquarters","members"]);function formatDate$3(e){if(!e)return"";if(/^\d{4}$/.test(e))return e;try{const t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{}return e}function getTypeBadgeClass$1(e){return`node-infobox__type-badge node-infobox__type-badge--${e}`}function NodeLink$1({nodeId:e,label:t,getNode:r,onClick:s}){const i=r(e),n=t??(i==null?void 0:i.title)??e;return jsxRuntimeExports.jsx("button",{className:"node-infobox__node-link",onClick:()=>s(e),title:i?`View ${i.title}`:`View ${e}`,children:n})}function ExternalLinksSection({links:e}){return e.length===0?null:jsxRuntimeExports.jsxs("section",{className:"node-infobox__section",children:[jsxRuntimeExports.jsx("h3",{className:"node-infobox__section-title",children:"External Links"}),jsxRuntimeExports.jsx("ul",{className:"node-infobox__external-links",children:e.map(t=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs("a",{href:sanitizeUrl(t.url),target:"_blank",rel:"noopener noreferrer",className:"node-infobox__external-link",children:[t.label,jsxRuntimeExports.jsx("svg",{className:"node-infobox__external-icon",viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"})})]})},t.url))})]})}function PropertyValue$1({value:e,getNode:t,onNodeLinkClick:r}){return e==null?jsxRuntimeExports.jsx("span",{className:"node-infobox__value--empty",children:"‚Äî"}):typeof e=="boolean"?jsxRuntimeExports.jsx("span",{children:e?"Yes":"No"}):typeof e=="number"?jsxRuntimeExports.jsx("span",{children:e.toLocaleString()}):typeof e=="string"?t(e)?jsxRuntimeExports.jsx(NodeLink$1,{nodeId:e,getNode:t,onClick:r}):jsxRuntimeExports.jsx("span",{children:e}):Array.isArray(e)?e.length===0?jsxRuntimeExports.jsx("span",{className:"node-infobox__value--empty",children:"‚Äî"}):jsxRuntimeExports.jsx("ul",{className:"node-infobox__list",children:e.map((s,i)=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(PropertyValue$1,{value:s,getNode:t,onNodeLinkClick:r})},typeof s=="string"||typeof s=="number"?`${s}`:`item-${i}`))}):typeof e=="object"?jsxRuntimeExports.jsx("div",{className:"node-infobox__nested",children:Object.entries(e).map(([s,i])=>jsxRuntimeExports.jsxs("div",{className:"node-infobox__nested-item",children:[jsxRuntimeExports.jsxs("span",{className:"node-infobox__nested-key",children:[formatPropertyKey$1(s),":"]}),jsxRuntimeExports.jsx("span",{className:"node-infobox__nested-value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:i,getNode:t,onNodeLinkClick:r})})]},s))}):jsxRuntimeExports.jsx("span",{children:String(e)})}function formatPropertyKey$1(e){return e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim()}function PersonFields({node:e,getNode:t,onNodeLinkClick:r}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e.alternateNames&&e.alternateNames.length>0&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Also Known As"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.alternateNames.join(", ")})]}),e.nationality&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Nationality"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.nationality})]}),e.occupations&&e.occupations.length>0&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Occupations"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.occupations.join(", ")})]}),e.birthPlace&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Birth Place"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:e.birthPlace,getNode:t,onNodeLinkClick:r})})]}),e.deathPlace&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Death Place"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:e.deathPlace,getNode:t,onNodeLinkClick:r})})]})]})}function ObjectFields({node:e,getNode:t,onNodeLinkClick:r}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e.objectType&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Object Type"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.objectType})]}),e.creators&&e.creators.length>0&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Creators"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:e.creators,getNode:t,onNodeLinkClick:r})})]}),e.dateCreated&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Date Created"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:formatDate$3(e.dateCreated)})]}),e.language&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Language"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.language})]}),e.subject&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Subject"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.subject})]})]})}function LocationFields({node:e,getNode:t,onNodeLinkClick:r}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e.locationType&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Location Type"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.locationType})]}),e.country&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Country"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.country})]}),e.parentLocation&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Parent Location"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:e.parentLocation,getNode:t,onNodeLinkClick:r})})]}),e.coordinates&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Coordinates"}),jsxRuntimeExports.jsxs("span",{className:"node-infobox__value",children:[e.coordinates.lat.toFixed(4),", ",e.coordinates.lng.toFixed(4)]})]})]})}function EntityFields({node:e,getNode:t,onNodeLinkClick:r}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e.entityType&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Entity Type"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.entityType})]}),e.foundedBy&&e.foundedBy.length>0&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Founded By"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:e.foundedBy,getNode:t,onNodeLinkClick:r})})]}),e.headquarters&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:"Headquarters"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:e.headquarters,getNode:t,onNodeLinkClick:r})})]}),e.members&&e.members.length>0&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field node-infobox__field--full",children:[jsxRuntimeExports.jsxs("span",{className:"node-infobox__label",children:["Members (",e.members.length,")"]}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:e.members,getNode:t,onNodeLinkClick:r})})]})]})}function formatRelationship$2(e){return e.replace(/_/g," ")}function RelationshipsSection({node:e,edges:t,getNode:r,onNodeLinkClick:s}){const i=[],n=t.filter(d=>d.source===e.id).map(d=>{const u=r(d.target);return u?{edge:d,isOutgoing:!0,otherNodeId:d.target,otherNodeTitle:u.title}:null}).filter(d=>d!==null).sort((d,u)=>d.otherNodeTitle.localeCompare(u.otherNodeTitle)),l=t.filter(d=>d.target===e.id).map(d=>{const u=r(d.source);return u?{edge:d,isOutgoing:!1,otherNodeId:d.source,otherNodeTitle:u.title}:null}).filter(d=>d!==null).sort((d,u)=>d.otherNodeTitle.localeCompare(u.otherNodeTitle));i.push(...n,...l);const p=i.slice(0,10);return p.length===0?null:jsxRuntimeExports.jsxs("section",{className:"node-infobox__section",children:[jsxRuntimeExports.jsx("h3",{className:"node-infobox__section-title",children:"Relationships"}),jsxRuntimeExports.jsx("ul",{className:"node-infobox__relationships-list",children:p.map(d=>jsxRuntimeExports.jsx("li",{children:d.isOutgoing?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__current-node",children:e.title})," ",formatRelationship$2(d.edge.relationship)," ",jsxRuntimeExports.jsx(NodeLink$1,{nodeId:d.otherNodeId,getNode:r,onClick:s})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(NodeLink$1,{nodeId:d.otherNodeId,getNode:r,onClick:s})," ",formatRelationship$2(d.edge.relationship)," ",jsxRuntimeExports.jsx("span",{className:"node-infobox__current-node",children:e.title})]})},d.edge.id))})]})}function getCustomProperties$1(e){return Object.entries(e).filter(([t])=>!KNOWN_NODE_FIELDS.has(t))}function NodeInfobox({node:e,edges:t,onNodeLinkClick:r,getNode:s}){const i=getCustomProperties$1(e),{enrichedData:n,handleImageError:l}=useNodeEnrichedData(e),[p,d]=reactExports.useState(!0);return reactExports.useEffect(()=>{d(!0)},[e.id,n.imageUrl]),jsxRuntimeExports.jsxs("div",{className:"node-infobox",children:[jsxRuntimeExports.jsxs("div",{className:"node-infobox__header",children:[jsxRuntimeExports.jsx("span",{className:getTypeBadgeClass$1(e.type),children:e.type}),n.imageUrl&&isValidImageUrl(n.imageUrl)&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__image-container",children:[p&&jsxRuntimeExports.jsx("div",{className:"node-infobox__image-loading","aria-label":"Loading image..."}),jsxRuntimeExports.jsx("img",{src:n.imageUrl,alt:e.title,className:`node-infobox__image ${p?"node-infobox__image--loading":"node-infobox__image--loaded"}`,onLoad:()=>d(!1),onError:()=>{d(!1),l()}}),n.imageSource==="wikipedia"&&n.wikipediaUrl&&!p&&jsxRuntimeExports.jsx("div",{className:"node-infobox__image-attribution",children:jsxRuntimeExports.jsx(WikipediaAttribution,{wikipediaUrl:n.wikipediaUrl,size:"small"})})]}),n.loading&&!n.imageUrl&&jsxRuntimeExports.jsx("div",{className:"node-infobox__image-loading","aria-label":"Loading image..."})]}),isPersonNode(e)&&e.biography&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__description-wrapper",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__section-title",children:"Network Biography"}),jsxRuntimeExports.jsx("p",{className:"node-infobox__biography",children:e.biography})]}),n.description&&n.descriptionSource==="wikipedia"?jsxRuntimeExports.jsxs("div",{className:"node-infobox__description-wrapper",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__section-title",children:"Wikipedia Biography"}),jsxRuntimeExports.jsx("p",{className:"node-infobox__description",children:n.description}),n.wikipediaUrl&&jsxRuntimeExports.jsx(WikipediaAttribution,{wikipediaUrl:n.wikipediaUrl,variant:"inline"})]}):n.description?jsxRuntimeExports.jsx("div",{className:"node-infobox__description-wrapper",children:jsxRuntimeExports.jsx("p",{className:"node-infobox__description",children:n.description})}):e.shortDescription?jsxRuntimeExports.jsx("p",{className:"node-infobox__description",children:e.shortDescription}):null,jsxRuntimeExports.jsx("section",{className:"node-infobox__section",children:(e.dateStart||e.dateEnd)&&jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:e.type==="person"?"Lifespan":"Dates"}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:e.dateStart&&e.dateEnd?`${formatDate$3(e.dateStart)} ‚Äì ${formatDate$3(e.dateEnd)}`:e.dateStart?formatDate$3(e.dateStart):formatDate$3(e.dateEnd)})]})}),jsxRuntimeExports.jsxs("section",{className:"node-infobox__section",children:[isPersonNode(e)&&jsxRuntimeExports.jsx(PersonFields,{node:e,getNode:s,onNodeLinkClick:r}),isObjectNode(e)&&jsxRuntimeExports.jsx(ObjectFields,{node:e,getNode:s,onNodeLinkClick:r}),isLocationNode(e)&&jsxRuntimeExports.jsx(LocationFields,{node:e,getNode:s,onNodeLinkClick:r}),isEntityNode(e)&&jsxRuntimeExports.jsx(EntityFields,{node:e,getNode:s,onNodeLinkClick:r})]}),t.length>0&&jsxRuntimeExports.jsx(RelationshipsSection,{node:e,edges:t,getNode:s,onNodeLinkClick:r}),e.externalLinks&&e.externalLinks.length>0&&jsxRuntimeExports.jsx(ExternalLinksSection,{links:e.externalLinks}),i.length>0&&jsxRuntimeExports.jsxs("section",{className:"node-infobox__section",children:[jsxRuntimeExports.jsx("h3",{className:"node-infobox__section-title",children:"Additional Properties"}),i.map(([u,a])=>jsxRuntimeExports.jsxs("div",{className:"node-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"node-infobox__label",children:formatPropertyKey$1(u)}),jsxRuntimeExports.jsx("span",{className:"node-infobox__value",children:jsxRuntimeExports.jsx(PropertyValue$1,{value:a,getNode:s,onNodeLinkClick:r})})]},u))]})]})}const KNOWN_EDGE_FIELDS=new Set(["id","source","target","relationship","label","dateStart","dateEnd","evidence","evidenceNodeId","evidenceUrl","directed","strength"]);function formatDate$2(e){if(!e)return"";if(/^\d{4}$/.test(e))return e;try{const t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{}return e}function formatRelationship$1(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function formatPropertyKey(e){return e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim()}function getStrengthColor$1(e){switch(e){case"strong":return"#10b981";case"moderate":return"#3b82f6";case"weak":return"#f59e0b";case"speculative":return"#ef4444";default:return"#6b7280"}}function NodeLink({nodeId:e,getNode:t,onClick:r}){const s=t(e),i=(s==null?void 0:s.title)??e,n=s==null?void 0:s.type;return jsxRuntimeExports.jsx("button",{className:`edge-infobox__node-link ${n?`edge-infobox__node-link--${n}`:""}`,onClick:()=>r(e),title:`View ${i}${n?` (${n})`:""}`,children:jsxRuntimeExports.jsx("span",{className:"edge-infobox__node-link-title",children:i})})}function EvidenceSection({edge:e,getNode:t,onNodeLinkClick:r}){return hasEvidence(e)?jsxRuntimeExports.jsxs("div",{className:"edge-infobox__evidence",children:[jsxRuntimeExports.jsxs("div",{className:"edge-infobox__evidence-header",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("span",{children:"Evidence"})]}),e.evidence&&jsxRuntimeExports.jsx("p",{className:"edge-infobox__evidence-text",children:e.evidence}),e.evidenceNodeId&&jsxRuntimeExports.jsxs("div",{className:"edge-infobox__evidence-node",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__evidence-label",children:"Source:"}),jsxRuntimeExports.jsx(NodeLink,{nodeId:e.evidenceNodeId,getNode:t,onClick:r})]}),e.evidenceUrl&&jsxRuntimeExports.jsxs("div",{className:"edge-infobox__evidence-url",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__evidence-label",children:"Reference:"}),jsxRuntimeExports.jsxs("a",{href:sanitizeUrl(e.evidenceUrl),target:"_blank",rel:"noopener noreferrer",className:"edge-infobox__external-link",children:["View Source",jsxRuntimeExports.jsx("svg",{className:"edge-infobox__external-icon",viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"})})]})]})]}):jsxRuntimeExports.jsx("div",{className:"edge-infobox__evidence edge-infobox__evidence--none",children:jsxRuntimeExports.jsxs("div",{className:"edge-infobox__evidence-header",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M12 8v4m0 4h.01"})]}),jsxRuntimeExports.jsx("span",{children:"No Evidence Provided"})]})})}function PropertyValue({value:e}){return e==null?jsxRuntimeExports.jsx("span",{className:"edge-infobox__value--empty",children:"‚Äî"}):typeof e=="boolean"?jsxRuntimeExports.jsx("span",{children:e?"Yes":"No"}):typeof e=="number"?jsxRuntimeExports.jsx("span",{children:e.toLocaleString()}):typeof e=="string"?jsxRuntimeExports.jsx("span",{children:e}):Array.isArray(e)?e.length===0?jsxRuntimeExports.jsx("span",{className:"edge-infobox__value--empty",children:"‚Äî"}):jsxRuntimeExports.jsx("ul",{className:"edge-infobox__list",children:e.map((t,r)=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(PropertyValue,{value:t})},typeof t=="string"||typeof t=="number"?`${t}`:`item-${r}`))}):typeof e=="object"?jsxRuntimeExports.jsx("div",{className:"edge-infobox__nested",children:Object.entries(e).map(([t,r])=>jsxRuntimeExports.jsxs("div",{className:"edge-infobox__nested-item",children:[jsxRuntimeExports.jsxs("span",{className:"edge-infobox__nested-key",children:[formatPropertyKey(t),":"]}),jsxRuntimeExports.jsx("span",{className:"edge-infobox__nested-value",children:jsxRuntimeExports.jsx(PropertyValue,{value:r})})]},t))}):jsxRuntimeExports.jsx("span",{children:String(e)})}function getCustomProperties(e){return Object.entries(e).filter(([t])=>!KNOWN_EDGE_FIELDS.has(t))}function formatEdgeDescription$1(e,t){var n,l;const r=((n=t(e.source))==null?void 0:n.title)??e.source,s=((l=t(e.target))==null?void 0:l.title)??e.target,i=e.relationship.replace(/_/g," ");return`${r} ${i} ${s}`}function EdgeInfobox({edge:e,onNodeLinkClick:t,getNode:r}){const s=getCustomProperties(e),i=getEdgeLabel(e);return jsxRuntimeExports.jsxs("div",{className:"edge-infobox",children:[jsxRuntimeExports.jsxs("div",{className:"edge-infobox__header",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__relationship-badge",children:formatRelationship$1(e.relationship)}),e.label&&e.label!==i&&jsxRuntimeExports.jsx("span",{className:"edge-infobox__label",children:e.label})]}),jsxRuntimeExports.jsx("p",{className:"edge-infobox__description",children:formatEdgeDescription$1(e,r)}),jsxRuntimeExports.jsxs("div",{className:"edge-infobox__connection",children:[jsxRuntimeExports.jsxs("div",{className:"edge-infobox__connection-node",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__connection-label",children:"From"}),jsxRuntimeExports.jsx(NodeLink,{nodeId:e.source,getNode:r,onClick:t})]}),jsxRuntimeExports.jsx("div",{className:"edge-infobox__connection-arrow",children:e.directed===!1?jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M8 12h8M8 12l3-3M8 12l3 3M16 12l-3-3M16 12l-3 3"})}):jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M5 12h14M13 5l7 7-7 7"})})}),jsxRuntimeExports.jsxs("div",{className:"edge-infobox__connection-node",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__connection-label",children:"To"}),jsxRuntimeExports.jsx(NodeLink,{nodeId:e.target,getNode:r,onClick:t})]})]}),jsxRuntimeExports.jsxs("section",{className:"edge-infobox__section",children:[(e.dateStart||e.dateEnd)&&jsxRuntimeExports.jsxs("div",{className:"edge-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__field-label",children:"Time Period"}),jsxRuntimeExports.jsx("span",{className:"edge-infobox__field-value",children:e.dateStart&&e.dateEnd?`${formatDate$2(e.dateStart)} ‚Äì ${formatDate$2(e.dateEnd)}`:e.dateStart?`From ${formatDate$2(e.dateStart)}`:`Until ${formatDate$2(e.dateEnd)}`})]}),e.strength&&jsxRuntimeExports.jsxs("div",{className:"edge-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__field-label",children:"Strength"}),jsxRuntimeExports.jsx("span",{className:"edge-infobox__strength-badge",style:{backgroundColor:getStrengthColor$1(e.strength)},children:e.strength})]}),jsxRuntimeExports.jsxs("div",{className:"edge-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__field-label",children:"Direction"}),jsxRuntimeExports.jsx("span",{className:"edge-infobox__field-value",children:e.directed===!1?"Bidirectional":"Directed"})]})]}),jsxRuntimeExports.jsx(EvidenceSection,{edge:e,getNode:r,onNodeLinkClick:t}),s.length>0&&jsxRuntimeExports.jsxs("section",{className:"edge-infobox__section",children:[jsxRuntimeExports.jsx("h3",{className:"edge-infobox__section-title",children:"Additional Properties"}),s.map(([n,l])=>jsxRuntimeExports.jsxs("div",{className:"edge-infobox__field",children:[jsxRuntimeExports.jsx("span",{className:"edge-infobox__field-label",children:formatPropertyKey(n)}),jsxRuntimeExports.jsx("span",{className:"edge-infobox__field-value",children:jsxRuntimeExports.jsx(PropertyValue,{value:l})})]},n))]})]})}function isNode$1(e){return"type"in e&&typeof e.type=="string"&&["person","object","location","entity"].includes(e.type)}function isEdge$1(e){return"relationship"in e&&"source"in e&&"target"in e}function InfoboxPanel({className:e=""}){const{selectedItem:t,clearSelection:r,selectNode:s,getNode:i,getEdgesForNode:n,graphData:l,currentDatasetId:p}=useGraph();reactExports.useEffect(()=>{const j=R=>{if(R.key==="Escape"&&t){const b=document.activeElement;b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement||b instanceof HTMLSelectElement||r()}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[t,r]);const d=j=>{s(j)};if(!t)return null;const u=()=>isNode$1(t)?t.title:isEdge$1(t)?t.label??t.relationship.split("_").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" "):"Details",h=p?isNode$1(t)?`/${encodeURIComponent(p)}/node/${encodeURIComponent(t.id)}`:isEdge$1(t)?`/${encodeURIComponent(p)}/edge/${encodeURIComponent(t.source)}/${encodeURIComponent(t.target)}`:null:null;return jsxRuntimeExports.jsxs("aside",{className:`infobox-panel ${e}`,"aria-label":"Details panel",children:[jsxRuntimeExports.jsxs("div",{className:"infobox-panel__header",children:[jsxRuntimeExports.jsxs("h2",{className:"infobox-panel__title",title:u(),children:[isNode$1(t)&&jsxRuntimeExports.jsx("span",{className:"infobox-panel__title-emoji",role:"img","aria-label":`${t.type} icon`,children:getNodeTypeEmoji(t.type)}),jsxRuntimeExports.jsx("span",{className:"infobox-panel__title-text",children:u()}),h&&jsxRuntimeExports.jsx(Link,{to:h,className:"infobox-panel__title-link","aria-label":`View ${u()} detail page`,title:"View detail page",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"})})})]}),jsxRuntimeExports.jsx("button",{className:"infobox-panel__close-button",onClick:r,"aria-label":"Close details panel",title:"Close",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),jsxRuntimeExports.jsxs("div",{className:"infobox-panel__content",children:[isNode$1(t)&&jsxRuntimeExports.jsx(NodeInfobox,{node:t,edges:n(t.id),onNodeLinkClick:d,getNode:i}),isEdge$1(t)&&l&&jsxRuntimeExports.jsx(EdgeInfobox,{edge:t,onNodeLinkClick:d,getNode:i,nodes:l.nodes})]})]})}function CheckboxFilterGroup({label:e,options:t,selected:r,onChange:s,showSelectAll:i=!0,variant:n="inline",maxHeight:l=200}){const[p,d]=reactExports.useState(!1),u=reactExports.useRef(null),a=r===null,h=t.map(U=>U.value),j=a?t.length:(r==null?void 0:r.length)??0;reactExports.useEffect(()=>{if(n!=="dropdown"||!p)return;const U=D=>{u.current&&!u.current.contains(D.target)&&d(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[n,p]);const R=reactExports.useCallback(U=>{if(a)s(h.filter(D=>D!==U));else if(r.includes(U)){const D=r.filter(q=>q!==U);s(D.length===0?[]:D)}else{const D=[...r,U];D.length===h.length?s(null):s(D)}},[a,h,r,s]),b=reactExports.useCallback(()=>{s(null)},[s]),C=reactExports.useCallback(()=>{d(U=>!U)},[]),S=U=>a||((r==null?void 0:r.includes(U))??!1),I=()=>{if(a)return"All";if(j===0)return"None";if(j===1&&r){const U=t.find(D=>D.value===r[0]);return(U==null?void 0:U.label)??"1 selected"}return`${j} selected`},G=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[i&&jsxRuntimeExports.jsxs("label",{className:"checkbox-filter-group__option checkbox-filter-group__option--all",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:a,onChange:b,"aria-label":"Select all"}),jsxRuntimeExports.jsx("span",{className:"checkbox-filter-group__option-text",children:"All"})]}),t.map(U=>jsxRuntimeExports.jsxs("label",{className:"checkbox-filter-group__option",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:S(U.value),onChange:()=>R(U.value),"aria-label":U.label}),jsxRuntimeExports.jsxs("span",{className:"checkbox-filter-group__option-text",children:[U.label,U.count!==void 0&&jsxRuntimeExports.jsxs("span",{className:"checkbox-filter-group__count",children:["(",U.count,")"]})]})]},U.value))]});return n==="dropdown"?jsxRuntimeExports.jsxs("div",{className:"checkbox-filter-group checkbox-filter-group--dropdown",ref:u,children:[jsxRuntimeExports.jsxs("button",{type:"button",className:`checkbox-filter-group__dropdown-trigger ${p?"checkbox-filter-group__dropdown-trigger--open":""}`,onClick:C,"aria-expanded":p,"aria-haspopup":"listbox",children:[jsxRuntimeExports.jsx("span",{className:"checkbox-filter-group__dropdown-label",children:e}),jsxRuntimeExports.jsx("span",{className:"checkbox-filter-group__dropdown-summary",children:I()}),jsxRuntimeExports.jsx("svg",{className:"checkbox-filter-group__dropdown-chevron",viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),p&&jsxRuntimeExports.jsx("div",{className:"checkbox-filter-group__dropdown-content",style:{maxHeight:`${l}px`},role:"listbox","aria-label":e,children:G()})]}):jsxRuntimeExports.jsxs("div",{className:"checkbox-filter-group",children:[jsxRuntimeExports.jsx("label",{className:"checkbox-filter-group__label",children:e}),jsxRuntimeExports.jsx("div",{className:"checkbox-filter-group__options",children:G()})]})}const DEBOUNCE_DELAY=300;function formatRelationshipLabel(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function FilterPanel({filters:e,onFiltersChange:t,onClearFilters:r,stats:s,dateRange:i,nodeTypeCounts:n,relationshipTypeCounts:l,isCollapsed:p=!1,onToggleCollapse:d}){const[u,a]=reactExports.useState(e.dateStart!==null?String(e.dateStart):""),[h,j]=reactExports.useState(e.dateEnd!==null?String(e.dateEnd):""),[R,b]=reactExports.useState(e.nameFilter),C=useDebounce(R,DEBOUNCE_DELAY);reactExports.useEffect(()=>{C!==e.nameFilter&&t({nameFilter:C})},[C,e.nameFilter,t]),reactExports.useEffect(()=>{e.nameFilter===""&&b("")},[e.nameFilter]),reactExports.useEffect(()=>{var ee,J;const M=((ee=document.activeElement)==null?void 0:ee.id)==="filter-date-start",T=((J=document.activeElement)==null?void 0:J.id)==="filter-date-end";M||a(e.dateStart!==null?String(e.dateStart):""),T||j(e.dateEnd!==null?String(e.dateEnd):"")},[e.dateStart,e.dateEnd]);const S=hasActiveFilters(e),I=reactExports.useMemo(()=>[{value:"person",label:"Person",count:(n==null?void 0:n.person)??0},{value:"object",label:"Object",count:(n==null?void 0:n.object)??0},{value:"location",label:"Location",count:(n==null?void 0:n.location)??0},{value:"entity",label:"Entity",count:(n==null?void 0:n.entity)??0}],[n]),G=reactExports.useMemo(()=>l?Object.entries(l).sort(([M],[T])=>M.localeCompare(T)).map(([M,T])=>({value:M,label:formatRelationshipLabel(M),count:T})):[],[l]),U=reactExports.useCallback(M=>{t({nodeTypes:M})},[t]),D=reactExports.useCallback(M=>{t({relationshipTypes:M})},[t]),q=reactExports.useCallback(M=>{a(M.target.value)},[]),F=reactExports.useCallback(()=>{const M=u.trim();if(M==="")t({dateStart:null});else{const T=parseInt(M,10);isNaN(T)||t({dateStart:T})}},[u,t]),le=reactExports.useCallback(M=>{j(M.target.value)},[]),Z=reactExports.useCallback(()=>{const M=h.trim();if(M==="")t({dateEnd:null});else{const T=parseInt(M,10);isNaN(T)||t({dateEnd:T})}},[h,t]),V=reactExports.useCallback(M=>{b(M.target.value)},[]),K=reactExports.useCallback(()=>{a(""),j(""),b(""),r()},[r]),A=reactExports.useCallback((M,T)=>{M.key==="Enter"&&(T(),M.currentTarget.blur())},[]);return jsxRuntimeExports.jsxs("div",{className:`filter-panel ${p?"filter-panel--collapsed":""}`,children:[jsxRuntimeExports.jsxs("button",{className:"filter-panel__toggle",onClick:d,"aria-expanded":!p,"aria-label":p?"Expand filters":"Collapse filters",title:p?"Expand filters":"Collapse filters",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"filter-panel__toggle-icon",children:jsxRuntimeExports.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),!p&&jsxRuntimeExports.jsx("span",{children:"Filters"}),S&&jsxRuntimeExports.jsx("span",{className:"filter-panel__active-badge","aria-label":"Filters active"}),jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",className:`filter-panel__chevron ${p?"filter-panel__chevron--collapsed":""}`,"aria-hidden":"true",children:jsxRuntimeExports.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),!p&&jsxRuntimeExports.jsxs("div",{className:"filter-panel__content",children:[jsxRuntimeExports.jsx("div",{className:"filter-panel__section",children:jsxRuntimeExports.jsx(CheckboxFilterGroup,{label:"Node Types",options:I,selected:e.nodeTypes,onChange:U,showSelectAll:!0})}),jsxRuntimeExports.jsxs("div",{className:"filter-panel__section",children:[jsxRuntimeExports.jsx("label",{className:"filter-panel__section-label",children:"Date Range"}),i&&(i.minYear!==null||i.maxYear!==null)&&jsxRuntimeExports.jsxs("div",{className:"filter-panel__date-hint",children:["Data spans ",i.minYear??"?"," - ",i.maxYear??"?"]}),jsxRuntimeExports.jsxs("div",{className:"filter-panel__date-inputs",children:[jsxRuntimeExports.jsxs("div",{className:"filter-panel__input-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:"filter-date-start",className:"filter-panel__input-label",children:"No earlier than"}),jsxRuntimeExports.jsx("input",{id:"filter-date-start",type:"number",className:"filter-panel__input filter-panel__input--year",placeholder:"Year",value:u,onChange:q,onBlur:F,onKeyDown:M=>A(M,F),"aria-describedby":"date-start-hint"})]}),jsxRuntimeExports.jsxs("div",{className:"filter-panel__input-group",children:[jsxRuntimeExports.jsx("label",{htmlFor:"filter-date-end",className:"filter-panel__input-label",children:"No later than"}),jsxRuntimeExports.jsx("input",{id:"filter-date-end",type:"number",className:"filter-panel__input filter-panel__input--year",placeholder:"Year",value:h,onChange:le,onBlur:Z,onKeyDown:M=>A(M,Z),"aria-describedby":"date-end-hint"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"filter-panel__section",children:jsxRuntimeExports.jsxs("div",{className:"filter-panel__input-group",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"filter-name",className:"filter-panel__section-label",children:[jsxRuntimeExports.jsx("span",{className:"filter-panel__label-icon","aria-hidden":"true",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z"})})}),"Name"]}),jsxRuntimeExports.jsx("input",{id:"filter-name",type:"text",className:"filter-panel__input",placeholder:"Filter by name...",value:R,onChange:V,"aria-describedby":"name-filter-hint",title:"Hides nodes that don't match"}),jsxRuntimeExports.jsx("span",{id:"name-filter-hint",className:"filter-panel__hint",children:"Hides non-matching nodes"})]})}),G.length>0&&jsxRuntimeExports.jsx("div",{className:"filter-panel__section filter-panel__section--dropdown",children:jsxRuntimeExports.jsx(CheckboxFilterGroup,{label:"Relationship Types",options:G,selected:e.relationshipTypes,onChange:D,showSelectAll:!0,variant:"dropdown",maxHeight:250})}),s&&jsxRuntimeExports.jsxs("div",{className:"filter-panel__stats",children:[jsxRuntimeExports.jsxs("div",{className:"filter-panel__stat",children:[jsxRuntimeExports.jsx("span",{className:"filter-panel__stat-label",children:"Nodes:"}),jsxRuntimeExports.jsxs("span",{className:"filter-panel__stat-value",children:[s.filteredNodes,s.filteredNodes!==s.totalNodes&&jsxRuntimeExports.jsxs("span",{className:"filter-panel__stat-total",children:[" / ",s.totalNodes]})]})]}),jsxRuntimeExports.jsxs("div",{className:"filter-panel__stat",children:[jsxRuntimeExports.jsx("span",{className:"filter-panel__stat-label",children:"Edges:"}),jsxRuntimeExports.jsxs("span",{className:"filter-panel__stat-value",children:[s.filteredEdges,s.filteredEdges!==s.totalEdges&&jsxRuntimeExports.jsxs("span",{className:"filter-panel__stat-total",children:[" / ",s.totalEdges]})]})]})]}),S&&jsxRuntimeExports.jsxs("button",{className:"filter-panel__clear-btn",onClick:K,children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Clear Filters"]})]})]})}class ErrorBoundary extends reactExports.Component{constructor(){super(...arguments);ne(this,"state",{hasError:!1,error:null});ne(this,"handleReload",()=>{window.location.reload()});ne(this,"handleReset",()=>{this.setState({hasError:!1,error:null})})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error("ErrorBoundary caught an error:",r),console.error("Component stack:",s.componentStack)}render(){var r;return this.state.hasError?this.props.fallback?this.props.fallback:jsxRuntimeExports.jsx("div",{className:"error-boundary",children:jsxRuntimeExports.jsxs("div",{className:"error-boundary__content",children:[jsxRuntimeExports.jsxs("svg",{className:"error-boundary__icon",viewBox:"0 0 24 24",width:"48",height:"48",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),jsxRuntimeExports.jsx("h2",{className:"error-boundary__title",children:"Something went wrong"}),jsxRuntimeExports.jsx("p",{className:"error-boundary__message",children:((r=this.state.error)==null?void 0:r.message)||"An unexpected error occurred"}),jsxRuntimeExports.jsxs("div",{className:"error-boundary__actions",children:[jsxRuntimeExports.jsx("button",{className:"error-boundary__button error-boundary__button--primary",onClick:this.handleReload,children:"Reload Page"}),jsxRuntimeExports.jsx("button",{className:"error-boundary__button error-boundary__button--secondary",onClick:this.handleReset,children:"Try Again"})]})]})}):this.props.children}}const PRODUCTION_BASE_URL$1="https://moxious.github.io/historynet",DEFAULT_IMAGE=`${PRODUCTION_BASE_URL$1}/favicon.svg`,APP_NAME="Scenius";function ensureAbsoluteImageUrl(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${PRODUCTION_BASE_URL$1}${e}`:`${PRODUCTION_BASE_URL$1}/${e}`:DEFAULT_IMAGE}function ResourceMeta({title:e,description:t,datasetName:r,imageUrl:s,canonicalUrl:i,ogType:n="article",publishedDate:l}){const p=`${e} | ${r} | ${APP_NAME}`,d=t||`View ${e} in the ${r} network on ${APP_NAME}`,u=ensureAbsoluteImageUrl(s),a=i||window.location.href;return jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:p}),jsxRuntimeExports.jsx("meta",{name:"description",content:d}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:n}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:a}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:p}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:d}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:u}),jsxRuntimeExports.jsx("meta",{property:"og:image:alt",content:e}),jsxRuntimeExports.jsx("meta",{property:"og:site_name",content:APP_NAME}),jsxRuntimeExports.jsx("meta",{property:"og:locale",content:"en_US"}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:url",content:a}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:p}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:d}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:u}),jsxRuntimeExports.jsx("meta",{name:"twitter:image:alt",content:e}),l&&jsxRuntimeExports.jsx("meta",{property:"article:published_time",content:l}),jsxRuntimeExports.jsx("meta",{property:"article:author",content:"Scenius Contributors"}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:a})]})}const PRODUCTION_BASE_URL="https://moxious.github.io/historynet";function buildNodeUrl(e,t){return`${PRODUCTION_BASE_URL}/#/${e}/node/${t}`}function generatePersonSchema(e,t){const r={"@context":"https://schema.org","@type":"Person","@id":buildNodeUrl(t,e.id),name:e.title};return e.shortDescription&&(r.description=e.shortDescription),e.biography&&(r.description=e.biography),e.dateStart&&(r.birthDate=e.dateStart),e.dateEnd&&(r.deathDate=e.dateEnd),e.nationality&&(r.nationality=e.nationality),e.imageUrl&&(r.image=e.imageUrl),e.occupations&&e.occupations.length>0&&(r.jobTitle=e.occupations.join(", ")),e.alternateNames&&e.alternateNames.length>0&&(r.alternateName=e.alternateNames),e.externalLinks&&e.externalLinks.length>0&&(r.sameAs=e.externalLinks.map(s=>s.url)),r}function generateCreativeWorkSchema(e,t){const r={"@context":"https://schema.org","@type":"CreativeWork","@id":buildNodeUrl(t,e.id),name:e.title};return e.shortDescription&&(r.description=e.shortDescription),(e.dateCreated||e.dateStart)&&(r.dateCreated=e.dateCreated||e.dateStart),e.language&&(r.inLanguage=e.language),e.imageUrl&&(r.image=e.imageUrl),e.objectType&&(r.additionalType=e.objectType),e.subject&&(r.about=e.subject),e.externalLinks&&e.externalLinks.length>0&&(r.sameAs=e.externalLinks.map(s=>s.url)),r}function generatePlaceSchema(e,t){const r={"@context":"https://schema.org","@type":"Place","@id":buildNodeUrl(t,e.id),name:e.title};return e.shortDescription&&(r.description=e.shortDescription),e.country&&(r.addressCountry=e.country),e.coordinates&&(r.geo={"@type":"GeoCoordinates",latitude:e.coordinates.lat,longitude:e.coordinates.lng}),e.imageUrl&&(r.image=e.imageUrl),e.locationType&&(r.additionalType=e.locationType),e.externalLinks&&e.externalLinks.length>0&&(r.sameAs=e.externalLinks.map(s=>s.url)),r}function generateOrganizationSchema(e,t){const r={"@context":"https://schema.org","@type":"Organization","@id":buildNodeUrl(t,e.id),name:e.title};return e.shortDescription&&(r.description=e.shortDescription),e.dateStart&&(r.foundingDate=e.dateStart),e.dateEnd&&(r.dissolutionDate=e.dateEnd),e.imageUrl&&(r.image=e.imageUrl),e.entityType&&(r.additionalType=e.entityType),e.externalLinks&&e.externalLinks.length>0&&(r.sameAs=e.externalLinks.map(s=>s.url)),r}function generateItemPageSchema(e,t,r,s){return{"@context":"https://schema.org","@type":"ItemPage","@id":buildNodeUrl(t,r),name:e.name,description:e.description,mainEntity:{"@id":e["@id"]},isPartOf:{"@type":"WebSite",name:"Scenius",url:PRODUCTION_BASE_URL},breadcrumb:{"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:PRODUCTION_BASE_URL},{"@type":"ListItem",position:2,name:s,item:`${PRODUCTION_BASE_URL}/#/${encodeURIComponent(t)}`},{"@type":"ListItem",position:3,name:e.name,item:buildNodeUrl(t,r)}]}}}function generateMainEntitySchema(e,t){return isPersonNode(e)?generatePersonSchema(e,t):isObjectNode(e)?generateCreativeWorkSchema(e,t):isLocationNode(e)?generatePlaceSchema(e,t):generateOrganizationSchema(e,t)}function SchemaOrg({node:e,datasetId:t,datasetName:r}){const s=generateMainEntitySchema(e,t),i=generateItemPageSchema(s,t,e.id,r);return jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("script",{type:"application/ld+json",children:JSON.stringify(s)}),jsxRuntimeExports.jsx("script",{type:"application/ld+json",children:JSON.stringify(i)})]})}const SNAP_HEIGHTS={peek:100,expanded:.6},FLICK_VELOCITY_THRESHOLD=.5,DRAG_THRESHOLD=50;function BottomSheet({isOpen:e,onClose:t,title:r,titleText:s,children:i,initialState:n="peek",className:l=""}){const p=reactExports.useRef(null),d=reactExports.useRef(null),[u,a]=reactExports.useState("hidden"),[h,j]=reactExports.useState(0),[R,b]=reactExports.useState(!1),C=reactExports.useRef(0),S=reactExports.useRef(0),I=reactExports.useRef(0),G=reactExports.useRef("hidden"),U=reactExports.useCallback(K=>K==="hidden"?0:K==="peek"?SNAP_HEIGHTS.peek:window.innerHeight*SNAP_HEIGHTS.expanded,[]);reactExports.useEffect(()=>{e&&u==="hidden"?a(n):!e&&u!=="hidden"&&a("hidden")},[e,n,u]),reactExports.useEffect(()=>{j(0)},[u]);const D=reactExports.useCallback(K=>{var M;const A=K.target;(M=d.current)!=null&&M.contains(A)&&u==="expanded"&&d.current.scrollTop>0||(C.current=K.touches[0].clientY,S.current=Date.now(),I.current=C.current,G.current=u,b(!0))},[u]),q=reactExports.useCallback(K=>{if(!R)return;I.current=K.touches[0].clientY;const A=I.current-C.current;u==="expanded"&&d.current&&d.current.scrollTop>0&&A<0||j(A)},[R,u]),F=reactExports.useCallback(()=>{if(!R)return;b(!1);const K=I.current-C.current,A=Date.now()-S.current,M=K/A;let T=u;Math.abs(M)>FLICK_VELOCITY_THRESHOLD?M>0?u==="expanded"?T="peek":u==="peek"&&(T="hidden",t()):u==="peek"&&(T="expanded"):Math.abs(K)>DRAG_THRESHOLD&&(K>0?u==="expanded"?T="peek":u==="peek"&&(T="hidden",t()):u==="peek"&&(T="expanded")),a(T),j(0)},[R,u,t]),le=reactExports.useCallback(()=>{a("hidden"),t()},[t]),Z=U(u),V=u==="hidden"?"100%":`calc(100% - ${Z+h}px)`;return u==="hidden"&&!R?null:jsxRuntimeExports.jsxs("div",{ref:p,className:`bottom-sheet ${u!=="hidden"?"bottom-sheet--visible":""} ${R?"bottom-sheet--dragging":""} ${l}`,style:{transform:`translateY(${V})`,height:u==="expanded"?`${SNAP_HEIGHTS.expanded*100}%`:"auto"},onTouchStart:D,onTouchMove:q,onTouchEnd:F,role:"dialog","aria-modal":"true","aria-label":s||(typeof r=="string"?r:"Details"),children:[jsxRuntimeExports.jsx("div",{className:"bottom-sheet__handle-area",children:jsxRuntimeExports.jsx("div",{className:"bottom-sheet__handle","aria-hidden":"true"})}),jsxRuntimeExports.jsxs("div",{className:"bottom-sheet__header",children:[jsxRuntimeExports.jsx("h2",{className:"bottom-sheet__title",title:s||(typeof r=="string"?r:void 0),children:r||"Details"}),jsxRuntimeExports.jsx("button",{className:"bottom-sheet__close",onClick:le,"aria-label":"Close",type:"button",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("div",{ref:d,className:"bottom-sheet__content",style:{maxHeight:u==="expanded"?`calc(${SNAP_HEIGHTS.expanded*100}vh - 100px)`:`${SNAP_HEIGHTS.peek-60}px`,overflowY:u==="expanded"?"auto":"hidden"},children:i})]})}function isNode(e){return"type"in e&&typeof e.type=="string"&&["person","object","location","entity"].includes(e.type)}function isEdge(e){return"relationship"in e&&"source"in e&&"target"in e}function MobileInfoboxPanel(){const{selectedItem:e,clearSelection:t,selectNode:r,getNode:s,getEdgesForNode:i,graphData:n,currentDatasetId:l}=useGraph(),p=R=>{r(R)},d=()=>e?isNode(e)?e.title:isEdge(e)?e.label??e.relationship.split("_").map(R=>R.charAt(0).toUpperCase()+R.slice(1)).join(" "):"Details":"Details",u=()=>!l||!e?null:isNode(e)?`/${encodeURIComponent(l)}/node/${encodeURIComponent(e.id)}`:isEdge(e)?`/${encodeURIComponent(l)}/edge/${encodeURIComponent(e.source)}/${encodeURIComponent(e.target)}`:null,a=d(),h=u(),j=()=>e?jsxRuntimeExports.jsxs("span",{className:"mobile-infobox-panel__title",children:[isNode(e)&&jsxRuntimeExports.jsx("span",{className:"mobile-infobox-panel__title-emoji",role:"img","aria-label":`${e.type} icon`,children:getNodeTypeEmoji(e.type)}),jsxRuntimeExports.jsx("span",{className:"mobile-infobox-panel__title-text",children:a}),h&&jsxRuntimeExports.jsx(Link,{to:h,className:"mobile-infobox-panel__title-link","aria-label":`View ${a} detail page`,title:"View detail page",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"})})})]}):"Details";return jsxRuntimeExports.jsx(BottomSheet,{isOpen:!!e,onClose:t,title:j(),titleText:a,initialState:"peek",className:"mobile-infobox-panel",children:e&&jsxRuntimeExports.jsxs("div",{className:"mobile-infobox-panel__content",children:[isNode(e)&&jsxRuntimeExports.jsx(NodeInfobox,{node:e,edges:i(e.id),onNodeLinkClick:p,getNode:s}),isEdge(e)&&n&&jsxRuntimeExports.jsx(EdgeInfobox,{edge:e,onNodeLinkClick:p,getNode:s,nodes:n.nodes})]})})}const SWIPE_THRESHOLD=100,FLICK_VELOCITY=.5;function Drawer({isOpen:e,onClose:t,title:r,children:s,width:i=300,className:n=""}){const l=reactExports.useRef(null),p=reactExports.useRef(null),[d,u]=reactExports.useState(0),[a,h]=reactExports.useState(!1),j=reactExports.useRef(0),R=reactExports.useRef(0),b=reactExports.useRef(0);reactExports.useEffect(()=>{const D=q=>{q.key==="Escape"&&e&&t()};if(e)return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[e,t]),reactExports.useEffect(()=>{if(e&&p.current){const D=setTimeout(()=>{var q;(q=p.current)==null||q.focus()},100);return()=>clearTimeout(D)}},[e]),reactExports.useEffect(()=>{if(e)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[e]);const C=reactExports.useCallback(D=>{D.target===D.currentTarget&&t()},[t]),S=reactExports.useCallback(D=>{j.current=D.touches[0].clientX,R.current=Date.now(),b.current=j.current,h(!0)},[]),I=reactExports.useCallback(D=>{if(!a)return;b.current=D.touches[0].clientX;const q=j.current-b.current;q>0&&u(Math.min(q,typeof i=="number"?i:300))},[a,i]),G=reactExports.useCallback(()=>{if(!a)return;h(!1);const D=j.current-b.current,q=Date.now()-R.current;(D/q>FLICK_VELOCITY||D>SWIPE_THRESHOLD)&&t(),u(0)},[a,t]);if(!e)return null;const U=typeof i=="number"?`${i}px`:i;return jsxRuntimeExports.jsx("div",{className:"drawer-overlay",onClick:C,role:"dialog","aria-modal":"true","aria-label":r||"Drawer",children:jsxRuntimeExports.jsxs("div",{ref:l,className:`drawer ${a?"drawer--dragging":""} ${n}`,style:{width:U,transform:`translateX(-${d}px)`},onClick:D=>D.stopPropagation(),onTouchStart:S,onTouchMove:I,onTouchEnd:G,children:[jsxRuntimeExports.jsxs("div",{className:"drawer__header",children:[jsxRuntimeExports.jsx("h2",{className:"drawer__title",children:r||"Menu"}),jsxRuntimeExports.jsx("button",{ref:p,className:"drawer__close",onClick:t,"aria-label":"Close drawer",type:"button",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("div",{className:"drawer__content",children:s})]})})}const EMAIL_REGEX=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;function FeedbackForm({isOpen:e,onClose:t,datasetId:r,contextUrl:s}){const[i,n]=reactExports.useState(""),[l,p]=reactExports.useState(""),[d,u]=reactExports.useState(""),[a,h]=reactExports.useState(""),[j,R]=reactExports.useState(null),[b,C]=reactExports.useState(null),[S,I]=reactExports.useState({status:"idle"}),G=reactExports.useRef(null),U=reactExports.useRef(null),D=reactExports.useRef(null);reactExports.useEffect(()=>{if(e){n(""),p(""),u(""),h(""),R(null),C(null),I({status:"idle"});const V=setTimeout(()=>{var K;(K=U.current)==null||K.focus()},100);return()=>clearTimeout(V)}},[e]),reactExports.useEffect(()=>{const V=K=>{K.key==="Escape"&&e&&S.status!=="submitting"&&t()};if(e)return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[e,t,S.status]),reactExports.useEffect(()=>{if(e)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[e]);const q=reactExports.useCallback(()=>{let V=!0;return i.trim()?R(null):(R("Please describe your feedback"),V=!1),a.trim()&&!EMAIL_REGEX.test(a.trim())?(C("Please enter a valid email address"),V=!1):C(null),V},[i,a]),F=reactExports.useCallback(async V=>{if(V.preventDefault(),!q())return;I({status:"submitting"});const K={dataset:r,feedback:i.trim(),evidence:l.trim()||void 0,additionalInfo:d.trim()||void 0,email:a.trim()||void 0,contextUrl:s};try{const A=await fetch("/api/submit-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)}),M=await A.json();if(!A.ok||!M.success){I({status:"error",message:M.error||"Failed to submit feedback. Please try again."});return}I({status:"success",issueUrl:M.issueUrl||""})}catch{I({status:"error",message:"Network error. Please check your connection and try again."})}},[q,r,i,l,d,a,s]),le=reactExports.useCallback(V=>{V.target===V.currentTarget&&S.status!=="submitting"&&t()},[t,S.status]);if(!e)return null;const Z=r?r.split("-").map(V=>V.charAt(0).toUpperCase()+V.slice(1)).join(" "):"General Feedback";return jsxRuntimeExports.jsx("div",{className:"feedback-overlay",onClick:le,role:"dialog","aria-modal":"true","aria-labelledby":"feedback-title",children:jsxRuntimeExports.jsxs("div",{ref:G,className:"feedback-modal",onClick:V=>V.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"feedback-modal__header",children:[jsxRuntimeExports.jsx("h2",{id:"feedback-title",className:"feedback-modal__title",children:"Submit Feedback"}),jsxRuntimeExports.jsx("button",{ref:D,className:"feedback-modal__close",onClick:t,"aria-label":"Close feedback form",type:"button",disabled:S.status==="submitting",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),S.status==="success"&&jsxRuntimeExports.jsx("div",{className:"feedback-modal__content feedback-modal__content--success",children:jsxRuntimeExports.jsxs("div",{className:"feedback-success",children:[jsxRuntimeExports.jsx("div",{className:"feedback-success__icon",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),jsxRuntimeExports.jsx("polyline",{points:"22,4 12,14.01 9,11.01"})]})}),jsxRuntimeExports.jsx("h3",{className:"feedback-success__title",children:"Thank you for your feedback!"}),jsxRuntimeExports.jsx("p",{className:"feedback-success__message",children:"Your feedback has been submitted and will be reviewed by our team."}),S.issueUrl&&jsxRuntimeExports.jsx("a",{href:S.issueUrl,target:"_blank",rel:"noopener noreferrer",className:"feedback-success__link",children:"View on GitHub"}),jsxRuntimeExports.jsx("button",{className:"feedback-modal__button feedback-modal__button--primary",onClick:t,type:"button",children:"Close"})]})}),S.status==="error"&&jsxRuntimeExports.jsx("div",{className:"feedback-modal__content",children:jsxRuntimeExports.jsxs("div",{className:"feedback-error",children:[jsxRuntimeExports.jsx("div",{className:"feedback-error__icon",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),jsxRuntimeExports.jsx("h3",{className:"feedback-error__title",children:"Submission Failed"}),jsxRuntimeExports.jsx("p",{className:"feedback-error__message",children:S.message}),jsxRuntimeExports.jsx("button",{className:"feedback-modal__button feedback-modal__button--primary",onClick:()=>I({status:"idle"}),type:"button",children:"Try Again"})]})}),(S.status==="idle"||S.status==="submitting")&&jsxRuntimeExports.jsxs("form",{className:"feedback-modal__content",onSubmit:F,children:[jsxRuntimeExports.jsx("div",{className:"feedback-modal__help",children:jsxRuntimeExports.jsxs("p",{children:["Help us improve the data! Your feedback will be publicly posted as a"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/moxious/historynet/issues",target:"_blank",rel:"noopener noreferrer",children:"GitHub issue"})," ","for review."]})}),jsxRuntimeExports.jsxs("div",{className:"feedback-modal__field",children:[jsxRuntimeExports.jsx("label",{className:"feedback-modal__label",children:"Dataset"}),jsxRuntimeExports.jsx("div",{className:"feedback-modal__dataset",children:Z})]}),jsxRuntimeExports.jsxs("div",{className:"feedback-modal__field",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"feedback-text",className:"feedback-modal__label",children:["What's missing, incorrect, or should be changed?",jsxRuntimeExports.jsx("span",{className:"feedback-modal__required",children:"*"})]}),jsxRuntimeExports.jsx("textarea",{ref:U,id:"feedback-text",className:`feedback-modal__textarea ${j?"feedback-modal__textarea--error":""}`,value:i,onChange:V=>n(V.target.value),placeholder:"Describe what needs to be added, corrected, or changed...",rows:4,disabled:S.status==="submitting","aria-invalid":!!j,"aria-describedby":j?"feedback-error":void 0}),j&&jsxRuntimeExports.jsx("span",{id:"feedback-error",className:"feedback-modal__error",children:j})]}),jsxRuntimeExports.jsxs("div",{className:"feedback-modal__field",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"feedback-evidence",className:"feedback-modal__label",children:["Evidence: links, citations, or explanation",jsxRuntimeExports.jsx("span",{className:"feedback-modal__optional",children:"(optional)"})]}),jsxRuntimeExports.jsx("textarea",{id:"feedback-evidence",className:"feedback-modal__textarea",value:l,onChange:V=>p(V.target.value),placeholder:"Provide URLs, book citations, or explain how you know this...",rows:3,disabled:S.status==="submitting"})]}),jsxRuntimeExports.jsxs("div",{className:"feedback-modal__field",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"feedback-additional",className:"feedback-modal__label",children:["Anything else?",jsxRuntimeExports.jsx("span",{className:"feedback-modal__optional",children:"(optional)"})]}),jsxRuntimeExports.jsx("textarea",{id:"feedback-additional",className:"feedback-modal__textarea",value:d,onChange:V=>u(V.target.value),placeholder:"Any other context that might be helpful...",rows:2,disabled:S.status==="submitting"})]}),jsxRuntimeExports.jsxs("div",{className:"feedback-modal__field",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"feedback-email",className:"feedback-modal__label",children:["Email",jsxRuntimeExports.jsx("span",{className:"feedback-modal__optional",children:"(optional, kept private)"})]}),jsxRuntimeExports.jsx("input",{id:"feedback-email",type:"email",className:`feedback-modal__input ${b?"feedback-modal__input--error":""}`,value:a,onChange:V=>h(V.target.value),placeholder:"your@email.com",disabled:S.status==="submitting","aria-invalid":!!b,"aria-describedby":b?"email-error":void 0}),b&&jsxRuntimeExports.jsx("span",{id:"email-error",className:"feedback-modal__error",children:b})]}),jsxRuntimeExports.jsxs("div",{className:"feedback-modal__actions",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"feedback-modal__button feedback-modal__button--secondary",onClick:t,disabled:S.status==="submitting",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"feedback-modal__button feedback-modal__button--primary",disabled:S.status==="submitting",children:S.status==="submitting"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"feedback-modal__spinner","aria-hidden":"true"}),"Submitting..."]}):"Submit Feedback"})]})]})]})})}function extractDatasetId(e){const r=e.replace(/^\//,"").split("/")[0];return r||null}function FeedbackButton(){const[e,t]=reactExports.useState(!1),[r,s]=reactExports.useState({url:"",datasetId:null}),i=useLocation(),n=reactExports.useCallback(()=>{const p=window.location.href,d=extractDatasetId(i.pathname);s({url:p,datasetId:d}),t(!0)},[i.pathname]),l=reactExports.useCallback(()=>{t(!1)},[]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{className:"feedback-button",onClick:n,"aria-label":"Send feedback",type:"button",children:[jsxRuntimeExports.jsx("svg",{className:"feedback-button__icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),jsxRuntimeExports.jsx("span",{className:"feedback-button__label",children:"Feedback"})]}),jsxRuntimeExports.jsx(FeedbackForm,{isOpen:e,onClose:l,datasetId:r.datasetId,contextUrl:r.url})]})}const NODE_TYPES=[{type:"person",label:"Person"},{type:"object",label:"Object"},{type:"location",label:"Location"},{type:"entity",label:"Entity"}];function GraphLegend({className:e=""}){return jsxRuntimeExports.jsx("div",{className:`graph-legend ${e}`,"aria-label":"Graph legend",children:jsxRuntimeExports.jsx("div",{className:"graph-legend__items",children:NODE_TYPES.map(({type:t,label:r})=>jsxRuntimeExports.jsxs("div",{className:"graph-legend__item",children:[jsxRuntimeExports.jsx("span",{className:"graph-legend__color",style:{backgroundColor:getNodeColor(t)},"aria-hidden":"true"}),jsxRuntimeExports.jsx("span",{className:"graph-legend__emoji","aria-hidden":"true",children:getNodeTypeEmoji(t)}),jsxRuntimeExports.jsx("span",{className:"graph-legend__label",children:r})]},t))})})}const NODE_RADIUS$1=20,NODE_SIZE=40,ZOOM_MIN$2=.1,ZOOM_MAX$2=4;function ForceGraphLayout({data:e,onNodeClick:t,onEdgeClick:r,selectedNodeId:s,selectedEdgeId:i,searchTerm:n,className:l=""}){const p=reactExports.useRef(null),d=reactExports.useRef(null),u=reactExports.useRef(null),a=reactExports.useRef(null),[h,j]=reactExports.useState({width:0,height:0});reactExports.useEffect(()=>{const I=p.current;if(!I)return;const G=new ResizeObserver(U=>{for(const D of U){const{width:q,height:F}=D.contentRect;j({width:q,height:F})}});return G.observe(I),()=>G.disconnect()},[]);const R=reactExports.useRef(null);reactExports.useEffect(()=>{if(R.current){const P=[];R.current.data!==e&&P.push("data"),R.current.dimensions!==h&&P.push("dimensions"),R.current.onNodeClick!==t&&P.push("onNodeClick"),R.current.onEdgeClick!==r&&P.push("onEdgeClick"),console.log("[ForceGraphLayout] Main useEffect triggered. Changed deps:",P.length>0?P:"NONE (initial render or dimensions check)")}else console.log("[ForceGraphLayout] Main useEffect triggered. First render.");if(R.current={data:e,dimensions:h,onNodeClick:t,onEdgeClick:r},!d.current||h.width===0||h.height===0)return;const I=select(d.current),{width:G,height:U}=h;console.log("[ForceGraphLayout] Rebuilding graph from scratch..."),I.selectAll("*").remove();const D=I.append("g").attr("class","graph-container"),q=D.append("g").attr("class","edges"),F=D.append("g").attr("class","nodes"),le=D.append("g").attr("class","labels"),Z=e.nodes.map(P=>({id:P.id,type:P.type,title:P.title,shortDescription:P.shortDescription,originalNode:P})),V=new Map(Z.map(P=>[P.id,P])),K=[];for(const P of e.edges){const de=V.get(P.source),Q=V.get(P.target);de&&Q&&K.push({id:P.id,relationship:P.relationship,label:P.label,evidence:P.evidence,source:de,target:Q})}const A=simulation(Z).force("link",link(K).id(P=>P.id).distance(150)).force("charge",manyBody().strength(-350)).force("center",center(G/2,U/2)).force("collision",collide().radius(NODE_SIZE*.8)).force("x",x(G/2).strength(.05)).force("y",y(U/2).strength(.05));u.current=A;const M=q.selectAll("line").data(K).enter().append("line").attr("class","graph-edge").attr("stroke",P=>getEdgeColor(P.relationship)).attr("stroke-width",2).attr("stroke-opacity",.6).attr("data-id",P=>P.id).on("click",(P,de)=>{P.stopPropagation();const Q=e.edges.find(ae=>ae.id===de.id);Q&&r&&r(Q)}).on("mouseenter",function(){select(this).attr("stroke-opacity",1).attr("stroke-width",3)}).on("mouseleave",function(){select(this).attr("stroke-opacity",.6).attr("stroke-width",2)}),T=F.selectAll("g").data(Z).enter().append("g").attr("class","graph-node").attr("data-id",P=>P.id).call(drag().clickDistance(4).on("start",(P,de)=>{P.active||A.alphaTarget(.3).restart(),de.fx=de.x,de.fy=de.y}).on("drag",(P,de)=>{de.fx=P.x,de.fy=P.y}).on("end",(P,de)=>{P.active||A.alphaTarget(0),de.fx=null,de.fy=null})).on("click",(P,de)=>{P.stopPropagation(),t&&t(de.originalNode)}),J=getComputedStyle(document.documentElement).getPropertyValue("--color-graph-text").trim()||"#374151";T.append("circle").attr("r",NODE_RADIUS$1).attr("fill",P=>getNodeColor(P.type)).attr("fill-opacity",.2).attr("stroke",P=>getNodeColor(P.type)).attr("stroke-width",2).attr("class","node-background"),T.append("text").attr("class","node-emoji").attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size","16px").attr("pointer-events","none").text(P=>getNodeTypeEmoji(P.type));const me=le.selectAll("text").data(Z).enter().append("text").attr("class","graph-label").attr("text-anchor","middle").attr("dy",NODE_SIZE/2+14).text(P=>P.title).attr("font-size","11px").attr("fill",J).attr("pointer-events","none");A.on("tick",()=>{M.attr("x1",P=>P.source.x??0).attr("y1",P=>P.source.y??0).attr("x2",P=>P.target.x??0).attr("y2",P=>P.target.y??0),T.attr("transform",P=>`translate(${P.x??0}, ${P.y??0})`),me.attr("x",P=>P.x??0).attr("y",P=>P.y??0)});const B=zoom().scaleExtent([ZOOM_MIN$2,ZOOM_MAX$2]).on("zoom",P=>{D.attr("transform",P.transform.toString())});return a.current=B,I.call(B),I.on("click",()=>{}),()=>{A.stop()}},[e,h,t,r]),reactExports.useEffect(()=>{if(!d.current)return;const I=select(d.current);I.selectAll(".graph-node").each(function(){const G=select(this),D=G.attr("data-id")===s;G.select(".node-background").attr("stroke-width",D?3:2).attr("fill-opacity",D?.4:.2),G.classed("selected",D)}),I.selectAll(".graph-edge").each(function(){const G=select(this),D=G.attr("data-id")===i;G.attr("stroke-opacity",D?1:.6).attr("stroke-width",D?3:2),G.classed("selected",D)})},[s,i]),reactExports.useEffect(()=>{if(!d.current)return;const I=select(d.current),G=(n==null?void 0:n.toLowerCase())??"";I.selectAll(".graph-node").each(function(U){const D=select(this),q=G&&U.title.toLowerCase().includes(G);D.classed("search-match",!!q),D.select(".node-background").attr("filter",q?"url(#glow)":null)}),I.selectAll(".graph-node").attr("opacity",U=>G?U.title.toLowerCase().includes(G)?1:.3:1),I.selectAll(".graph-label").attr("opacity",U=>G?U.title.toLowerCase().includes(G)?1:.3:1)},[n]);const b=reactExports.useCallback(()=>{if(!d.current||!a.current)return;select(d.current).transition().duration(300).call(a.current.scaleBy,1.5)},[]),C=reactExports.useCallback(()=>{if(!d.current||!a.current)return;select(d.current).transition().duration(300).call(a.current.scaleBy,.67)},[]),S=reactExports.useCallback(()=>{if(!d.current||!a.current)return;select(d.current).transition().duration(500).call(a.current.transform,identity)},[]);return jsxRuntimeExports.jsxs("div",{ref:p,className:`force-graph-layout ${l}`,children:[jsxRuntimeExports.jsx("svg",{ref:d,width:h.width,height:h.height,children:jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"force-graph-layout__controls",children:[jsxRuntimeExports.jsx("button",{className:"force-graph-layout__control-btn",onClick:b,"aria-label":"Zoom in",title:"Zoom in",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsx("button",{className:"force-graph-layout__control-btn",onClick:C,"aria-label":"Zoom out",title:"Zoom out",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsx("button",{className:"force-graph-layout__control-btn",onClick:S,"aria-label":"Reset view",title:"Reset view",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),jsxRuntimeExports.jsx("path",{d:"M3 3v5h5"})]})})]}),jsxRuntimeExports.jsx(GraphLegend,{})]})}const EVENT_MARKER_SIZE=10,LABEL_WIDTH=220,LABEL_OFFSET=20,LEFT_MARGIN=300,AXIS_X=LEFT_MARGIN+LABEL_WIDTH+LABEL_OFFSET+20,TICK_LABEL_X=LEFT_MARGIN-40,UNDATED_SECTION_HEIGHT=150,ZOOM_MIN$1=.3,ZOOM_MAX$1=8,ZOOM_BREAKPOINTS={mobile:{maxWidth:767,scale:1},tablet:{maxWidth:1023,scale:1.2},desktop:{scale:1.5}},LABEL_HEIGHT=55,LANE_GAP=10,LANE_WIDTH=LABEL_WIDTH+LANE_GAP,MAX_LANES=2,MIN_LABEL_SPACING=14,MIN_GAP_THRESHOLD=3,GAP_THRESHOLD_PERCENT=.1,MIN_SEGMENT_HEIGHT=100,BREAK_INDICATOR_HEIGHT=30;function getEventTypeLabel(e){switch(e){case"birth":return"Born";case"death":return"Died";case"created":return"Created";case"founded":return"Founded"}}function getEventColor(e,t){const r=getNodeColor(t);return r}function getResponsiveInitialScale(e){return e<ZOOM_BREAKPOINTS.mobile.maxWidth?ZOOM_BREAKPOINTS.mobile.scale:e<ZOOM_BREAKPOINTS.tablet.maxWidth?ZOOM_BREAKPOINTS.tablet.scale:ZOOM_BREAKPOINTS.desktop.scale}function assignLanes(e,t){const r=new Map;if(e.length===0)return r;const s=e.filter(n=>n.isLeft).sort((n,l)=>(n.y??0)-(l.y??0)),i=e.filter(n=>!n.isLeft).sort((n,l)=>(n.y??0)-(l.y??0));for(const n of[s,i]){if(n.length===0)continue;const l=n[0].isLeft??!0,p=[];for(const d of n){let u=!1;const a=d.y??0;for(let h=0;h<p.length;h++){const R=p[h][p[h].length-1].y??0;if(a>=R+t){p[h].push(d),r.set(d.id,{laneIndex:h,xOffset:h*LANE_WIDTH*(l?-1:1)}),u=!0;break}}if(!u){const h=Math.min(p.length,MAX_LANES-1);h===p.length?p.push([d]):p[h].push(d),r.set(d.id,{laneIndex:h,xOffset:h*LANE_WIDTH*(l?-1:1)})}}}return r}function TimelineLayout({data:e,onNodeClick:t,onEdgeClick:r,selectedNodeId:s,selectedEdgeId:i,searchTerm:n,className:l=""}){const p=reactExports.useRef(null),d=reactExports.useRef(null),u=reactExports.useRef(null),[a,h]=reactExports.useState({width:0,height:0}),[j,R]=reactExports.useState(ZOOM_BREAKPOINTS.desktop.scale),[b,C]=reactExports.useState("decade"),{events:S,timelineEdges:I,yearRange:G,undatedNodes:U,datedYears:D,nodeEventMap:q,eventsPerYear:F}=reactExports.useMemo(()=>{const A=[],M=[];let T=1/0,ee=-1/0;const J=new Map;for(const Q of e.nodes){const ae=parseYear(Q.dateStart),_e=parseYear(Q.dateEnd),X={nodeId:Q.id};if(isPersonNode(Q)){if(ae!==null){const fe={id:`${Q.id}-birth`,year:ae,type:"birth",nodeId:Q.id,nodeType:Q.type,title:Q.title,originalNode:Q};A.push(fe),X.birthEvent=fe,X.primaryEvent=fe,T=Math.min(T,ae),ee=Math.max(ee,ae)}if(_e!==null){const fe={id:`${Q.id}-death`,year:_e,type:"death",nodeId:Q.id,nodeType:Q.type,title:Q.title,originalNode:Q};A.push(fe),X.deathEvent=fe,T=Math.min(T,_e),ee=Math.max(ee,_e)}ae===null&&_e===null&&M.push(Q)}else if(ae!==null){const fe=Q.type==="object"?"created":"founded",we={id:`${Q.id}-${fe}`,year:ae,type:fe,nodeId:Q.id,nodeType:Q.type,title:Q.title,originalNode:Q};A.push(we),X.primaryEvent=we,T=Math.min(T,ae),ee=Math.max(ee,ae)}else M.push(Q);J.set(Q.id,X)}A.sort((Q,ae)=>Q.year-ae.year);const me=new Map;for(const Q of A){const ae=me.get(Q.year)??[];ae.push(Q),me.set(Q.year,ae)}for(const Q of me.values())Q.forEach((ae,_e)=>{ae.isLeft=_e%2===0,ae.stackOffset=0});const B=e.edges.map(Q=>({id:Q.id,relationship:Q.relationship,sourceNodeId:Q.source,targetNodeId:Q.target})),P=A.map(Q=>Q.year),de=new Map;for(const Q of A)de.set(Q.year,(de.get(Q.year)??0)+1);return{events:A,timelineEdges:B,yearRange:T!==1/0?{min:T,max:ee}:{min:1600,max:2e3},undatedNodes:M,datedYears:P,nodeEventMap:J,eventsPerYear:de}},[e]),le=reactExports.useRef(null);reactExports.useEffect(()=>{const A=p.current;if(!A)return;const M=new ResizeObserver(T=>{for(const ee of T){const{width:J,height:me}=ee.contentRect;h({width:J,height:me})}});return M.observe(A),()=>M.disconnect()},[]),reactExports.useEffect(()=>{if(!d.current||a.width===0||a.height===0)return;const A=select(d.current),{width:M,height:T}=a;A.selectAll("*").remove();const ee=AXIS_X+LANE_WIDTH*MAX_LANES+100,J=G.max-G.min,me=Math.max(MIN_GAP_THRESHOLD,J*GAP_THRESHOLD_PERCENT),B=createSegmentedScale(D,T*3,{gapThreshold:me,minSegmentHeight:MIN_SEGMENT_HEIGHT,breakIndicatorHeight:BREAK_INDICATOR_HEIGHT,topPadding:50,bottomPadding:UNDATED_SECTION_HEIGHT+50,eventsPerYear:F,pixelsPerEvent:LABEL_HEIGHT});le.current=B;const P=B.segments[B.segments.length-1],de=Math.max(((P==null?void 0:P.yEnd)??50)+UNDATED_SECTION_HEIGHT+50,T),Q=B.toY,ae=A.append("g").attr("class","timeline-container");ae.append("rect").attr("class","timeline-background").attr("width",ee).attr("height",de).attr("fill","transparent");const _e=ae.append("g").attr("class","timeline-axis"),X=getComputedStyle(document.documentElement),fe=X.getPropertyValue("--color-border").trim()||"#94a3b8";for(const re of B.segments)_e.append("line").attr("class","timeline-axis-line").attr("x1",AXIS_X).attr("x2",AXIS_X).attr("y1",(re.yStart??50)-10).attr("y2",(re.yEnd??50)+10).attr("stroke",fe).attr("stroke-width",3);const we=_e.append("g").attr("class","timeline-ticks"),Ge=re=>{we.selectAll("*").remove();const pe=getComputedStyle(document.documentElement),be=pe.getPropertyValue("--color-border").trim()||"#cbd5e1",Ie=pe.getPropertyValue("--color-border-light").trim()||"#e2e8f0",De=pe.getPropertyValue("--color-text").trim()||"#0f172a",ye=pe.getPropertyValue("--color-text-muted").trim()||"#64748b";let He=-1/0;for(const Ye of B.segments){const ze=generateTicks(Ye.yearStart,Ye.yearEnd,re);for(const Ne of ze){if(Ne.value<Ye.yearStart||Ne.value>Ye.yearEnd)continue;const Ue=Q(Ne.value);(Ne.isMajor||re==="decade"||re==="year")&&we.append("line").attr("class",Ne.isMajor?"timeline-grid-major":"timeline-grid-minor").attr("x1",TICK_LABEL_X+10).attr("x2",AXIS_X+LANE_WIDTH*MAX_LANES).attr("y1",Ue).attr("y2",Ue).attr("stroke",Ne.isMajor?be:Ie).attr("stroke-width",Ne.isMajor?1.5:.5).attr("stroke-dasharray",Ne.isMajor?"none":"2,4"),Ne.label&&Ue-He>=MIN_LABEL_SPACING&&(we.append("text").attr("class","timeline-tick-label").attr("x",TICK_LABEL_X).attr("y",Ue).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-size",Ne.isMajor?"12px":"10px").attr("font-weight",Ne.isMajor?"600":"400").attr("fill",Ne.isMajor?De:ye).text(Ne.label),He=Ue)}}},Le=getTickGranularity(getResponsiveInitialScale(M));Ge(Le),C(Le);const Je=B.getSegmentBreaks(),Qe=X.getPropertyValue("--color-text-muted").trim()||"#64748b";for(const re of Je){const pe=re.y,be=re.gapYears,Ie=_e.append("g").attr("class","timeline-break-indicator"),De=`
        M ${AXIS_X-8} ${pe-8}
        L ${AXIS_X+8} ${pe-4}
        L ${AXIS_X-8} ${pe}
        L ${AXIS_X+8} ${pe+4}
        L ${AXIS_X-8} ${pe+8}
      `;Ie.append("path").attr("class","timeline-break-zigzag").attr("d",De).attr("fill","none").attr("stroke",fe).attr("stroke-width",2),be>10&&Ie.append("text").attr("class","timeline-break-label").attr("x",AXIS_X).attr("y",pe+20).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("font-size","10px").attr("font-style","italic").attr("fill",Qe).text(`~${be} yrs`)}ae.append("g").attr("class","timeline-edges");const et=ae.append("g").attr("class","timeline-events");for(const re of S)re.y=Q(re.year)+(re.stackOffset??0);const Ee=assignLanes(S,LABEL_HEIGHT),Ve=new Map;for(const re of S)Ve.set(re.id,{x:AXIS_X,y:re.y??0});const We=et.selectAll(".timeline-event").data(S).enter().append("g").attr("class","timeline-event").attr("transform",re=>`translate(${AXIS_X}, ${re.y??0})`).attr("data-id",re=>re.id).attr("data-node-id",re=>re.nodeId).on("click",(re,pe)=>{re.stopPropagation(),t&&t(pe.originalNode)}),Be=getComputedStyle(document.documentElement),_t=Be.getPropertyValue("--color-graph-node-stroke").trim()||"#ffffff",Rt=Be.getPropertyValue("--color-graph-text").trim()||"#374151",ut=Be.getPropertyValue("--color-border").trim()||"#cbd5e1",yt=Be.getPropertyValue("--color-text-muted").trim()||"#64748b";if(We.append("circle").attr("class","timeline-event-marker").attr("r",EVENT_MARKER_SIZE/2).attr("fill",re=>getEventColor(re.type,re.nodeType)).attr("stroke",_t).attr("stroke-width",2),We.append("line").attr("class","timeline-event-connector").attr("x1",0).attr("y1",0).attr("x2",re=>{const pe=Ee.get(re.id);return(re.isLeft?-LABEL_OFFSET:LABEL_OFFSET)+((pe==null?void 0:pe.xOffset)??0)}).attr("y2",0).attr("stroke",ut).attr("stroke-width",1),We.append("foreignObject").attr("class","timeline-event-label-container").attr("x",re=>{const pe=Ee.get(re.id);return(re.isLeft?-LABEL_WIDTH-LABEL_OFFSET:LABEL_OFFSET)+((pe==null?void 0:pe.xOffset)??0)}).attr("y",-20).attr("width",LABEL_WIDTH).attr("height",50).append("xhtml:div").attr("class",re=>`timeline-event-label ${re.isLeft?"timeline-event-label--left":"timeline-event-label--right"}`).on("click",(re,pe)=>{re.stopPropagation(),t&&t(pe.originalNode)}).html(re=>{const pe=getEventTypeLabel(re.type),be=re.year.toString();return`<span class="timeline-event-title">${re.title}</span>
                <span class="timeline-event-meta">${pe} ${be}</span>`}),We.filter(re=>re.type==="death").select(".timeline-event-marker").attr("fill",Be.getPropertyValue("--color-surface").trim()||"#fff").attr("stroke",re=>getEventColor(re.type,re.nodeType)).attr("stroke-width",3),U.length>0){const re=de-UNDATED_SECTION_HEIGHT+30;ae.append("line").attr("class","timeline-undated-separator").attr("x1",LEFT_MARGIN).attr("x2",ee).attr("y1",re-20).attr("y2",re-20).attr("stroke",ut).attr("stroke-width",1).attr("stroke-dasharray","8,4"),ae.append("text").attr("class","timeline-undated-label").attr("x",AXIS_X).attr("y",re-30).attr("text-anchor","middle").attr("font-size","12px").attr("font-weight","600").attr("fill",yt).text("Undated");const pe=ae.append("g").attr("class","timeline-undated-nodes"),be=100,Ie=AXIS_X-(U.length-1)*be/2,De=pe.selectAll(".timeline-undated-event").data(U).enter().append("g").attr("class","timeline-undated-event").attr("transform",(ye,He)=>`translate(${Ie+He*be}, ${re})`).attr("data-node-id",ye=>ye.id).on("click",(ye,He)=>{ye.stopPropagation(),t&&t(He)});De.append("circle").attr("class","timeline-undated-background").attr("r",16).attr("fill",ye=>getNodeColor(ye.type)).attr("fill-opacity",.2).attr("stroke",ye=>getNodeColor(ye.type)).attr("stroke-width",2),De.append("text").attr("class","timeline-undated-emoji").attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size","14px").attr("pointer-events","none").text(ye=>getNodeTypeEmoji(ye.type)),De.append("text").attr("class","timeline-undated-node-label").attr("x",0).attr("y",28).attr("text-anchor","middle").attr("font-size","10px").attr("fill",Rt).text(ye=>ye.title.length>15?ye.title.slice(0,12)+"...":ye.title)}let dt=Le;const tt=zoom().scaleExtent([ZOOM_MIN$1,ZOOM_MAX$1]).on("zoom",re=>{ae.attr("transform",re.transform.toString());const pe=re.transform.k;R(pe);const be=getTickGranularity(pe);be!==dt&&(dt=be,C(be),Ge(be))});u.current=tt,A.call(tt);const rt=B.getDensestSegment(),bt=(rt.yStart??50)+((rt.yEnd??50)-(rt.yStart??50))/2,xt=getResponsiveInitialScale(M),vt=(M-40)/ee,st=Math.min(Math.max(vt,xt),2),N=(M-ee*st)/2,ue=-(bt-T/(2*st))*st;return A.call(tt.transform,identity.translate(N,ue).scale(st)),()=>{}},[e,a,S,I,G,U,D,q,F,t,r]),reactExports.useEffect(()=>{if(!d.current)return;const M=select(d.current).select(".timeline-edges");if(!M.empty()&&(M.selectAll("*").remove(),s)){const T=I.filter(ee=>ee.sourceNodeId===s||ee.targetNodeId===s);for(const ee of T){const J=q.get(ee.sourceNodeId),me=q.get(ee.targetNodeId);if(!J||!me)continue;const B=J.primaryEvent,P=me.primaryEvent;if(!B||!P)continue;const de=B.y??0,Q=P.y??0,ae=AXIS_X+(B.isLeft?-80:80);M.append("path").attr("class","timeline-edge").attr("d",`M ${AXIS_X} ${de} Q ${ae} ${(de+Q)/2} ${AXIS_X} ${Q}`).attr("fill","none").attr("stroke",getEdgeColor(ee.relationship)).attr("stroke-width",2).attr("stroke-opacity",.6).attr("data-id",ee.id).on("click",_e=>{_e.stopPropagation();const X=e.edges.find(fe=>fe.id===ee.id);X&&r&&r(X)})}}},[s,I,q,e.edges,r]),reactExports.useEffect(()=>{if(!d.current)return;const A=select(d.current),M=getComputedStyle(document.documentElement),T=M.getPropertyValue("--color-graph-node-stroke").trim()||"#ffffff",ee=M.getPropertyValue("--color-graph-node-stroke-selected").trim()||"#1e293b";A.selectAll(".timeline-event").each(function(){const J=select(this),B=J.attr("data-node-id")===s;J.select(".timeline-event-marker").attr("stroke",B?ee:T).attr("stroke-width",B?3:2),J.classed("selected",B)}),A.selectAll(".timeline-undated-event").each(function(){const J=select(this),B=J.attr("data-node-id")===s;J.select(".timeline-undated-background").attr("stroke-width",B?3:2).attr("fill-opacity",B?.4:.2),J.classed("selected",B)}),A.selectAll(".timeline-edge").each(function(){const J=select(this),B=J.attr("data-id")===i;J.attr("stroke-opacity",B?.9:.6).attr("stroke-width",B?3:2),J.classed("selected",B)})},[s,i]),reactExports.useEffect(()=>{if(!d.current)return;const A=select(d.current),M=(n==null?void 0:n.toLowerCase())??"";A.selectAll(".timeline-event").each(function(T){const ee=select(this),J=M&&T.title.toLowerCase().includes(M);ee.classed("search-match",!!J),ee.select(".timeline-event-marker").attr("filter",J?"url(#timeline-glow)":null)}),A.selectAll(".timeline-event").attr("opacity",T=>M?T.title.toLowerCase().includes(M)?1:.3:1),A.selectAll(".timeline-undated-event").attr("opacity",T=>M?T.title.toLowerCase().includes(M)?1:.3:1)},[n]);const Z=reactExports.useCallback(()=>{if(!d.current||!u.current)return;select(d.current).transition().duration(300).call(u.current.scaleBy,1.5)},[]),V=reactExports.useCallback(()=>{if(!d.current||!u.current)return;select(d.current).transition().duration(300).call(u.current.scaleBy,.67)},[]),K=reactExports.useCallback(()=>{if(!d.current||!u.current||!le.current)return;const A=select(d.current),{width:M,height:T}=a,ee=le.current,J=AXIS_X+LANE_WIDTH*MAX_LANES+100,me=ee.getDensestSegment(),B=(me.yStart??50)+((me.yEnd??50)-(me.yStart??50))/2,P=getResponsiveInitialScale(M),de=(M-40)/J,Q=Math.min(Math.max(de,P),2),ae=(M-J*Q)/2,_e=-(B-T/(2*Q))*Q;A.transition().duration(500).call(u.current.transform,identity.translate(ae,_e).scale(Q))},[a]);return jsxRuntimeExports.jsxs("div",{ref:p,className:`timeline-layout ${l}`,children:[jsxRuntimeExports.jsx("svg",{ref:d,width:a.width,height:a.height,children:jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("filter",{id:"timeline-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"timeline-layout__controls",children:[jsxRuntimeExports.jsx("button",{className:"timeline-layout__control-btn",onClick:Z,"aria-label":"Zoom in",title:"Zoom in",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsx("button",{className:"timeline-layout__control-btn",onClick:V,"aria-label":"Zoom out",title:"Zoom out",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsx("button",{className:"timeline-layout__control-btn",onClick:K,"aria-label":"Reset view",title:"Reset view",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),jsxRuntimeExports.jsx("path",{d:"M3 3v5h5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"timeline-layout__zoom-indicator",children:[j.toFixed(1),"x ¬∑ ",b,"s"]})]})}const NODE_RADIUS=20,CENTER_NODE_RADIUS=25,MIN_RADIUS=150,MAX_RADIUS=350,ZOOM_MIN=.3,ZOOM_MAX=4;function calculateRadius(e){if(e<=4)return MIN_RADIUS;if(e>=20)return MAX_RADIUS;const t=(e-4)/16;return MIN_RADIUS+t*(MAX_RADIUS-MIN_RADIUS)}function RadialLayout({data:e,onNodeClick:t,onEdgeClick:r,selectedNodeId:s,selectedEdgeId:i,searchTerm:n,className:l=""}){const p=reactExports.useRef(null),d=reactExports.useRef(null),u=reactExports.useRef(null),[a,h]=reactExports.useState({width:0,height:0});reactExports.useEffect(()=>{const U=p.current;if(!U)return;const D=new ResizeObserver(q=>{for(const F of q){const{width:le,height:Z}=F.contentRect;h({width:le,height:Z})}});return D.observe(U),()=>D.disconnect()},[]);const{centerNode:j,connectedNodes:R,edges:b,hasValidSelection:C}=reactExports.useMemo(()=>{if(!s)return{centerNode:null,connectedNodes:[],edges:[],hasValidSelection:!1};const U=e.nodes.find(Z=>Z.id===s);if(!U)return{centerNode:null,connectedNodes:[],edges:[],hasValidSelection:!1};const D=e.edges.filter(Z=>Z.source===s||Z.target===s),q=new Set;for(const Z of D)Z.source===s?q.add(Z.target):q.add(Z.source);const F=new Map(e.nodes.map(Z=>[Z.id,Z])),le=Array.from(q).map(Z=>F.get(Z)).filter(Z=>Z!==void 0);return{centerNode:U,connectedNodes:le,edges:D,hasValidSelection:!0}},[e,s]);reactExports.useEffect(()=>{if(!d.current||a.width===0||a.height===0)return;const U=select(d.current),{width:D,height:q}=a;if(U.selectAll("*").remove(),!C||!j)return;const F=U.append("g").attr("class","radial-container"),le=F.append("g").attr("class","radial-edges"),Z=F.append("g").attr("class","radial-nodes"),V=F.append("g").attr("class","radial-labels"),K=D/2,A=q/2,M=calculateRadius(R.length),T=[],ee={id:j.id,type:j.type,title:j.title,originalNode:j,x:K,y:A,isCenter:!0};T.push(ee);const J=2*Math.PI/Math.max(R.length,1),me=-Math.PI/2;R.forEach((X,fe)=>{const we=me+fe*J;T.push({id:X.id,type:X.type,title:X.title,originalNode:X,x:K+M*Math.cos(we),y:A+M*Math.sin(we),isCenter:!1})});const B=new Map(T.map(X=>[X.id,X])),P=b.map(X=>{const fe=B.get(X.source),we=B.get(X.target);return!fe||!we?null:{id:X.id,relationship:X.relationship,source:fe,target:we,originalEdge:X}}).filter(X=>X!==null),Q=getComputedStyle(document.documentElement).getPropertyValue("--color-graph-text").trim()||"#374151";le.selectAll("path").data(P).enter().append("path").attr("class","radial-edge").attr("d",X=>`M ${X.source.x} ${X.source.y} Q ${K} ${A} ${X.target.x} ${X.target.y}`).attr("fill","none").attr("stroke",X=>getEdgeColor(X.relationship)).attr("stroke-width",2).attr("stroke-opacity",.5).attr("data-id",X=>X.id).on("click",(X,fe)=>{X.stopPropagation(),r&&r(fe.originalEdge)}).on("mouseenter",function(){select(this).attr("stroke-opacity",.9).attr("stroke-width",3)}).on("mouseleave",function(){select(this).attr("stroke-opacity",.5).attr("stroke-width",2)});const ae=Z.selectAll("g").data(T).enter().append("g").attr("class",X=>`radial-node ${X.isCenter?"radial-node--center":""}`).attr("transform",X=>`translate(${X.x}, ${X.y})`).attr("data-id",X=>X.id).on("click",(X,fe)=>{X.stopPropagation(),t&&t(fe.originalNode)});ae.append("circle").attr("r",X=>X.isCenter?CENTER_NODE_RADIUS:NODE_RADIUS).attr("fill",X=>getNodeColor(X.type)).attr("fill-opacity",.2).attr("stroke",X=>getNodeColor(X.type)).attr("stroke-width",X=>X.isCenter?3:2).attr("class","node-background"),ae.append("text").attr("class","node-emoji").attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-size",X=>X.isCenter?"20px":"16px").attr("pointer-events","none").text(X=>getNodeTypeEmoji(X.type)),V.selectAll("text").data(T).enter().append("text").attr("class","radial-label").attr("x",X=>X.x).attr("y",X=>X.y+(X.isCenter?CENTER_NODE_RADIUS:NODE_RADIUS)+16).attr("text-anchor","middle").text(X=>X.title).attr("font-size",X=>X.isCenter?"13px":"11px").attr("font-weight",X=>X.isCenter?"600":"500").attr("fill",Q).attr("pointer-events","none");const _e=zoom().scaleExtent([ZOOM_MIN,ZOOM_MAX]).on("zoom",X=>{F.attr("transform",X.transform.toString())});return u.current=_e,U.call(_e),U.on("click",()=>{}),()=>{}},[e,a,j,R,b,C,t,r]),reactExports.useEffect(()=>{if(!d.current)return;const U=select(d.current);U.selectAll(".radial-node").each(function(){const D=select(this),F=D.attr("data-id")===s,le=D.classed("radial-node--center");D.select(".node-background").attr("stroke-width",F?4:le?3:2).attr("fill-opacity",F?.4:.2),D.classed("selected",F)}),U.selectAll(".radial-edge").each(function(){const D=select(this),F=D.attr("data-id")===i;D.attr("stroke-opacity",F?.9:.5).attr("stroke-width",F?3:2),D.classed("selected",F)})},[s,i]),reactExports.useEffect(()=>{if(!d.current)return;const U=select(d.current),D=(n==null?void 0:n.toLowerCase())??"";U.selectAll(".radial-node").each(function(q){const F=select(this),le=D&&q.title.toLowerCase().includes(D);F.classed("search-match",!!le),F.select(".node-background").attr("filter",le?"url(#radial-glow)":null)}),U.selectAll(".radial-node").attr("opacity",q=>D?q.title.toLowerCase().includes(D)?1:.3:1),U.selectAll(".radial-label").attr("opacity",q=>D?q.title.toLowerCase().includes(D)?1:.3:1)},[n]);const S=reactExports.useCallback(()=>{if(!d.current||!u.current)return;select(d.current).transition().duration(300).call(u.current.scaleBy,1.5)},[]),I=reactExports.useCallback(()=>{if(!d.current||!u.current)return;select(d.current).transition().duration(300).call(u.current.scaleBy,.67)},[]),G=reactExports.useCallback(()=>{if(!d.current||!u.current)return;select(d.current).transition().duration(500).call(u.current.transform,identity)},[]);return!C||!j?jsxRuntimeExports.jsx("div",{ref:p,className:`radial-layout ${l}`,children:jsxRuntimeExports.jsxs("div",{className:"radial-layout__empty-state",children:[jsxRuntimeExports.jsx("div",{className:"radial-layout__empty-icon","aria-hidden":"true",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 64 64",width:"64",height:"64",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"8"}),jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"20",strokeDasharray:"4 4"}),jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"28",strokeDasharray:"2 4",opacity:"0.5"}),jsxRuntimeExports.jsx("circle",{cx:"32",cy:"8",r:"4",fill:"currentColor",opacity:"0.3"}),jsxRuntimeExports.jsx("circle",{cx:"56",cy:"32",r:"4",fill:"currentColor",opacity:"0.3"}),jsxRuntimeExports.jsx("circle",{cx:"32",cy:"56",r:"4",fill:"currentColor",opacity:"0.3"}),jsxRuntimeExports.jsx("circle",{cx:"8",cy:"32",r:"4",fill:"currentColor",opacity:"0.3"})]})}),jsxRuntimeExports.jsx("p",{className:"radial-layout__empty-title",children:"Select a node to explore its connections"}),jsxRuntimeExports.jsx("p",{className:"radial-layout__empty-hint",children:"Click on any node in the Graph or Timeline view, then switch to Radial view"})]})}):R.length===0?jsxRuntimeExports.jsx("div",{ref:p,className:`radial-layout ${l}`,children:jsxRuntimeExports.jsxs("div",{className:"radial-layout__empty-state",children:[jsxRuntimeExports.jsx("div",{className:"radial-layout__empty-icon","aria-hidden":"true",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 64 64",width:"64",height:"64",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"12",fill:"currentColor",fillOpacity:"0.1"}),jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"20",strokeDasharray:"4 4",opacity:"0.3"})]})}),jsxRuntimeExports.jsx("p",{className:"radial-layout__empty-title",children:j.title}),jsxRuntimeExports.jsxs("p",{className:"radial-layout__empty-hint",children:["This node has no visible connections",e.nodes.length!==e.edges.length?" with current filters":""]})]})}):jsxRuntimeExports.jsxs("div",{ref:p,className:`radial-layout ${l}`,children:[jsxRuntimeExports.jsx("svg",{ref:d,width:a.width,height:a.height,children:jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("filter",{id:"radial-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"radial-layout__controls",children:[jsxRuntimeExports.jsx("button",{className:"radial-layout__control-btn",onClick:S,"aria-label":"Zoom in",title:"Zoom in",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsx("button",{className:"radial-layout__control-btn",onClick:I,"aria-label":"Zoom out",title:"Zoom out",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsx("button",{className:"radial-layout__control-btn",onClick:G,"aria-label":"Reset view",title:"Reset view",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),jsxRuntimeExports.jsx("path",{d:"M3 3v5h5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"radial-layout__info",children:[jsxRuntimeExports.jsx("span",{className:"radial-layout__center-title",children:j.title}),jsxRuntimeExports.jsxs("span",{className:"radial-layout__connection-count",children:[R.length," connection",R.length!==1?"s":""]})]})]})}function MainLayout(){const{filteredData:e,loadingState:t,error:r,selection:s,selectNode:i,selectEdge:n,filters:l,setFilters:p,clearFilters:d,filterStats:u,dateRange:a,nodeTypeCounts:h,relationshipTypeCounts:j,searchTerm:R,currentLayout:b,setCurrentLayout:C}=useGraph(),S=useIsTablet(),[I,G]=reactExports.useState(!1),[U,D]=reactExports.useState(!1),q=reactExports.useCallback(()=>{S?D(T=>!T):G(T=>!T)},[S]),F=reactExports.useCallback(()=>{D(!1)},[]),le=reactExports.useCallback(T=>{i(T.id)},[i]),Z=reactExports.useCallback(T=>{n(T.id)},[n]),V=reactExports.useRef(null);if(reactExports.useEffect(()=>{if(V.current){const T=[];V.current.selectNode!==i&&T.push("selectNode"),V.current.selectEdge!==n&&T.push("selectEdge"),V.current.handleNodeClick!==le&&T.push("handleNodeClick"),V.current.handleEdgeClick!==Z&&T.push("handleEdgeClick"),T.length>0&&console.log("[MainLayout] Callback references changed:",T)}V.current={selectNode:i,selectEdge:n,handleNodeClick:le,handleEdgeClick:Z}},[i,n,le,Z]),reactExports.useEffect(()=>{const T=(s==null?void 0:s.type)==="node";b==="radial"&&!T&&C("force-graph")},[b,s,C]),t==="loading")return jsxRuntimeExports.jsxs("main",{className:"main-layout",children:[jsxRuntimeExports.jsx("section",{className:"main-layout__graph","aria-label":"Graph visualization",children:jsxRuntimeExports.jsxs("div",{className:"main-layout__placeholder main-layout__placeholder--loading",children:[jsxRuntimeExports.jsx("div",{className:"main-layout__spinner","aria-hidden":"true"}),jsxRuntimeExports.jsx("p",{children:"Loading dataset..."})]})}),!S&&jsxRuntimeExports.jsx(InfoboxPanel,{})]});if(t==="error"||r)return jsxRuntimeExports.jsxs("main",{className:"main-layout",children:[jsxRuntimeExports.jsx("section",{className:"main-layout__graph","aria-label":"Graph visualization",children:jsxRuntimeExports.jsxs("div",{className:"main-layout__placeholder main-layout__placeholder--error",children:[jsxRuntimeExports.jsx("p",{children:"Error loading dataset"}),jsxRuntimeExports.jsx("p",{className:"main-layout__error-message",children:(r==null?void 0:r.message)??"Unknown error"})]})}),!S&&jsxRuntimeExports.jsx(InfoboxPanel,{})]});const K=e&&e.nodes.length===0,A=()=>{if(!e||K)return null;const T={data:e,onNodeClick:le,onEdgeClick:Z,selectedNodeId:(s==null?void 0:s.type)==="node"?s.id:null,selectedEdgeId:(s==null?void 0:s.type)==="edge"?s.id:null,searchTerm:R};switch(b){case"timeline":return jsxRuntimeExports.jsx(TimelineLayout,{...T});case"radial":return jsxRuntimeExports.jsx(RadialLayout,{...T});case"force-graph":default:return jsxRuntimeExports.jsx(ForceGraphLayout,{...T})}},M=()=>{const T=jsxRuntimeExports.jsx(FilterPanel,{filters:l,onFiltersChange:p,onClearFilters:d,stats:u??void 0,dateRange:a??void 0,nodeTypeCounts:h??void 0,relationshipTypeCounts:j??void 0,isCollapsed:S?!1:I,onToggleCollapse:q});return S?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{className:"main-layout__filter-toggle",onClick:q,"aria-label":"Open filters",type:"button",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),jsxRuntimeExports.jsx("span",{children:"Filters"})]}),jsxRuntimeExports.jsx(Drawer,{isOpen:U,onClose:F,title:"Filters",width:300,children:jsxRuntimeExports.jsx("div",{className:"main-layout__drawer-filter",children:T})})]}):T};return jsxRuntimeExports.jsxs("main",{className:`main-layout ${S?"main-layout--mobile":""}`,children:[jsxRuntimeExports.jsx("section",{className:"main-layout__graph","aria-label":"Graph visualization",children:e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[K?jsxRuntimeExports.jsxs("div",{className:"main-layout__placeholder main-layout__placeholder--empty-results",children:[jsxRuntimeExports.jsx("div",{className:"main-layout__empty-icon","aria-hidden":"true",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"8",x2:"14",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"14",y1:"8",x2:"8",y2:"14"})]})}),jsxRuntimeExports.jsx("p",{children:"No results found"}),jsxRuntimeExports.jsx("p",{className:"main-layout__hint",children:"Try adjusting your filters or search term"}),jsxRuntimeExports.jsx("button",{className:"main-layout__clear-filters-btn",onClick:d,type:"button",children:"Clear all filters"})]}):A(),jsxRuntimeExports.jsxs("div",{className:"main-layout__interaction-hint","aria-label":"Interaction hint",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),jsxRuntimeExports.jsx("span",{children:S?"Pinch to zoom":"Scroll to zoom"}),jsxRuntimeExports.jsx("span",{className:"main-layout__interaction-hint-separator",children:"‚Ä¢"}),jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M5 9l-3 3l3 3M9 5l3-3l3 3M15 19l3 3l-3 3M19 9l3 3l-3 3M2 12h20M12 2v20"})}),jsxRuntimeExports.jsx("span",{children:"Drag to pan"})]}),M()]}):jsxRuntimeExports.jsxs("div",{className:"main-layout__placeholder",children:[jsxRuntimeExports.jsx("p",{children:"No dataset loaded"}),jsxRuntimeExports.jsx("p",{className:"main-layout__hint",children:"Select a dataset to begin exploring"})]})}),!S&&jsxRuntimeExports.jsx(InfoboxPanel,{}),S&&jsxRuntimeExports.jsx(MobileInfoboxPanel,{})]})}function DatasetExploreWrapper(){const{datasetId:e}=useParams(),{datasetId:t,setDatasetId:r}=useUrlState();return reactExports.useEffect(()=>{e&&isValidDatasetId(e)&&t!==e&&r(e)},[e,t,r]),!e||!isValidDatasetId(e)?jsxRuntimeExports.jsx(Navigate,{to:`/${DEFAULT_DATASET_ID}/explore`,replace:!0}):t!==e?jsxRuntimeExports.jsx("div",{className:"main-layout",children:jsxRuntimeExports.jsx("section",{className:"main-layout__graph","aria-label":"Graph visualization",children:jsxRuntimeExports.jsxs("div",{className:"main-layout__placeholder main-layout__placeholder--loading",children:[jsxRuntimeExports.jsx("div",{className:"main-layout__spinner","aria-hidden":"true"}),jsxRuntimeExports.jsx("p",{children:"Loading dataset..."})]})})}):jsxRuntimeExports.jsx(MainLayout,{})}function HomePage(){const[e,t]=reactExports.useState(AVAILABLE_DATASETS.map(j=>({id:j,manifest:null,loading:!0,error:null}))),[r,s]=reactExports.useState(!0),[i,n]=reactExports.useState(""),l=useDebounce(i,200);reactExports.useEffect(()=>{let j=!0;const R=new AbortController;async function b(){const C=[];for(const S of AVAILABLE_DATASETS){if(!j||R.signal.aborted)return;try{const I=await loadManifest(S,R.signal);C.push({id:S,manifest:I,loading:!1,error:null})}catch(I){if(I instanceof Error&&I.name==="AbortError")return;C.push({id:S,manifest:null,loading:!1,error:I instanceof Error?I.message:"Failed to load"})}}j&&!R.signal.aborted&&(t(C),s(!1))}return b(),()=>{j=!1,R.abort()}},[]);const p=reactExports.useMemo(()=>{let j=e.filter(R=>R.manifest!==null&&!R.error);if(l.trim()){const R=l.toLowerCase();j=j.filter(b=>b.manifest.name.toLowerCase().includes(R)||b.manifest.description.toLowerCase().includes(R))}return j.sort((R,b)=>{const C=getStartYear(R.manifest),S=getStartYear(b.manifest);return C-S})},[e,l]),d=reactExports.useCallback(j=>{n(j.target.value)},[]),u=reactExports.useCallback(()=>{n("")},[]),a=e.filter(j=>!j.loading).length,h=e.length;return jsxRuntimeExports.jsxs("div",{className:"homepage",children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:"Scenius - Explore Collective Genius"}),jsxRuntimeExports.jsx("meta",{name:"description",content:"Discover and explore historical social networks through interactive visualizations. Browse networks of philosophers, scientists, artists, and innovators throughout history."}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:"https://scenius-seven.vercel.app/"}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:"Scenius - Explore Collective Genius"}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:"Discover and explore historical social networks through interactive visualizations. Browse networks of philosophers, scientists, artists, and innovators throughout history."}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:"https://scenius-seven.vercel.app/"}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:site_name",content:"Scenius"}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:"Scenius - Explore Collective Genius"}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:"Discover and explore historical social networks through interactive visualizations."})]}),jsxRuntimeExports.jsxs("main",{className:"homepage__main",children:[jsxRuntimeExports.jsxs("section",{className:"homepage__hero",children:[jsxRuntimeExports.jsx("h2",{className:"homepage__heading",children:"Explore Collective Genius"}),jsxRuntimeExports.jsx("p",{className:"homepage__intro",children:"Discover the connections between great thinkers, artists, and innovators throughout history. Select a network below to begin exploring."})]}),jsxRuntimeExports.jsx("div",{className:"homepage__search-container",children:jsxRuntimeExports.jsxs("div",{className:"homepage__search-wrapper",children:[jsxRuntimeExports.jsxs("svg",{className:"homepage__search-icon",viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),jsxRuntimeExports.jsx("input",{type:"text",className:"homepage__search-input",placeholder:"Search datasets...",value:i,onChange:d,"aria-label":"Search datasets by name or description"}),i&&jsxRuntimeExports.jsx("button",{type:"button",className:"homepage__search-clear",onClick:u,"aria-label":"Clear search",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})}),r&&jsxRuntimeExports.jsxs("div",{className:"homepage__loading",children:[jsxRuntimeExports.jsx("div",{className:"homepage__spinner","aria-hidden":"true"}),jsxRuntimeExports.jsxs("p",{children:["Loading datasets (",a,"/",h,")..."]})]}),!r&&p.length===0&&jsxRuntimeExports.jsx("div",{className:"homepage__empty",children:l?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:['No datasets matching "',jsxRuntimeExports.jsx("strong",{children:l}),'"']}),jsxRuntimeExports.jsx("button",{type:"button",className:"homepage__empty-clear",onClick:u,children:"Clear search"})]}):jsxRuntimeExports.jsx("p",{children:"No datasets available"})}),!r&&p.length>0&&jsxRuntimeExports.jsx("section",{className:"homepage__grid-section",children:jsxRuntimeExports.jsx("div",{className:"homepage__grid",children:p.map(({manifest:j})=>jsxRuntimeExports.jsx(DatasetTile,{manifest:j},j.id))})})]}),jsxRuntimeExports.jsx("footer",{className:"homepage__footer",children:jsxRuntimeExports.jsx("p",{className:"homepage__footer-text",children:"Scenius visualizes historical social networks to help understand how ideas spread through communities."})})]})}function NotFoundPage({message:e,datasetId:t}){return jsxRuntimeExports.jsxs("div",{className:"not-found-page",children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:"Page Not Found | Scenius"}),jsxRuntimeExports.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),jsxRuntimeExports.jsxs("div",{className:"not-found-page__content",children:[jsxRuntimeExports.jsx("div",{className:"not-found-page__icon","aria-hidden":"true",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"64",height:"64",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M12 8v4m0 4h.01"})]})}),jsxRuntimeExports.jsx("h1",{className:"not-found-page__title",children:"Page Not Found"}),jsxRuntimeExports.jsx("p",{className:"not-found-page__message",children:e||"The resource you're looking for doesn't exist or has been moved."}),jsxRuntimeExports.jsxs("div",{className:"not-found-page__actions",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"not-found-page__button not-found-page__button--primary",children:"Go to Home"}),t&&jsxRuntimeExports.jsx(Link,{to:`/${encodeURIComponent(t)}`,className:"not-found-page__button not-found-page__button--secondary",children:"View Dataset"})]})]})]})}function getTemporalRange(e){var t,r;return(t=e.scope)!=null&&t.startYear&&((r=e.scope)!=null&&r.endYear)?`${e.scope.startYear}‚Äì${e.scope.endYear}`:e.temporalScope?e.temporalScope.replace("-","‚Äì"):null}function TopConnectedSection({type:e,items:t,datasetId:r}){return t.length===0?null:jsxRuntimeExports.jsxs("div",{className:"dataset-overview__pole-column",children:[jsxRuntimeExports.jsxs("h3",{className:"dataset-overview__pole-header",children:[jsxRuntimeExports.jsx("span",{className:"dataset-overview__pole-icon","aria-hidden":"true",children:getTypeIcon(e)}),getTypeLabel(e)]}),jsxRuntimeExports.jsx("ul",{className:"dataset-overview__pole-list",children:t.map(({node:s,degree:i})=>jsxRuntimeExports.jsxs("li",{className:"dataset-overview__pole-item",children:[jsxRuntimeExports.jsx(Link,{to:buildNodeUrl$1(r,s.id),className:"dataset-overview__pole-link",children:s.title}),jsxRuntimeExports.jsx(Link,{to:buildExploreUrl(r,{selected:s.id,type:"node",layout:"graph"}),className:"dataset-overview__explore-link",title:`Explore ${s.title} in graph`,"aria-label":`Explore ${s.title} in graph view`,children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),jsxRuntimeExports.jsx("span",{className:"dataset-overview__pole-degree",title:`${i} connections`,children:i})]},s.id))})]})}function DatasetOverviewPage(){const{datasetId:e}=useParams(),[t,r]=reactExports.useState(!0),[s,i]=reactExports.useState(null),[n,l]=reactExports.useState(null),[p,d]=reactExports.useState(null);reactExports.useEffect(()=>{if(!e){i("No dataset specified"),r(!1);return}if(!isValidDatasetId(e)){i(`Dataset "${e}" not found`),r(!1);return}const b=new AbortController;async function C(){r(!0),i(null);try{const S=await loadDataset(e,b.signal);if(b.signal.aborted)return;l(S.manifest),d(S.data)}catch(S){if(b.signal.aborted)return;i(S instanceof Error?S.message:"Failed to load dataset")}finally{b.signal.aborted||r(!1)}}return C(),()=>b.abort()},[e]);const u=useTopConnectedNodes((p==null?void 0:p.nodes)||[],(p==null?void 0:p.edges)||[],5),a=reactExports.useMemo(()=>{var C;if(!((C=p==null?void 0:p.nodes)!=null&&C.length))return null;const b=Math.floor(Math.random()*p.nodes.length);return p.nodes[b]},[p]);if(t)return jsxRuntimeExports.jsxs("div",{className:"dataset-overview dataset-overview--loading",children:[jsxRuntimeExports.jsx("div",{className:"dataset-overview__spinner","aria-hidden":"true"}),jsxRuntimeExports.jsx("p",{children:"Loading dataset..."})]});if(s||!n||!e)return jsxRuntimeExports.jsx(NotFoundPage,{message:s||"Dataset not found"});const h=getTemporalRange(n),j=n.bannerEmoji||"‚ùì",R=buildFullDatasetUrl(e);return jsxRuntimeExports.jsxs("div",{className:"dataset-overview",children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsxs("title",{children:[n.name," | Scenius"]}),jsxRuntimeExports.jsx("meta",{name:"description",content:n.description}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:R}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:`${n.name} | Scenius`}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:n.description}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:R}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"})]}),jsxRuntimeExports.jsx("nav",{className:"dataset-overview__breadcrumb","aria-label":"Breadcrumb",children:jsxRuntimeExports.jsxs(Link,{to:"/",className:"dataset-overview__back-link",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"All Datasets"]})}),jsxRuntimeExports.jsxs("header",{className:"dataset-overview__header",children:[n.bannerImage?jsxRuntimeExports.jsx("div",{className:"dataset-overview__banner-image-container",children:jsxRuntimeExports.jsx("img",{src:getPublicAssetUrl(n.bannerImage),alt:`${n.name} banner`,className:"dataset-overview__banner-image"})}):jsxRuntimeExports.jsx("div",{className:"dataset-overview__banner-emoji","aria-hidden":"true",children:j}),jsxRuntimeExports.jsxs("div",{className:"dataset-overview__header-content",children:[jsxRuntimeExports.jsx("h1",{className:"dataset-overview__title",children:n.name}),jsxRuntimeExports.jsx("p",{className:"dataset-overview__description",children:n.description}),jsxRuntimeExports.jsxs("div",{className:"dataset-overview__meta",children:[h&&jsxRuntimeExports.jsxs("span",{className:"dataset-overview__meta-item",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("polyline",{points:"12,6 12,12 16,14"})]}),h]}),n.nodeCount!==void 0&&jsxRuntimeExports.jsxs("span",{className:"dataset-overview__meta-item",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"5",cy:"6",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"19",cy:"6",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"5",cy:"18",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"19",cy:"18",r:"2"}),jsxRuntimeExports.jsx("line",{x1:"9.5",y1:"10",x2:"6.5",y2:"7.5"}),jsxRuntimeExports.jsx("line",{x1:"14.5",y1:"10",x2:"17.5",y2:"7.5"}),jsxRuntimeExports.jsx("line",{x1:"9.5",y1:"14",x2:"6.5",y2:"16.5"}),jsxRuntimeExports.jsx("line",{x1:"14.5",y1:"14",x2:"17.5",y2:"16.5"})]}),n.nodeCount," nodes"]}),n.edgeCount!==void 0&&jsxRuntimeExports.jsxs("span",{className:"dataset-overview__meta-item",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),jsxRuntimeExports.jsx("polyline",{points:"12,5 19,12 12,19"})]}),n.edgeCount," connections"]})]}),jsxRuntimeExports.jsxs("div",{className:"dataset-overview__cta-group",children:[jsxRuntimeExports.jsxs(Link,{to:buildExploreUrl(e),className:"dataset-overview__explore-button",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"}),jsxRuntimeExports.jsx("circle",{cx:"5",cy:"6",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"19",cy:"6",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"5",cy:"18",r:"2"}),jsxRuntimeExports.jsx("circle",{cx:"19",cy:"18",r:"2"}),jsxRuntimeExports.jsx("line",{x1:"9.5",y1:"10",x2:"6.5",y2:"7.5"}),jsxRuntimeExports.jsx("line",{x1:"14.5",y1:"10",x2:"17.5",y2:"7.5"}),jsxRuntimeExports.jsx("line",{x1:"9.5",y1:"14",x2:"6.5",y2:"16.5"}),jsxRuntimeExports.jsx("line",{x1:"14.5",y1:"14",x2:"17.5",y2:"16.5"})]}),"Explore Network"]}),a&&jsxRuntimeExports.jsxs(Link,{to:buildNodeUrl$1(e,a.id),className:"dataset-overview__random-button",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("circle",{cx:"7",cy:"7",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"17",cy:"7",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"15",cy:"17",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"19",cy:"17",r:"1",fill:"currentColor"}),jsxRuntimeExports.jsx("circle",{cx:"7",cy:"17",r:"1",fill:"currentColor"})]}),"Discover Random Node"]})]})]})]}),jsxRuntimeExports.jsxs("main",{className:"dataset-overview__content",children:[jsxRuntimeExports.jsxs("section",{className:"dataset-overview__pole-section",children:[jsxRuntimeExports.jsx("h2",{className:"dataset-overview__section-title",children:"Most Connected"}),jsxRuntimeExports.jsx("p",{className:"dataset-overview__section-description",children:"Key figures and elements in this network, ranked by number of connections."}),jsxRuntimeExports.jsxs("div",{className:"dataset-overview__pole-grid",children:[jsxRuntimeExports.jsx(TopConnectedSection,{type:"person",items:u.person,datasetId:e}),jsxRuntimeExports.jsx(TopConnectedSection,{type:"object",items:u.object,datasetId:e}),jsxRuntimeExports.jsx(TopConnectedSection,{type:"location",items:u.location,datasetId:e}),jsxRuntimeExports.jsx(TopConnectedSection,{type:"entity",items:u.entity,datasetId:e})]})]}),jsxRuntimeExports.jsx("footer",{className:"dataset-overview__footer",children:jsxRuntimeExports.jsxs("div",{className:"dataset-overview__footer-info",children:[n.author&&jsxRuntimeExports.jsxs("p",{className:"dataset-overview__footer-item",children:[jsxRuntimeExports.jsx("strong",{children:"Author:"})," ",n.author]}),n.version&&jsxRuntimeExports.jsxs("p",{className:"dataset-overview__footer-item",children:[jsxRuntimeExports.jsx("strong",{children:"Version:"})," ",n.version]}),n.lastUpdated&&jsxRuntimeExports.jsxs("p",{className:"dataset-overview__footer-item",children:[jsxRuntimeExports.jsx("strong",{children:"Last Updated:"})," ",n.lastUpdated]}),n.license&&jsxRuntimeExports.jsxs("p",{className:"dataset-overview__footer-item",children:[jsxRuntimeExports.jsx("strong",{children:"License:"})," ",n.license]})]})})]})]})}function formatDate$1(e){if(!e)return"";if(/^\d{4}$/.test(e))return e;try{const t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{}return e}function getTypeBadgeClass(e){return`resource-detail__type-badge resource-detail__type-badge--${e}`}function NodeDetailPage(){var le,Z,V,K;const e=useResourceParams(),t=useNavigate(),[r,s]=reactExports.useState(!0),[i,n]=reactExports.useState(null),[l,p]=reactExports.useState(null),[d,u]=reactExports.useState(null),[a,h]=reactExports.useState(null),j=e.type==="node"?e.datasetId:"",R=e.type==="node"?e.nodeId:"";reactExports.useEffect(()=>{if(e.type!=="node")return;const A=new AbortController;async function M(){if(s(!0),n(null),!isValidDatasetId(j)){n(`Dataset "${j}" not found`),s(!1);return}try{const T=await loadDataset(j);if(A.signal.aborted)return;h(T.manifest),u(T.data);const ee=T.data.nodes.find(J=>J.id===R);ee?p(ee):n(`Node "${R}" not found in dataset "${j}"`)}catch(T){if(A.signal.aborted)return;n(T instanceof Error?T.message:"Failed to load dataset")}finally{A.signal.aborted||s(!1)}}return M(),()=>A.abort()},[e.type,j,R]);const b=reactExports.useCallback(A=>{t(`/${j}/node/${A}`)},[j,t]),C=reactExports.useCallback(A=>d==null?void 0:d.nodes.find(M=>M.id===A),[d]),S=l??{id:"",type:"person",title:""},{enrichedData:I,handleImageError:G}=useNodeEnrichedData(S),[U,D]=reactExports.useState(!0);if(reactExports.useEffect(()=>{D(!0)},[l==null?void 0:l.id,I.imageUrl]),e.type==="invalid")return jsxRuntimeExports.jsx(NotFoundPage,{message:e.error});if(e.type!=="node")return jsxRuntimeExports.jsx(NotFoundPage,{message:"Invalid route for node detail page"});if(r)return jsxRuntimeExports.jsxs("div",{className:"resource-detail resource-detail--loading",children:[jsxRuntimeExports.jsx("div",{className:"resource-detail__spinner","aria-hidden":"true"}),jsxRuntimeExports.jsx("p",{children:"Loading..."})]});if(i||!l||!a)return jsxRuntimeExports.jsx(NotFoundPage,{message:i||"Node not found",datasetId:j});const q=buildFullNodeUrl(j,R),F=buildGraphViewUrl(j,"node",R);return jsxRuntimeExports.jsxs("div",{className:"resource-detail",children:[jsxRuntimeExports.jsx(ResourceMeta,{title:l.title,description:I.description||l.shortDescription,datasetName:a.name,imageUrl:I.imageUrl||void 0,canonicalUrl:q,ogType:l.type==="person"?"profile":"article",publishedDate:l.dateStart}),jsxRuntimeExports.jsx(SchemaOrg,{node:l,datasetId:j,datasetName:a.name}),jsxRuntimeExports.jsxs("nav",{className:"resource-detail__breadcrumb","aria-label":"Breadcrumb",children:["Dataset: ",jsxRuntimeExports.jsx(Link,{to:`/${encodeURIComponent(j)}`,className:"resource-detail__breadcrumb-link",children:a.name}),jsxRuntimeExports.jsx("span",{className:"resource-detail__breadcrumb-separator","aria-hidden":"true",children:"‚Ä∫"}),jsxRuntimeExports.jsx("span",{className:"resource-detail__breadcrumb-type",children:l.type}),jsxRuntimeExports.jsx("span",{className:"resource-detail__breadcrumb-separator","aria-hidden":"true",children:"‚Ä∫"}),jsxRuntimeExports.jsx("span",{className:"resource-detail__breadcrumb-current",children:l.title})]}),jsxRuntimeExports.jsxs("header",{className:"resource-detail__header",children:[jsxRuntimeExports.jsxs("div",{className:"resource-detail__left-column",children:[I.imageUrl&&isValidImageUrl(I.imageUrl)&&jsxRuntimeExports.jsxs("div",{className:"resource-detail__image-container",children:[U&&jsxRuntimeExports.jsx("div",{className:"resource-detail__image-loading","aria-label":"Loading image..."}),jsxRuntimeExports.jsx("img",{src:I.imageUrl,alt:l.title,className:`resource-detail__image ${U?"resource-detail__image--loading":"resource-detail__image--loaded"}`,onLoad:()=>D(!1),onError:()=>{D(!1),G()}}),I.imageSource==="wikipedia"&&I.wikipediaUrl&&!U&&jsxRuntimeExports.jsx("div",{className:"resource-detail__image-attribution",children:jsxRuntimeExports.jsx(WikipediaAttribution,{wikipediaUrl:I.wikipediaUrl,size:"small"})})]}),I.loading&&!I.imageUrl&&jsxRuntimeExports.jsx("div",{className:"resource-detail__image-container",children:jsxRuntimeExports.jsx("div",{className:"resource-detail__image-loading","aria-label":"Loading image..."})}),!I.loading&&(!I.imageUrl||!isValidImageUrl(I.imageUrl))&&jsxRuntimeExports.jsx("div",{className:"resource-detail__image-container resource-detail__image-fallback","aria-label":`${l.type} icon`,children:jsxRuntimeExports.jsx("span",{className:"resource-detail__image-emoji",role:"img","aria-hidden":"true",children:getNodeTypeEmoji(l.type)})}),jsxRuntimeExports.jsxs(Link,{to:F,className:"resource-detail__action-button resource-detail__action-button--primary",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"}),jsxRuntimeExports.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]}),"View in Graph"]})]}),jsxRuntimeExports.jsxs("div",{className:"resource-detail__header-content",children:[jsxRuntimeExports.jsx("span",{className:getTypeBadgeClass(l.type),children:l.type}),jsxRuntimeExports.jsx("h1",{className:"resource-detail__title",children:l.title}),l.shortDescription&&jsxRuntimeExports.jsx("p",{className:"resource-detail__description",children:l.shortDescription})]})]}),I.description&&I.descriptionSource==="wikipedia"&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__wikipedia-section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__wikipedia-title",children:"Wikipedia"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__wikipedia-text",children:I.description}),I.wikipediaUrl&&jsxRuntimeExports.jsx(WikipediaAttribution,{wikipediaUrl:I.wikipediaUrl,variant:"inline"})]}),jsxRuntimeExports.jsxs("main",{className:"resource-detail__content",children:[(l.dateStart||l.dateEnd)&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:l.type==="person"?"Lifespan":"Dates"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.dateStart&&l.dateEnd?`${formatDate$1(l.dateStart)} ‚Äì ${formatDate$1(l.dateEnd)}`:l.dateStart?formatDate$1(l.dateStart):formatDate$1(l.dateEnd)})]}),isPersonNode(l)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[l.alternateNames&&l.alternateNames.length>0&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Also Known As"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.alternateNames.join(", ")})]}),l.nationality&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Nationality"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.nationality})]}),l.occupations&&l.occupations.length>0&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Occupations"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.occupations.join(", ")})]}),l.birthPlace&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Birth Place"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:typeof l.birthPlace=="string"&&C(l.birthPlace)?jsxRuntimeExports.jsx("button",{className:"resource-detail__node-link",onClick:()=>b(l.birthPlace),children:((le=C(l.birthPlace))==null?void 0:le.title)||l.birthPlace}):l.birthPlace})]}),l.deathPlace&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Death Place"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:typeof l.deathPlace=="string"&&C(l.deathPlace)?jsxRuntimeExports.jsx("button",{className:"resource-detail__node-link",onClick:()=>b(l.deathPlace),children:((Z=C(l.deathPlace))==null?void 0:Z.title)||l.deathPlace}):l.deathPlace})]}),l.biography&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Biography"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text resource-detail__text--long",children:l.biography})]})]}),isObjectNode(l)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[l.objectType&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Object Type"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.objectType})]}),l.creators&&l.creators.length>0&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Creators"}),jsxRuntimeExports.jsx("ul",{className:"resource-detail__list",children:l.creators.map((A,M)=>{var T;return jsxRuntimeExports.jsx("li",{children:typeof A=="string"&&C(A)?jsxRuntimeExports.jsx("button",{className:"resource-detail__node-link",onClick:()=>b(A),children:((T=C(A))==null?void 0:T.title)||A}):String(A)},typeof A=="string"?A:M)})})]}),l.dateCreated&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Date Created"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:formatDate$1(l.dateCreated)})]}),l.language&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Language"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.language})]}),l.subject&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Subject"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.subject})]})]}),isLocationNode(l)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[l.locationType&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Location Type"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.locationType})]}),l.country&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Country"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.country})]}),l.parentLocation&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Parent Location"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:typeof l.parentLocation=="string"&&C(l.parentLocation)?jsxRuntimeExports.jsx("button",{className:"resource-detail__node-link",onClick:()=>b(l.parentLocation),children:((V=C(l.parentLocation))==null?void 0:V.title)||l.parentLocation}):String(l.parentLocation)})]}),l.coordinates&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Coordinates"}),jsxRuntimeExports.jsxs("p",{className:"resource-detail__text",children:[l.coordinates.lat.toFixed(4),", ",l.coordinates.lng.toFixed(4)]})]})]}),isEntityNode(l)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[l.entityType&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Entity Type"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:l.entityType})]}),l.foundedBy&&l.foundedBy.length>0&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Founded By"}),jsxRuntimeExports.jsx("ul",{className:"resource-detail__list",children:l.foundedBy.map((A,M)=>{var T;return jsxRuntimeExports.jsx("li",{children:typeof A=="string"&&C(A)?jsxRuntimeExports.jsx("button",{className:"resource-detail__node-link",onClick:()=>b(A),children:((T=C(A))==null?void 0:T.title)||A}):String(A)},typeof A=="string"?A:M)})})]}),l.headquarters&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"Headquarters"}),jsxRuntimeExports.jsx("p",{className:"resource-detail__text",children:typeof l.headquarters=="string"&&C(l.headquarters)?jsxRuntimeExports.jsx("button",{className:"resource-detail__node-link",onClick:()=>b(l.headquarters),children:((K=C(l.headquarters))==null?void 0:K.title)||l.headquarters}):String(l.headquarters)})]}),l.members&&l.members.length>0&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsxs("h2",{className:"resource-detail__section-title",children:["Members (",l.members.length,")"]}),jsxRuntimeExports.jsx("ul",{className:"resource-detail__list",children:l.members.map((A,M)=>{var T;return jsxRuntimeExports.jsx("li",{children:typeof A=="string"&&C(A)?jsxRuntimeExports.jsx("button",{className:"resource-detail__node-link",onClick:()=>b(A),children:((T=C(A))==null?void 0:T.title)||A}):String(A)},typeof A=="string"?A:M)})})]})]}),l.externalLinks&&l.externalLinks.length>0&&jsxRuntimeExports.jsxs("section",{className:"resource-detail__section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:"External Links"}),jsxRuntimeExports.jsx("ul",{className:"resource-detail__external-links",children:l.externalLinks.map(A=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs("a",{href:sanitizeUrl(A.url),target:"_blank",rel:"noopener noreferrer",className:"resource-detail__external-link",children:[A.label,jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"})})]})},A.url))})]})]})]})}function formatDate(e){if(!e)return"";if(/^\d{4}$/.test(e))return e;try{const t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{}return e}function formatRelationship(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function formatEdgeDescription(e,t,r){const s=(t==null?void 0:t.title)??e.source,i=(r==null?void 0:r.title)??e.target,n=e.relationship.replace(/_/g," ");return`${s} ${n} ${i}`}function getStrengthColor(e){switch(e){case"strong":return"#10b981";case"moderate":return"#3b82f6";case"weak":return"#f59e0b";case"speculative":return"#ef4444";default:return"#6b7280"}}function NodeCard({node:e,label:t,datasetId:r}){return e?jsxRuntimeExports.jsxs(Link,{to:`/${r}/node/${e.id}`,className:`edge-detail__node-card edge-detail__node-card--${e.type}`,children:[e.imageUrl&&isValidImageUrl(e.imageUrl)&&jsxRuntimeExports.jsx("div",{className:"edge-detail__node-card-image",children:jsxRuntimeExports.jsx("img",{src:e.imageUrl,alt:e.title,onError:s=>{s.target.style.display="none"}})}),jsxRuntimeExports.jsxs("div",{className:"edge-detail__node-card-content",children:[jsxRuntimeExports.jsx("span",{className:"edge-detail__node-card-label",children:t}),jsxRuntimeExports.jsx("span",{className:"edge-detail__node-card-name",children:e.title}),jsxRuntimeExports.jsx("span",{className:"edge-detail__node-card-type",children:e.type})]})]}):jsxRuntimeExports.jsxs("div",{className:"edge-detail__node-card edge-detail__node-card--missing",children:[jsxRuntimeExports.jsx("span",{className:"edge-detail__node-card-label",children:t}),jsxRuntimeExports.jsx("span",{className:"edge-detail__node-card-name",children:"Node not found"})]})}function EdgeCard({edge:e,sourceNode:t,targetNode:r,getNode:s,onNodeClick:i}){var n;return jsxRuntimeExports.jsxs("div",{className:"edge-detail__edge-card",children:[jsxRuntimeExports.jsxs("div",{className:"edge-detail__edge-card-header",children:[jsxRuntimeExports.jsx("span",{className:"edge-detail__relationship-badge",children:formatRelationship(e.relationship)}),e.strength&&jsxRuntimeExports.jsx("span",{className:"edge-detail__strength-badge",style:{backgroundColor:getStrengthColor(e.strength)},children:e.strength})]}),jsxRuntimeExports.jsx("p",{className:"edge-detail__edge-description",children:formatEdgeDescription(e,t,r)}),(e.dateStart||e.dateEnd)&&jsxRuntimeExports.jsxs("div",{className:"edge-detail__edge-field",children:[jsxRuntimeExports.jsx("span",{className:"edge-detail__edge-field-label",children:"Time Period"}),jsxRuntimeExports.jsx("span",{className:"edge-detail__edge-field-value",children:e.dateStart&&e.dateEnd?`${formatDate(e.dateStart)} ‚Äì ${formatDate(e.dateEnd)}`:e.dateStart?`From ${formatDate(e.dateStart)}`:`Until ${formatDate(e.dateEnd)}`})]}),jsxRuntimeExports.jsxs("div",{className:"edge-detail__edge-field",children:[jsxRuntimeExports.jsx("span",{className:"edge-detail__edge-field-label",children:"Direction"}),jsxRuntimeExports.jsx("span",{className:"edge-detail__edge-field-value",children:e.directed===!1?"Bidirectional":"Directed"})]}),jsxRuntimeExports.jsxs("div",{className:`edge-detail__evidence ${hasEvidence(e)?"":"edge-detail__evidence--none"}`,children:[jsxRuntimeExports.jsxs("div",{className:"edge-detail__evidence-header",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:hasEvidence(e)?jsxRuntimeExports.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M12 8v4m0 4h.01"})]})}),jsxRuntimeExports.jsx("span",{children:hasEvidence(e)?"Evidence":"No Evidence Provided"})]}),e.evidence&&jsxRuntimeExports.jsx("p",{className:"edge-detail__evidence-text",children:e.evidence}),e.evidenceNodeId&&jsxRuntimeExports.jsxs("div",{className:"edge-detail__evidence-source",children:[jsxRuntimeExports.jsx("span",{className:"edge-detail__evidence-label",children:"Source:"}),jsxRuntimeExports.jsx("button",{className:"edge-detail__node-link",onClick:()=>i(e.evidenceNodeId),children:((n=s(e.evidenceNodeId))==null?void 0:n.title)||e.evidenceNodeId})]}),e.evidenceUrl&&jsxRuntimeExports.jsxs("div",{className:"edge-detail__evidence-url",children:[jsxRuntimeExports.jsx("span",{className:"edge-detail__evidence-label",children:"Reference:"}),jsxRuntimeExports.jsxs("a",{href:sanitizeUrl(e.evidenceUrl),target:"_blank",rel:"noopener noreferrer",className:"edge-detail__external-link",children:["View Source",jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"})})]})]})]})]})}function EdgeDetailPage(){const e=useResourceParams(),t=useNavigate(),[r,s]=reactExports.useState(!0),[i,n]=reactExports.useState(null),[l,p]=reactExports.useState([]),[d,u]=reactExports.useState(),[a,h]=reactExports.useState(),[j,R]=reactExports.useState(null),[b,C]=reactExports.useState(null),S=e.type==="edge"?e.datasetId:"",I=e.type==="edge"?e.sourceId:"",G=e.type==="edge"?e.targetId:"";reactExports.useEffect(()=>{if(e.type!=="edge")return;const M=new AbortController;async function T(){if(s(!0),n(null),!isValidDatasetId(S)){n(`Dataset "${S}" not found`),s(!1);return}try{const ee=await loadDataset(S);if(M.signal.aborted)return;C(ee.manifest),R(ee.data);const J=ee.data.nodes.find(P=>P.id===I),me=ee.data.nodes.find(P=>P.id===G);u(J),h(me);const B=ee.data.edges.filter(P=>P.source===I&&P.target===G||P.source===G&&P.target===I);p(B),!J&&!me?n(`Neither "${I}" nor "${G}" found in dataset`):J?me||n(`Target node "${G}" not found in dataset`):n(`Source node "${I}" not found in dataset`)}catch(ee){if(M.signal.aborted)return;n(ee instanceof Error?ee.message:"Failed to load dataset")}finally{M.signal.aborted||s(!1)}}return T(),()=>M.abort()},[e.type,S,I,G]);const U=reactExports.useCallback(M=>{t(`/${S}/node/${M}`)},[S,t]),D=reactExports.useCallback(M=>j==null?void 0:j.nodes.find(T=>T.id===M),[j]);if(e.type==="invalid")return jsxRuntimeExports.jsx(NotFoundPage,{message:e.error});if(e.type!=="edge")return jsxRuntimeExports.jsx(NotFoundPage,{message:"Invalid route for edge detail page"});if(r)return jsxRuntimeExports.jsxs("div",{className:"resource-detail resource-detail--loading",children:[jsxRuntimeExports.jsx("div",{className:"resource-detail__spinner","aria-hidden":"true"}),jsxRuntimeExports.jsx("p",{children:"Loading..."})]});if(i&&!d&&!a)return jsxRuntimeExports.jsx(NotFoundPage,{message:i,datasetId:S});const q=buildFullEdgeUrl(S,I,G),F=l[0],le=F?buildGraphViewUrl(S,"edge",F.id):`/${encodeURIComponent(S)}/explore`,Z=(d==null?void 0:d.title)||I,V=(a==null?void 0:a.title)||G,K=`${Z} ‚Üí ${V}`,A=l.length>0?`${l.length} relationship${l.length===1?"":"s"} between ${Z} and ${V}`:`Relationship between ${Z} and ${V}`;return jsxRuntimeExports.jsxs("div",{className:"resource-detail edge-detail",children:[jsxRuntimeExports.jsx(ResourceMeta,{title:K,description:A,datasetName:(b==null?void 0:b.name)||S,canonicalUrl:q,ogType:"article",publishedDate:F==null?void 0:F.dateStart}),jsxRuntimeExports.jsxs("nav",{className:"resource-detail__breadcrumb","aria-label":"Breadcrumb",children:[jsxRuntimeExports.jsx(Link,{to:`/${encodeURIComponent(S)}`,className:"resource-detail__breadcrumb-link",children:(b==null?void 0:b.name)||S}),jsxRuntimeExports.jsx("span",{className:"resource-detail__breadcrumb-separator","aria-hidden":"true",children:"‚Ä∫"}),jsxRuntimeExports.jsx("span",{className:"resource-detail__breadcrumb-current",children:"Relationship"})]}),jsxRuntimeExports.jsx("header",{className:"resource-detail__header",children:jsxRuntimeExports.jsxs("div",{className:"resource-detail__header-content",children:[jsxRuntimeExports.jsx("span",{className:"resource-detail__type-badge resource-detail__type-badge--relationship",children:"Relationship"}),jsxRuntimeExports.jsx("h1",{className:"resource-detail__title",children:K}),jsxRuntimeExports.jsx("p",{className:"resource-detail__description",children:A})]})}),jsxRuntimeExports.jsx("div",{className:"resource-detail__actions",children:jsxRuntimeExports.jsxs(Link,{to:le,className:"resource-detail__action-button resource-detail__action-button--primary",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"}),jsxRuntimeExports.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]}),"View in Graph"]})}),jsxRuntimeExports.jsxs("div",{className:"edge-detail__nodes",children:[jsxRuntimeExports.jsx(NodeCard,{node:d,label:"From",datasetId:S}),jsxRuntimeExports.jsx("div",{className:"edge-detail__arrow","aria-hidden":"true",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",width:"32",height:"32",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M5 12h14M13 5l7 7-7 7"})})}),jsxRuntimeExports.jsx(NodeCard,{node:a,label:"To",datasetId:S})]}),jsxRuntimeExports.jsx("main",{className:"resource-detail__content",children:l.length===0?jsxRuntimeExports.jsxs("div",{className:"edge-detail__no-edges",children:[jsxRuntimeExports.jsx("p",{children:"No direct relationships found between these nodes."}),jsxRuntimeExports.jsx("p",{className:"edge-detail__no-edges-hint",children:"They may be connected through other nodes in the network."})]}):jsxRuntimeExports.jsxs("section",{className:"edge-detail__edges-section",children:[jsxRuntimeExports.jsx("h2",{className:"resource-detail__section-title",children:l.length===1?"Relationship":`${l.length} Relationships`}),jsxRuntimeExports.jsx("div",{className:"edge-detail__edges-list",children:l.map(M=>jsxRuntimeExports.jsx(EdgeCard,{edge:M,sourceNode:d,targetNode:a,getNode:D,onNodeClick:U},M.id))})]})})]})}function App(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(HomePage,{})]})}),jsxRuntimeExports.jsx(Route,{path:"/:datasetId",element:jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(DatasetOverviewPage,{})})]})}),jsxRuntimeExports.jsx(Route,{path:"/:datasetId/explore",element:jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(DatasetExploreWrapper,{})})]})}),jsxRuntimeExports.jsx(Route,{path:"/:datasetId/node/:nodeId",element:jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(NodeDetailPage,{})})]})}),jsxRuntimeExports.jsx(Route,{path:"/:datasetId/from/:sourceId/to/:targetId",element:jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(EdgeDetailPage,{})})]})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(NotFoundPage,{message:"Page not found"})]})})]}),jsxRuntimeExports.jsx(FeedbackButton,{})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsx(HelmetProvider,{children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(GraphProvider,{children:jsxRuntimeExports.jsx(App,{})})})})})}));
